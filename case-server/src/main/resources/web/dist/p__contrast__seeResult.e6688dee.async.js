(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+6XX":function(e,t,n){var r=n("y1pI");e.exports=function(e){return r(this.__data__,e)>-1}},"+K+b":function(e,t,n){var r=n("JHRd");e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},"+Xah":function(e,t,n){"use strict";t.a=function(e){return e}},"+c4W":function(e,t,n){var r=n("711d"),o=n("4/ic"),i=n("9ggG"),a=n("9Nap");e.exports=function(e){return i(e)?r(a(e)):o(e)}},"+iFO":function(e,t,n){var r=n("dTAl"),o=n("LcsW"),i=n("6sVZ");e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},"/1FC":function(e,t,n){"use strict";var r=Array.isArray;t.a=r},"/9aa":function(e,t,n){var r=n("NykK"),o=n("ExA7"),i="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&r(e)==i}},"03A+":function(e,t,n){var r=n("JTzB"),o=n("ExA7"),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},"0Cz8":function(e,t,n){var r=n("Xi7e"),o=n("ebwN"),i=n("e4Nc"),a=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!o||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(s)}return n.set(e,t),this.size=n.size,this}},"0ycA":function(e,t){e.exports=function(){return[]}},"1+5i":function(e,t,n){var r=n("w/wX"),o=n("sEf8"),i=n("mdPL"),a=i&&i.isSet,s=a?o(a):r;e.exports=s},"1hJj":function(e,t,n){var r=n("e4Nc"),o=n("ftKO"),i=n("3A9y");function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},"238S":function(e,t,n){e.exports={dropStyle:"dropStyle",user:"user",dowm:"dowm",userIcon:"userIcon",username:"username",loginCss:"loginCss"}},"26kz":function(e,t,n){"use strict";var r=n("aZkK"),o=n("mkut");var i=function(e,t){return e&&Object(r.a)(e,t,o.a)},a=n("5WsY");var s=function(e,t){return function(n,r){if(null==n)return n;if(!Object(a.a)(n))return e(n,r);for(var o=n.length,i=t?o:-1,s=Object(n);(t?i--:++i<o)&&!1!==r(s[i],i,s););return n}}(i);t.a=s},"2ajD":function(e,t){e.exports=function(e){return e!=e}},"2gN3":function(e,t,n){var r=n("Kz5y")["__core-js_shared__"];e.exports=r},"3/ER":function(e,t,n){"use strict";(function(e){var r=n("Ju5/"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n("3UD+")(e))},"3A9y":function(e,t){e.exports=function(e){return this.__data__.has(e)}},"3Fdi":function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},"3Hq1":function(e,t,n){"use strict";t.a=function(e){return void 0===e}},"3WF5":function(e,t,n){var r=n("eUgh"),o=n("ut/Y"),i=n("l9OW"),a=n("Z0cm");e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},"3cmB":function(e,t,n){"use strict";var r=n("Y7yP"),o=n("Ju5/"),i=Object(r.a)(o.a,"Map");t.a=i},"4/ic":function(e,t,n){var r=n("ZWtO");e.exports=function(e){return function(t){return r(t,e)}}},"44Ds":function(e,t,n){var r=n("e4Nc"),o="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},"4kuk":function(e,t,n){var r=n("SfRM"),o=n("Hvzi"),i=n("u8Dt"),a=n("ekgI"),s=n("JSQU");function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},"4qC0":function(e,t,n){var r=n("NykK"),o=n("Z0cm"),i=n("ExA7"),a="[object String]";e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&r(e)==a}},"4sDh":function(e,t,n){var r=n("4uTw"),o=n("03A+"),i=n("Z0cm"),a=n("wJg7"),s=n("shjB"),c=n("9Nap");e.exports=function(e,t,n){for(var u=-1,l=(t=r(t,e)).length,h=!1;++u<l;){var d=c(t[u]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++u!=l?h:!!(l=null==e?0:e.length)&&s(l)&&a(d,l)&&(i(e)||o(e))}},"4uTw":function(e,t,n){var r=n("Z0cm"),o=n("9ggG"),i=n("GNiM"),a=n("dt0z");e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}},"4uoh":function(e,t,n){e.exports={"big-icon":"big-icon","ant-btn":"ant-btn",anticon:"anticon"}},"5Tg0":function(e,t,n){(function(e){var r=n("Kz5y"),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n("YuTi")(e))},"5WsY":function(e,t,n){"use strict";var r=n("vJtL"),o=n("Js68");t.a=function(e){return null!=e&&Object(o.a)(e.length)&&!Object(r.a)(e)}},"6sVZ":function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},"711d":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"77Zs":function(e,t,n){var r=n("Xi7e");e.exports=function(){this.__data__=new r,this.size=0}},"7GkX":function(e,t,n){var r=n("b80T"),o=n("A90E"),i=n("MMmD");e.exports=function(e){return i(e)?r(e):o(e)}},"7Ix3":function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},"7fqy":function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},"7gMY":function(e,t,n){"use strict";var r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},o=n("9f76"),i=n("/1FC"),a=n("WOAq"),s=n("cSlR"),c=n("oYcn"),u=Object.prototype.hasOwnProperty;t.a=function(e,t){var n=Object(i.a)(e),l=!n&&Object(o.a)(e),h=!n&&!l&&Object(a.a)(e),d=!n&&!l&&!h&&Object(c.a)(e),f=n||l||h||d,p=f?r(e.length,String):[],g=p.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||Object(s.a)(m,g))||p.push(m);return p}},"8Dty":function(e,t,n){e.exports={contras_card:"contras_card",contras_card_default:"contras_card_default",contras_title:"contras_title","ant-table-thead":"ant-table-thead","ant-table-selection-column":"ant-table-selection-column","ant-table-header-column":"ant-table-header-column",historyBox:"historyBox",box_title:"box_title",title_color:"title_color","ant-card-head":"ant-card-head",title_history:"title_history","ant-card-body":"ant-card-body"}},"8M4i":function(e,t,n){"use strict";var r=n("ylTp"),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r.a?r.a.toStringTag:void 0;var c=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o},u=Object.prototype.toString;var l=function(e){return u.call(e)},h="[object Null]",d="[object Undefined]",f=r.a?r.a.toStringTag:void 0;t.a=function(e){return null==e?void 0===e?d:h:f&&f in Object(e)?c(e):l(e)}},"9Nap":function(e,t,n){var r=n("/9aa"),o=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},"9f76":function(e,t,n){"use strict";var r=n("8M4i"),o=n("EUcb"),i="[object Arguments]";var a=function(e){return Object(o.a)(e)&&Object(r.a)(e)==i},s=Object.prototype,c=s.hasOwnProperty,u=s.propertyIsEnumerable,l=a(function(){return arguments}())?a:function(e){return Object(o.a)(e)&&c.call(e,"callee")&&!u.call(e,"callee")};t.a=l},"9ggG":function(e,t,n){var r=n("Z0cm"),o=n("/9aa"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},A90E:function(e,t,n){var r=n("6sVZ"),o=n("V6Ve"),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},AP2z:function(e,t,n){var r=n("nmnc"),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o}},Ag8Z:function(e,t,n){var r=n("JC6p"),o=n("EwQA");e.exports=function(e,t){return e&&r(e,o(t))}},B8du:function(e,t){e.exports=function(){return!1}},BkRI:function(e,t,n){var r=n("OBhP"),o=1,i=4;e.exports=function(e){return r(e,o|i)}},CH3K:function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},CMye:function(e,t,n){var r=n("GoyQ");e.exports=function(e){return e==e&&!r(e)}},CZoQ:function(e,t){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},Ce4a:function(e,t,n){"use strict";var r=n("Ju5/").a.Uint8Array;t.a=r},Cwc5:function(e,t,n){var r=n("NKxu"),o=n("Npjl");e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},D1y2:function(e,t,n){var r=n("FZoo");e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},DSRE:function(e,t,n){(function(e){var r=n("Kz5y"),o=n("B8du"),i=t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c}).call(this,n("YuTi")(e))},DlmY:function(e,t,n){"use strict";var r=n("Y7yP"),o=Object(r.a)(Object,"create");var i=function(){this.__data__=o?o(null):{},this.size=0};var a=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},s="__lodash_hash_undefined__",c=Object.prototype.hasOwnProperty;var u=function(e){var t=this.__data__;if(o){var n=t[e];return n===s?void 0:n}return c.call(t,e)?t[e]:void 0},l=Object.prototype.hasOwnProperty;var h=function(e){var t=this.__data__;return o?void 0!==t[e]:l.call(t,e)},d="__lodash_hash_undefined__";var f=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?d:t,this};function p(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}p.prototype.clear=i,p.prototype.delete=a,p.prototype.get=u,p.prototype.has=h,p.prototype.set=f;var g=p,m=n("nLtN"),v=n("3cmB");var y=function(){this.size=0,this.__data__={hash:new g,map:new(v.a||m.a),string:new g}};var b=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var w=function(e,t){var n=e.__data__;return b(t)?n["string"==typeof t?"string":"hash"]:n.map};var x=function(e){var t=w(this,e).delete(e);return this.size-=t?1:0,t};var k=function(e){return w(this,e).get(e)};var S=function(e){return w(this,e).has(e)};var C=function(e,t){var n=w(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function E(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}E.prototype.clear=y,E.prototype.delete=x,E.prototype.get=k,E.prototype.has=S,E.prototype.set=C;t.a=E},"Dw+G":function(e,t,n){var r=n("juv8"),o=n("mTTR");e.exports=function(e,t){return e&&r(t,o(t),e)}},E2jh:function(e,t,n){var r,o=n("2gN3"),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},EEGq:function(e,t,n){var r=n("juv8"),o=n("oCl/");e.exports=function(e,t){return r(e,o(e),t)}},EUcb:function(e,t,n){"use strict";t.a=function(e){return null!=e&&"object"==typeof e}},EpBk:function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},EwQA:function(e,t,n){var r=n("zZ0H");e.exports=function(e){return"function"==typeof e?e:r}},ExA7:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},"FG+t":function(e,t,n){"use strict";n("qVdP");var r=n("jsC+"),o=(n("lUTK"),n("BvKs")),i=(n("Pwec"),n("CtXQ")),a=(n("miYZ"),n("tsqr")),s=(n("B9cy"),n("Ol7k")),c=n("q1tI"),u=n.n(c),l=(n("TpwP"),n("i2du")),h=n.n(l),d=(n("238S"),n("on7z")),f=s.a.Header,p=h.a.getCookie;t.a=class extends u.a.Component{constructor(){super(...arguments),this.handleDropdownClick=(()=>{Object(d.a)("/user/quit",{method:"POST"}).then(e=>{e&&200===e.code?window.location.href="/login?jumpto=".concat(window.location.href):a.a.error(e.msg)})})}componentDidMount(){p("username")||(window.location.href="/login?jumpto=".concat(window.location.href))}render(){var e=u.a.createElement(o.a,{className:"menu",onClick:this.handleDropdownClick},u.a.createElement(o.a.Item,{key:"logout"},u.a.createElement("span",null,u.a.createElement(i.a,{type:"logout"}),"退出登录")));return p("username")?u.a.createElement(f,{style:{zIndex:9}},u.a.createElement("a",{href:"/",style:{color:"#fff",fontSize:24}},"AgileTC"),p("username")?u.a.createElement(r.a,{overlay:e,overlayClassName:"dropStyle",placement:"bottomLeft"},u.a.createElement("div",{className:"user"},u.a.createElement(i.a,{type:"user",className:"userIcon"}),u.a.createElement("span",{className:"username"},p("username")),u.a.createElement(i.a,{type:"down",className:"dowm"}))):u.a.createElement("a",{href:"/login",className:"loginCss"},"登录/注册")):null}}},FKsJ:function(e,t,n){e.exports=function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?i:String(i)),r)}var o,i}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function u(e,t,n){return(u=c()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),i=new o;return n&&s(i,n.prototype),i}).apply(null,arguments)}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,a(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){var t=c();return function(){var n,r=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,n)}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}var m=Object.create(null);m.open="0",m.close="1",m.ping="2",m.pong="3",m.message="4",m.upgrade="5",m.noop="6";var v=Object.create(null);Object.keys(m).forEach(function(e){v[m[e]]=e});var y,b={type:"error",data:"parser error"},w="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),x="function"==typeof ArrayBuffer,k=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},S=function(e,t,n){var r=e.type,o=e.data;return w&&o instanceof Blob?t?n(o):C(o,n):x&&(o instanceof ArrayBuffer||k(o))?t?n(o):C(new Blob([o]),n):n(m[r]+(o||""))},C=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function E(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O="undefined"==typeof Uint8Array?[]:new Uint8Array(256),N=0;N<_.length;N++)O[_.charCodeAt(N)]=N;var A,T="function"==typeof ArrayBuffer,j=function(e,t){if("string"!=typeof e)return{type:"message",data:D(e,t)};var n=e.charAt(0);if("b"===n)return{type:"message",data:R(e.substring(1),t)};var r=v[n];return r?e.length>1?{type:v[n],data:e.substring(1)}:{type:v[n]}:b},R=function(e,t){if(T){var n=function(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=O[e.charCodeAt(t)],r=O[e.charCodeAt(t+1)],o=O[e.charCodeAt(t+2)],i=O[e.charCodeAt(t+3)],l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}(e);return D(n,t)}return{base64:!0,data:e}},D=function(e,t){switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},L=String.fromCharCode(30);function M(){return new TransformStream({transform:function(e,t){!function(e,t){w&&e.data instanceof Blob?e.data.arrayBuffer().then(E).then(t):x&&(e.data instanceof ArrayBuffer||k(e.data))?t(E(e.data)):S(e,!1,function(e){y||(y=new TextEncoder),t(y.encode(e))})}(e,function(n){var r,o=n.length;if(o<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,o);else if(o<65536){r=new Uint8Array(3);var i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,o)}else{r=new Uint8Array(9);var a=new DataView(r.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(o))}e.data&&"string"!=typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)})}})}function P(e){return e.reduce(function(e,t){return e+t.length},0)}function I(e,t){if(e[0].length===t)return e.shift();for(var n=new Uint8Array(t),r=0,o=0;o<t;o++)n[o]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function B(e){if(e)return function(e){for(var t in B.prototype)e[t]=B.prototype[t];return e}(e)}B.prototype.on=B.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},B.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},B.prototype.off=B.prototype.removeListener=B.prototype.removeAllListeners=B.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},B.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},B.prototype.emitReserved=B.prototype.emit,B.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},B.prototype.hasListeners=function(e){return!!this.listeners(e).length};var z="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function V(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t},{})}var H=z.setTimeout,F=z.clearTimeout;function q(e,t){t.useNativeTimers?(e.setTimeoutFn=H.bind(z),e.clearTimeoutFn=F.bind(z)):(e.setTimeoutFn=z.setTimeout.bind(z),e.clearTimeoutFn=z.clearTimeout.bind(z))}var G=1.33;var U,Z=function(e){i(o,e);var n=d(o);function o(e,r,i){var a;return t(this,o),(a=n.call(this,e)).description=r,a.context=i,a.type="TransportError",a}return r(o)}(l(Error)),J=function(e){i(o,e);var n=d(o);function o(e){var r;return t(this,o),(r=n.call(this)).writable=!1,q(h(r),e),r.opts=e,r.query=e.query,r.socket=e.socket,r}return r(o,[{key:"onError",value:function(e,t,n){return f(a(o.prototype),"emitReserved",this).call(this,"error",new Z(e,t,n)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,f(a(o.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=j(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){f(a(o.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",f(a(o.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}},{key:"createUri",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}},{key:"_hostname",value:function(){var e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}},{key:"_port",value:function(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}},{key:"_query",value:function(e){var t=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}]),o}(B),Y="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),W=64,Q={},X=0,K=0;function $(e){var t="";do{t=Y[e%W]+t,e=Math.floor(e/W)}while(e>0);return t}function ee(){var e=$(+new Date);return e!==U?(X=0,U=e):e+"."+$(X++)}for(;K<W;K++)Q[Y[K]]=K;var te=!1;try{te="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}var ne=te;function re(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||ne))return new XMLHttpRequest}catch(e){}if(!t)try{return new(z[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function oe(){}var ie=null!=new re({xdomain:!1}).responseType,ae=function(e){i(a,e);var n=d(a);function a(e){var r;if(t(this,a),(r=n.call(this,e)).polling=!1,"undefined"!=typeof location){var o="https:"===location.protocol,i=location.port;i||(i=o?"443":"80"),r.xd="undefined"!=typeof location&&e.hostname!==location.hostname||i!==e.port}var s=e&&e.forceBase64;return r.supportsBinary=ie&&!s,r.opts.withCredentials&&(r.cookieJar=void 0),r}return r(a,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(L),r=[],o=0;o<n.length;o++){var i=j(n[o],t);if(r.push(i),"error"===i.type)break}return r})(e,this.socket.binaryType).forEach(function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),o=0;e.forEach(function(e,i){S(e,!1,function(e){r[i]=e,++o===n&&t(r.join(L))})})}(e,function(e){t.doWrite(e,function(){t.writable=!0,t.emitReserved("drain")})})}},{key:"uri",value:function(){var e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=ee()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new se(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",function(e,t){n.onError("xhr post error",e,t)})}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",function(t,n){e.onError("xhr poll error",t,n)}),this.pollXhr=t}}]),a}(J),se=function(e){i(o,e);var n=d(o);function o(e,r){var i;return t(this,o),q(h(i=n.call(this)),r),i.opts=r,i.method=r.method||"GET",i.uri=e,i.data=void 0!==r.data?r.data:null,i.create(),i}return r(o,[{key:"create",value:function(){var e,t=this,n=V(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;var r=this.xhr=new re(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(e){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){var e;3===r.readyState&&(null===(e=t.opts.cookieJar)||void 0===e||e.parseCookies(r)),4===r.readyState&&(200===r.status||1223===r.status?t.onLoad():t.setTimeoutFn(function(){t.onError("number"==typeof r.status?r.status:0)},0))},r.send(this.data)}catch(e){return void this.setTimeoutFn(function(){t.onError(e)},0)}"undefined"!=typeof document&&(this.index=o.requestsCount++,o.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=oe,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete o.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),o}(B);if(se.requestsCount=0,se.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",ue);else if("function"==typeof addEventListener){var ce="onpagehide"in z?"pagehide":"unload";addEventListener(ce,ue,!1)}function ue(){for(var e in se.requests)se.requests.hasOwnProperty(e)&&se.requests[e].abort()}var le="function"==typeof Promise&&"function"==typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},he=z.WebSocket||z.MozWebSocket,de="arraybuffer",fe="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),pe={websocket:function(e){i(o,e);var n=d(o);function o(e){var r;return t(this,o),(r=n.call(this,e)).supportsBinary=!e.forceBase64,r}return r(o,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=fe?{}:V(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=fe?new he(e,t,n):t?new he(e,t):new he(e)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],o=r===e.length-1;S(n,t.supportsBinary,function(e){try{t.ws.send(e)}catch(e){}o&&le(function(){t.writable=!0,t.emitReserved("drain")},t.setTimeoutFn)})},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=ee()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}},{key:"check",value:function(){return!!he}}]),o}(J),webtransport:function(e){i(o,e);var n=d(o);function o(){return t(this,o),n.apply(this,arguments)}return r(o,[{key:"name",get:function(){return"webtransport"}},{key:"doOpen",value:function(){var e=this;"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(function(){e.onClose()}).catch(function(t){e.onError("webtransport error",t)}),this.transport.ready.then(function(){e.transport.createBidirectionalStream().then(function(t){var n=function(e,t){A||(A=new TextDecoder);var n=[],r=0,o=-1,i=!1;return new TransformStream({transform:function(a,s){for(n.push(a);;){if(0===r){if(P(n)<1)break;var c=I(n,1);i=128==(128&c[0]),o=127&c[0],r=o<126?3:126===o?1:2}else if(1===r){if(P(n)<2)break;var u=I(n,2);o=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(2===r){if(P(n)<8)break;var l=I(n,8),h=new DataView(l.buffer,l.byteOffset,l.length),d=h.getUint32(0);if(d>Math.pow(2,21)-1){s.enqueue(b);break}o=d*Math.pow(2,32)+h.getUint32(4),r=3}else{if(P(n)<o)break;var f=I(n,o);s.enqueue(j(i?f:A.decode(f),t)),r=0}if(0===o||o>e){s.enqueue(b);break}}}})}(Number.MAX_SAFE_INTEGER,e.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),o=M();o.readable.pipeTo(t.writable),e.writer=o.writable.getWriter(),function t(){r.read().then(function(n){var r=n.done,o=n.value;r||(e.onPacket(o),t())}).catch(function(e){})}();var i={type:"open"};e.query.sid&&(i.data='{"sid":"'.concat(e.query.sid,'"}')),e.writer.write(i).then(function(){return e.onOpen()})})}))}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],o=r===e.length-1;t.writer.write(n).then(function(){o&&le(function(){t.writable=!0,t.emitReserved("drain")},t.setTimeoutFn)})},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){var e;null===(e=this.transport)||void 0===e||e.close()}}]),o}(J),polling:ae},ge=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,me=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ve(e){var t,n,r=e,o=e.indexOf("["),i=e.indexOf("]");-1!=o&&-1!=i&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var a,s,c=ge.exec(e||""),u={},l=14;l--;)u[me[l]]=c[l]||"";return-1!=o&&-1!=i&&(u.source=r,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=(t=u.path,n=t.replace(/\/{2,9}/g,"/").split("/"),"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1),"/"==t.slice(-1)&&n.splice(n.length-1,1),n),u.queryKey=(a=u.query,s={},a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(s[t]=n)}),s),u}var ye=function(n){i(s,n);var a=d(s);function s(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(this,s),(r=a.call(this)).binaryType=de,r.writeBuffer=[],n&&"object"===e(n)&&(i=n,n=null),n?(n=ve(n),i.hostname=n.host,i.secure="https"===n.protocol||"wss"===n.protocol,i.port=n.port,n.query&&(i.query=n.query)):i.host&&(i.hostname=ve(i.host).host),q(h(r),i),r.secure=null!=i.secure?i.secure:"undefined"!=typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=r.secure?"443":"80"),r.hostname=i.hostname||("undefined"!=typeof location?location.hostname:"localhost"),r.port=i.port||("undefined"!=typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=i.transports||["polling","websocket","webtransport"],r.writeBuffer=[],r.prevBufferLen=0,r.opts=o({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),r.opts.path=r.opts.path.replace(/\/$/,"")+(r.opts.addTrailingSlash?"/":""),"string"==typeof r.opts.query&&(r.opts.query=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"==typeof addEventListener&&(r.opts.closeOnBeforeunload&&(r.beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r.beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return r(s,[{key:"createTransport",value:function(e){var t=o({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=o({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new pe[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&s.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(function(){t.emitReserved("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",function(e){return t.onClose("transport close",e)})}},{key:"probe",value:function(e){var t=this,n=this.createTransport(e),r=!1;s.priorWebsocketSuccess=!1;var o=function(){r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",function(e){if(!r)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",n),!n)return;s.priorWebsocketSuccess="websocket"===n.name,t.transport.pause(function(){r||"closed"!==t.readyState&&(h(),t.setTransport(n),n.send([{type:"upgrade"}]),t.emitReserved("upgrade",n),n=null,t.upgrading=!1,t.flush())})}else{var o=new Error("probe error");o.transport=n.name,t.emitReserved("upgradeError",o)}}))};function i(){r||(r=!0,h(),n.close(),n=null)}var a=function(e){var r=new Error("probe error: "+e);r.transport=n.name,i(),t.emitReserved("upgradeError",r)};function c(){a("transport closed")}function u(){a("socket closed")}function l(e){n&&e.name!==n.name&&i()}var h=function(){n.removeListener("open",o),n.removeListener("error",a),n.removeListener("close",c),t.off("close",u),t.off("upgrading",l)};n.once("open",o),n.once("error",a),n.once("close",c),this.once("close",u),this.once("upgrading",l),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(function(){r||n.open()},200):n.open()}},{key:"onOpen",value:function(){if(this.readyState="open",s.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(function(){e.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){var e,t=this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1;if(!t)return this.writeBuffer;for(var n=1,r=0;r<this.writeBuffer.length;r++){var o=this.writeBuffer[r].data;if(o&&(n+="string"==typeof(e=o)?function(e){for(var t=0,n=0,r=0,o=e.length;r<o;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil((e.byteLength||e.size)*G)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){e.upgrading?r():t()}):this.upgrading?r():t()),this}},{key:"onError",value:function(e){s.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),s}(B);ye.protocol=4,ye.protocol;var be="function"==typeof ArrayBuffer,we=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},xe=Object.prototype.toString,ke="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===xe.call(Blob),Se="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===xe.call(File);function Ce(e){return be&&(e instanceof ArrayBuffer||we(e))||ke&&e instanceof Blob||Se&&e instanceof File}function Ee(t){var n=[],r=t.data,o=t;return o.data=function t(n,r){if(!n)return n;if(Ce(n)){var o={_placeholder:!0,num:r.length};return r.push(n),o}if(Array.isArray(n)){for(var i=new Array(n.length),a=0;a<n.length;a++)i[a]=t(n[a],r);return i}if("object"===e(n)&&!(n instanceof Date)){var s={};for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(s[c]=t(n[c],r));return s}return n}(r,n),o.attachments=n.length,{packet:o,buffers:n}}function _e(t,n){return t.data=function t(n,r){if(!n)return n;if(n&&!0===n._placeholder){var o="number"==typeof n.num&&n.num>=0&&n.num<r.length;if(o)return r[n.num];throw new Error("illegal attachments")}if(Array.isArray(n))for(var i=0;i<n.length;i++)n[i]=t(n[i],r);else if("object"===e(n))for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(n[a]=t(n[a],r));return n}(t.data,n),delete t.attachments,t}var Oe,Ne=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Oe||(Oe={}));var Ae=function(){function n(e){t(this,n),this.replacer=e}return r(n,[{key:"encode",value:function(t){return t.type!==Oe.EVENT&&t.type!==Oe.ACK||!function t(n,r){if(!n||"object"!==e(n))return!1;if(Array.isArray(n)){for(var o=0,i=n.length;o<i;o++)if(t(n[o]))return!0;return!1}if(Ce(n))return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)&&t(n[a]))return!0;return!1}(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===Oe.EVENT?Oe.BINARY_EVENT:Oe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Oe.BINARY_EVENT&&e.type!==Oe.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=Ee(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),n}();function Te(e){return"[object Object]"===Object.prototype.toString.call(e)}var je=function(e){i(o,e);var n=d(o);function o(e){var r;return t(this,o),(r=n.call(this)).reviver=e,r}return r(o,[{key:"add",value:function(e){var t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var n=(t=this.decodeString(e)).type===Oe.BINARY_EVENT;n||t.type===Oe.BINARY_ACK?(t.type=n?Oe.EVENT:Oe.ACK,this.reconstructor=new Re(t),0===t.attachments&&f(a(o.prototype),"emitReserved",this).call(this,"decoded",t)):f(a(o.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!Ce(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,f(a(o.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,n={type:Number(e.charAt(0))};if(void 0===Oe[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Oe.BINARY_EVENT||n.type===Oe.BINARY_ACK){for(var r=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){for(var a=t+1;++t;){var s=e.charAt(t);if(","===s)break;if(t===e.length)break}n.nsp=e.substring(a,t)}else n.nsp="/";var c=e.charAt(t+1);if(""!==c&&Number(c)==c){for(var u=t+1;++t;){var l=e.charAt(t);if(null==l||Number(l)!=l){--t;break}if(t===e.length)break}n.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var h=this.tryParse(e.substr(t));if(!o.isPayloadValid(n.type,h))throw new Error("invalid payload");n.data=h}return n}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Oe.CONNECT:return Te(t);case Oe.DISCONNECT:return void 0===t;case Oe.CONNECT_ERROR:return"string"==typeof t||Te(t);case Oe.EVENT:case Oe.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Ne.indexOf(t[0]));case Oe.ACK:case Oe.BINARY_ACK:return Array.isArray(t)}}}]),o}(B),Re=function(){function e(n){t(this,e),this.packet=n,this.buffers=[],this.reconPack=n}return r(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=_e(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}(),De=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Oe},Encoder:Ae,Decoder:je});function Le(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var Me=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Pe=function(e){i(s,e);var n=d(s);function s(e,r,i){var a;return t(this,s),(a=n.call(this)).connected=!1,a.recovered=!1,a.receiveBuffer=[],a.sendBuffer=[],a._queue=[],a._queueSeq=0,a.ids=0,a.acks={},a.flags={},a.io=e,a.nsp=r,i&&i.auth&&(a.auth=i.auth),a._opts=o({},i),a.io._autoConnect&&a.open(),a}return r(s,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[Le(e,"open",this.onopen.bind(this)),Le(e,"packet",this.onpacket.bind(this)),Le(e,"error",this.onerror.bind(this)),Le(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen(),this)}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(Me.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var o={type:Oe.EVENT,data:n,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var i=this.ids++,a=n.pop();this._registerAckCallback(i,a),o.id=i}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,c=this.flags.volatile&&(!s||!this.connected);return c||(this.connected?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n,r=this,o=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==o){var i=this.io.setTimeoutFn(function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))},o);this.acks[e]=function(){r.io.clearTimeoutFn(i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.apply(r,[null].concat(n))}}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(function(n,o){r.push(function(e,t){return i?e?o(e):n(t):n(e)}),t.emit.apply(t,[e].concat(r))})}},{key:"_addToQueue",value:function(e){var t,n=this;"function"==typeof e[e.length-1]&&(t=e.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:o({fromQueue:!0},this.flags)};e.push(function(e){if(r===n._queue[0]){var o=null!==e;if(o)r.tryCount>n._opts.retries&&(n._queue.shift(),t&&t(e));else if(n._queue.shift(),t){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];t.apply(void 0,[null].concat(a))}return r.pending=!1,n._drainQueue()}}),this._queue.push(r),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth(function(t){e._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:Oe.CONNECT,data:this._pid?o({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){var t=e.nsp===this.nsp;if(t)switch(e.type){case Oe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Oe.EVENT:case Oe.BINARY_EVENT:this.onevent(e);break;case Oe.ACK:case Oe.BINARY_ACK:this.onack(e);break;case Oe.DISCONNECT:this.ondisconnect();break;case Oe.CONNECT_ERROR:this.destroy();var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,n=this._anyListeners.slice(),r=g(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.apply(this,e)}}catch(e){r.e(e)}finally{r.f()}}f(a(s.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t.packet({type:Oe.ACK,id:e,data:o})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach(function(t){return e.emitEvent(t)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(t){e.notifyOutgoingListeners(t),e.packet(t)}),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach(function(e){return e()}),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Oe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=this._anyOutgoingListeners.slice(),r=g(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.apply(this,e.data)}}catch(e){r.e(e)}finally{r.f()}}}}]),s}(B);function Ie(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ie.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Ie.prototype.reset=function(){this.attempts=0},Ie.prototype.setMin=function(e){this.ms=e},Ie.prototype.setMax=function(e){this.max=e},Ie.prototype.setJitter=function(e){this.jitter=e};var Be=function(n){i(a,n);var o=d(a);function a(n,r){var i,s;t(this,a),(i=o.call(this)).nsps={},i.subs=[],n&&"object"===e(n)&&(r=n,n=void 0),(r=r||{}).path=r.path||"/socket.io",i.opts=r,q(h(i),r),i.reconnection(!1!==r.reconnection),i.reconnectionAttempts(r.reconnectionAttempts||1/0),i.reconnectionDelay(r.reconnectionDelay||1e3),i.reconnectionDelayMax(r.reconnectionDelayMax||5e3),i.randomizationFactor(null!==(s=r.randomizationFactor)&&void 0!==s?s:.5),i.backoff=new Ie({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==r.timeout?2e4:r.timeout),i._readyState="closed",i.uri=n;var c=r.parser||De;return i.encoder=new c.Encoder,i.decoder=new c.Decoder,i._autoConnect=!1!==r.autoConnect,i._autoConnect&&i.open(),i}return r(a,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new ye(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var o=Le(n,"open",function(){r.onopen(),e&&e()}),i=function(n){t.cleanup(),t._readyState="closed",t.emitReserved("error",n),e?e(n):t.maybeReconnectOnOpen()},a=Le(n,"error",i);if(!1!==this._timeout){var s=this._timeout,c=this.setTimeoutFn(function(){o(),i(new Error("timeout")),n.close()},s);this.opts.autoUnref&&c.unref(),this.subs.push(function(){t.clearTimeoutFn(c)})}return this.subs.push(o),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(Le(e,"ping",this.onping.bind(this)),Le(e,"data",this.ondata.bind(this)),Le(e,"error",this.onerror.bind(this)),Le(e,"close",this.onclose.bind(this)),Le(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}},{key:"ondecoded",value:function(e){var t=this;le(function(){t.emitReserved("packet",e)},this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Pe(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=Object.keys(this.nsps),n=0,r=t;n<r.length;n++){var o=r[n],i=this.nsps[o];if(i.active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach(function(e){return e()}),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn(function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(function(){e.clearTimeoutFn(r)})}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),a}(B),ze={};function Ve(t,n){"object"===e(t)&&(n=t,t=void 0);var r,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=ve(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(t,(n=n||{}).path||"/socket.io"),i=o.source,a=o.id,s=o.path,c=ze[a]&&s in ze[a].nsps,u=n.forceNew||n["force new connection"]||!1===n.multiplex||c;return u?r=new Be(i,n):(ze[a]||(ze[a]=new Be(i,n)),r=ze[a]),o.query&&!n.query&&(n.query=o.queryKey),r.socket(o.path,n)}return o(Ve,{Manager:Be,Socket:Pe,io:Ve,connect:Ve}),Ve}()},FZoo:function(e,t,n){var r=n("MrPd"),o=n("4uTw"),i=n("wJg7"),a=n("GoyQ"),s=n("9Nap");e.exports=function(e,t,n,c){if(!a(e))return e;for(var u=-1,l=(t=o(t,e)).length,h=l-1,d=e;null!=d&&++u<l;){var f=s(t[u]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(u!=h){var g=d[f];void 0===(p=c?c(g,f,d):void 0)&&(p=a(g)?g:i(t[u+1])?[]:{})}r(d,f,p),d=d[f]}return e}},G6z8:function(e,t,n){var r=n("fR/l"),o=n("oCl/"),i=n("mTTR");e.exports=function(e){return r(e,i,o)}},G8aS:function(e,t,n){"use strict";var r=n("8M4i"),o=n("EUcb"),i="[object Symbol]";t.a=function(e){return"symbol"==typeof e||Object(o.a)(e)&&Object(r.a)(e)==i}},GDJO:function(e,t,n){e.exports={"km-btn-item":"km-btn-item",undo:"undo",redo:"redo"}},GDhZ:function(e,t,n){var r=n("wF/u"),o=n("mwIZ"),i=n("hgQt"),a=n("9ggG"),s=n("CMye"),c=n("IOzZ"),u=n("9Nap"),l=1,h=2;e.exports=function(e,t){return a(e)&&s(t)?c(u(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?i(n,e):r(t,a,l|h)}}},GNiM:function(e,t,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=n("I01J")(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)}),t});e.exports=i},Gi0A:function(e,t,n){var r=n("QqLw"),o=n("ExA7"),i="[object Map]";e.exports=function(e){return o(e)&&r(e)==i}},GoyQ:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},H8j4:function(e,t,n){var r=n("QkVE");e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},HDyB:function(e,t,n){var r=n("nmnc"),o=n("JHRd"),i=n("ljhN"),a=n("or5M"),s=n("7fqy"),c=n("rEGp"),u=1,l=2,h="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",m="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",k=r?r.prototype:void 0,S=k?k.valueOf:void 0;e.exports=function(e,t,n,r,k,C,E){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!C(new o(e),new o(t)));case h:case d:case g:return i(+e,+t);case f:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case p:var _=s;case v:var O=r&u;if(_||(_=c),e.size!=t.size&&!O)return!1;var N=E.get(e);if(N)return N==t;r|=l,E.set(e,t);var A=a(_(e),_(t),r,k,C,E);return E.delete(e),A;case b:if(S)return S.call(e)==S.call(t)}return!1}},HOxn:function(e,t,n){var r=n("Cwc5")(n("Kz5y"),"Promise");e.exports=r},Hvzi:function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},I01J:function(e,t,n){var r=n("44Ds"),o=500;e.exports=function(e){var t=r(e,function(e){return n.size===o&&n.clear(),e}),n=t.cache;return t}},IOzZ:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},IzLi:function(e,t,n){"use strict";t.a=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},JC6p:function(e,t,n){var r=n("cq/+"),o=n("7GkX");e.exports=function(e,t){return e&&r(e,t,o)}},JHRd:function(e,t,n){var r=n("Kz5y").Uint8Array;e.exports=r},JHgL:function(e,t,n){var r=n("QkVE");e.exports=function(e){return r(this,e).get(e)}},JSQU:function(e,t,n){var r=n("YESw"),o="__lodash_hash_undefined__";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?o:t,this}},JTzB:function(e,t,n){var r=n("NykK"),o=n("ExA7"),i="[object Arguments]";e.exports=function(e){return o(e)&&r(e)==i}},JYCR:function(e,t,n){e.exports={"ant-btn":"ant-btn","priority-btn":"priority-btn","ant-btn-link":"ant-btn-link",p1:"p1",p2:"p2",p3:"p3",p4:"p4",p5:"p5"}},Js68:function(e,t,n){"use strict";var r=9007199254740991;t.a=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},"Ju5/":function(e,t,n){"use strict";var r=n("XqMk"),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||o||Function("return this")();t.a=i},Juji:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},KMkd:function(e,t){e.exports=function(){this.__data__=[],this.size=0}},KfNM:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},KwMD:function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},Kz5y:function(e,t,n){var r=n("WFqU"),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},L3Qv:function(e,t,n){"use strict";t.a=function(){return!1}},L8xA:function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},L9pr:function(e,t,n){"use strict";t.a={today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"}},LGYb:function(e,t,n){var r=n("1hJj"),o=n("jbM+"),i=n("Xt/L"),a=n("xYSL"),s=n("dQpi"),c=n("rEGp"),u=200;e.exports=function(e,t,n){var l=-1,h=o,d=e.length,f=!0,p=[],g=p;if(n)f=!1,h=i;else if(d>=u){var m=t?null:s(e);if(m)return c(m);f=!1,h=a,g=new r}else g=t?[]:p;e:for(;++l<d;){var v=e[l],y=t?t(v):v;if(v=n||0!==v?v:0,f&&y==y){for(var b=g.length;b--;)if(g[b]===y)continue e;t&&g.push(y),p.push(v)}else h(g,y,n)||(g!==p&&g.push(y),p.push(v))}return p}},LXxW:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},LcsW:function(e,t,n){var r=n("kekF")(Object.getPrototypeOf,Object);e.exports=r},MMmD:function(e,t,n){var r=n("lSCD"),o=n("shjB");e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},MrPd:function(e,t,n){var r=n("hypo"),o=n("ljhN"),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},MvSz:function(e,t,n){var r=n("LXxW"),o=n("0ycA"),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return i.call(e,t)}))}:o;e.exports=s},NKxu:function(e,t,n){var r=n("lSCD"),o=n("E2jh"),i=n("GoyQ"),a=n("3Fdi"),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,h=u.hasOwnProperty,d=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?d:s).test(a(e))}},Npjl:function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},NykK:function(e,t,n){var r=n("nmnc"),o=n("AP2z"),i=n("KfNM"),a="[object Null]",s="[object Undefined]",c=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:c&&c in Object(e)?o(e):i(e)}},O0oS:function(e,t,n){var r=n("Cwc5"),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},O7RO:function(e,t,n){var r=n("CMye"),o=n("7GkX");e.exports=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,r(a)]}return t}},OBhP:function(e,t,n){var r=n("fmRc"),o=n("gFfm"),i=n("MrPd"),a=n("WwFo"),s=n("Dw+G"),c=n("5Tg0"),u=n("Q1l4"),l=n("VOtZ"),h=n("EEGq"),d=n("qZTm"),f=n("G6z8"),p=n("QqLw"),g=n("yHx3"),m=n("wrZu"),v=n("+iFO"),y=n("Z0cm"),b=n("DSRE"),w=n("zEVN"),x=n("GoyQ"),k=n("1+5i"),S=n("7GkX"),C=n("mTTR"),E=1,_=2,O=4,N="[object Arguments]",A="[object Function]",T="[object GeneratorFunction]",j="[object Object]",R={};R[N]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[j]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[A]=R["[object WeakMap]"]=!1,e.exports=function e(t,n,D,L,M,P){var I,B=n&E,z=n&_,V=n&O;if(D&&(I=M?D(t,L,M,P):D(t)),void 0!==I)return I;if(!x(t))return t;var H=y(t);if(H){if(I=g(t),!B)return u(t,I)}else{var F=p(t),q=F==A||F==T;if(b(t))return c(t,B);if(F==j||F==N||q&&!M){if(I=z||q?{}:v(t),!B)return z?h(t,s(I,t)):l(t,a(I,t))}else{if(!R[F])return M?t:{};I=m(t,F,B)}}P||(P=new r);var G=P.get(t);if(G)return G;P.set(t,I),k(t)?t.forEach(function(r){I.add(e(r,n,D,r,t,P))}):w(t)&&t.forEach(function(r,o){I.set(o,e(r,n,D,o,t,P))});var U=H?void 0:(V?z?f:d:z?C:S)(t);return o(U||t,function(r,o){U&&(r=t[o=r]),i(I,o,e(r,n,D,o,t,P))}),I}},OFL0:function(e,t,n){var r=n("lvO4"),o=n("4sDh");e.exports=function(e,t){return null!=e&&o(e,t,r)}},OZf9:function(e,t,n){"use strict";var r=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},o=n("26kz"),i=n("+Xah");var a=function(e){return"function"==typeof e?e:i.a},s=n("/1FC");t.a=function(e,t){return(Object(s.a)(e)?r:o.a)(e,a(t))}},"Of+w":function(e,t,n){var r=n("Cwc5")(n("Kz5y"),"WeakMap");e.exports=r},Q1l4:function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},QIyF:function(e,t,n){var r=n("Kz5y");e.exports=function(){return r.Date.now()}},QcOe:function(e,t,n){var r=n("GoyQ"),o=n("6sVZ"),i=n("7Ix3"),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},QkVE:function(e,t,n){var r=n("EpBk");e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},QoRX:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},QqLw:function(e,t,n){var r=n("tadb"),o=n("ebwN"),i=n("HOxn"),a=n("yGk4"),s=n("Of+w"),c=n("NykK"),u=n("3Fdi"),l=u(r),h=u(o),d=u(i),f=u(a),p=u(s),g=c;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=g(new o)||i&&"[object Promise]"!=g(i.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case l:return"[object DataView]";case h:return"[object Map]";case d:return"[object Promise]";case f:return"[object Set]";case p:return"[object WeakMap]"}return t}),e.exports=g},"R/W3":function(e,t,n){var r=n("KwMD"),o=n("2ajD"),i=n("CZoQ");e.exports=function(e,t,n){return t==t?i(e,t,n):r(e,o,n)}},SKAX:function(e,t,n){var r=n("JC6p"),o=n("lQqw")(r);e.exports=o},SfRM:function(e,t,n){var r=n("YESw");e.exports=function(){this.__data__=r?r(null):{},this.size=0}},Sof7:function(e,t,n){"use strict";n("GNNt");var r=n("wEI+"),o=(n("5NDa"),n("5rEg")),i=(n("T2oS"),n("W9HT")),a=n("jehZ"),s=n.n(a),c=(n("BoS7"),n("Sdc0")),u=(n("Pwec"),n("CtXQ")),l=(n("Q9mQ"),n("diRs")),h=(n("5Dmo"),n("3S7+")),d=(n("+L6B"),n("2/Rp")),f=(n("Mwp2"),n("VXEj")),p=(n("Telt"),n("Tckk")),g=n("p0pE"),m=n.n(g),v=(n("/xke"),n("TeRw")),y=(n("2qtc"),n("kLXV")),b=(n("Znn+"),n("ZTPi")),w=n("q1tI"),x=n.n(w),k=(n("h7JS"),n("Ilfy"),n("tlOI"),n("FKsJ")),S=n.n(k);var C=class extends x.a.Component{constructor(e){super(e),this.travere=(e=>{for(var t=[],n=0;n<e.length;n++)if(void 0===e[n].op)for(var r=0;r<e[n].length;r++)t.push(e[n][r]);else t.push(e[n]);return t}),this.state={ws:S()(this.props.url,e.wsParam)},this.sendMessage=this.sendMessage.bind(this),this.setupSocket=this.setupSocket.bind(this),this.leaveListener=this.leaveListener.bind(this)}setupSocket(){var e=this.state.ws;e.on("connect",()=>{"function"==typeof this.props.onOpen&&this.props.onOpen()}),e.on("reconnect",()=>{e.disconnect(),v.a.error({message:"Version of client is not equal to server, please refresh."})}),e.on("disconnect",()=>{"function"==typeof this.props.onClose&&this.props.onClose(),localStorage.setItem(JSON.stringify(this.props.wsParam),JSON.stringify(this.props.wsMinder.exportJson()))}),e.on("connect_notify_event",e=>{"function"==typeof this.props.handleWsUserStat&&this.props.handleWsUserStat(e.message)}),e.on("open_event",e=>{var t=JSON.parse(e.message||"{}"),n=m()({},t);try{var r=JSON.parse(localStorage.getItem(JSON.stringify(this.props.wsParam)));if(void 0==r)throw"cache is empty";if(n.base>r.base)throw"choose server";window.minderData=void 0,this.props.wsMinder.importJson(r),window.minderData=r,this.expectedBase=this.props.wsMinder.getBase(),localStorage.removeItem(JSON.stringify(this.props.wsParam))}catch(t){if(e.message===JSON.stringify(this.props.wsMinder.exportJson()))return;window.minderData=void 0,this.props.wsMinder.importJson(n),window.minderData=n,this.expectedBase=this.props.wsMinder.getBase()}}),e.on("edit_ack_event",e=>{var t=JSON.parse(e.message||"{}");this.props.wsMinder.setStatus("readonly");var n=this.travere(t);try{this.props.wsMinder.applyPatches(n)}catch(e){alert("客户端接受应答消息异常，请刷新重试")}}),e.on("edit_notify_event",e=>{var t=JSON.parse(e.message||"{}");try{this.props.wsMinder.setStatus("readonly");var n=this.travere(t);this.props.wsMinder.applyPatches(n)}catch(e){alert("客户端接受通知消息异常，请刷新重试")}}),e.on("undo",e=>{try{"function"==typeof this.props.handleUndoAck&&this.props.handleUndoAck(e.message)}catch(e){alert("客户端接受通知消息异常，请刷新重试")}}),e.on("redo",e=>{try{"function"==typeof this.props.handleRedoAck&&this.props.handleRedoAck(e.message)}catch(e){alert("客户端接受通知消息异常，请刷新重试")}}),e.on("lock",e=>{"function"==typeof this.props.handleLock&&this.props.handleLock(e.message)}),e.on("connect_error",t=>{e.disconnect()}),e.on("warning",e=>{v.a.error({message:"server process patch failed, please refresh"})})}sendMessage(e,t){this.state.ws.emit(e,t)}leaveListener(e){e.preventDefault(),e.returnValue="内容将被存储到缓存，下次打开相同用例优先从缓存获取！",this.props.wsMinder.getBase()>16&&localStorage.setItem(JSON.stringify(this.props.wsParam),JSON.stringify(this.props.wsMinder.exportJson()))}componentDidMount(){this.setupSocket(),window.addEventListener("beforeunload",this.leaveListener)}componentWillUnmount(){window.removeEventListener("beforeunload",this.leaveListener),this.state.ws.disconnect()}render(){return x.a.createElement("div",null)}},E=n("+Gva"),_=n("DlQD"),O=n.n(_),N=(n("i5ig"),n("8OKc"),n("1zMv")),A=(n("GDJO"),100),T=[];var j=class extends w.Component{constructor(){super(...arguments),this.state={undoDiffs:[],redoDiffs:[],patchLock:!1,lastSnap:this.props.minder&&this.props.minder.exportJson()},this.reset=(()=>{this.setState({undoDiffs:[],redoDiffs:[],lastSnap:this.props.minder.exportJson()})}),this.makeUndoDiff=(()=>{var e=this.props.minder,t=this.state,n=t.undoDiffs,r=t.lastSnap,o=e.exportJson(),i=N.a.compare(o,r),a=N.a.compare(r,o);if(i.length){if(1===i.length&&"/base"===i[0].path){var s=n.pop();s.push(i[0]),n.push(s)}else n.push(i),T.push(a);for(;n.length>A;)n.shift(),T.shift();return r=o,this.setState({undoDiffs:n,lastSnap:r}),!0}}),this.makeRedoDiff=(()=>{var e=this.props.minder,t=this.state,n=t.lastSnap,r=t.redoDiffs,o=e.exportJson();r.push(N.a.compare(o,n)),n=o,this.setState({redoDiffs:r,lastSnap:n})}),this.undo=(e=>{this.notifyInfo=e,this.setState({patchLock:!0},()=>{var t=this.props.minder,n=this.state.undoDiffs.pop();T.pop(),n&&(this.notifyInfo instanceof Object?(this.props.wsInstance.sendMessage("undo",{message:JSON.stringify(n)}),t.applyPatches(n)):t.applyPatches(JSON.parse(e||"{}")),this.makeRedoDiff()),this.setState({patchLock:!1})})}),this.redo=(e=>{this.notifyInfo=e,this.setState({patchLock:!0},()=>{var t=this.props.minder,n=this.state.redoDiffs,r=n.pop();r&&(this.notifyInfo instanceof Object?(this.props.wsInstance.sendMessage("redo",{message:JSON.stringify(r)}),t.applyPatches(r)):t.applyPatches(JSON.parse(e||"{}")),this.makeUndoDiff(),T.pop()),this.setState({patchLock:!1})})}),this.getAndResetPatch=(()=>{var e=[...T];return T=[],e}),this.changed=(()=>{var e=this.state.patchLock;if(window.minderData){if(e)return;this.makeUndoDiff()&&this.setState({redoDiffs:[]})}}),this.hasUndo=(()=>!!this.state.undoDiffs.length),this.hasRedo=(()=>{var e=this.state.redoDiffs;return!!e.length}),this.updateSelection=(e=>{var t=this.state.patchLock,n=this.props.minder;if(t){var r=e.patch;switch(r.express){case"node.add":n.select(r.node.getChild(r.index),!0);break;case"node.remove":case"data.replace":case"data.remove":case"data.add":n.select(r.node,!0)}}})}componentDidMount(){this.props.minder.on("import",this.reset)}render(){var e=this.props.isLock,t=this.hasUndo(),n=this.hasRedo();return e&&(t=!1,n=!1),x.a.createElement("div",{className:"nodes-actions",style:{width:64}},x.a.createElement(d.a,{title:"撤销 (Ctrl + Z)",type:"link",icon:"left-circle",size:"small",onClick:this.undo,disabled:!t},"撤销"),x.a.createElement(d.a,{title:"重做 (Ctrl + Y)",type:"link",size:"small",disabled:!n,icon:"right-circle",onClick:this.redo},"重做"))}};var R=class extends w.Component{constructor(){super(...arguments),this.doMove=(e=>{this.props.minder.execCommand(e)})}render(){var e=this.props,t=e.minder,n=e.isLock,r=0===t.getSelectedNodes().length;return n&&(r=!0),x.a.createElement("div",{className:"nodes-actions",style:{width:64}},x.a.createElement(d.a,{type:"link",icon:"arrow-up",size:"small",disabled:r,onClick:()=>this.doMove("ArrangeUp")},"上移"),x.a.createElement(d.a,{type:"link",icon:"arrow-down",size:"small",disabled:r,onClick:()=>this.doMove("ArrangeDown")},"下移"))}},D={width:"14",height:"14",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},L="#e8e8e8",M="#595959",P=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1365 1024"},D,t),x.a.createElement("path",{d:"M682.666667 771.413333V682.666667a68.266667 68.266667 0 0 1 68.266666-68.266667h546.133334a68.266667 68.266667 0 0 1 68.266666 68.266667v273.066666a68.266667 68.266667 0 0 1-68.266666 68.266667h-546.133334a68.266667 68.266667 0 0 1-68.266666-68.266667v-88.746666H361.813333V436.906667H409.6V341.333333h136.533333v95.573334H457.386667v334.506666H682.666667zM136.533333 95.573333H0V0h136.533333v95.573333z m409.6 0H409.6V0h136.533333v95.573333z m-204.8 0H204.8V0h136.533333v95.573333z m0 341.333334H204.8V341.333333h136.533333v95.573334z m-204.8 0H0V341.333333h136.533333v95.573334zM0 276.548267v-123.562667h95.573333v123.562667H0z m649.762133 0v-123.562667H750.933333v123.562667H649.762133zM750.933333 95.573333H614.4V0h136.533333v95.573333z m0 341.333334H614.4V341.333333h136.533333v95.573334z m27.306667 273.066666v218.453334h491.52v-218.453334h-491.52z",fill:e?L:M})),I=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M409.736533 614.4l0.546134-177.493333H301.602133V341.333333h136.533334v68.266667h67.7888l-1.092267 204.8h319.214933a68.266667 68.266667 0 0 1 68.266667 68.266667v273.066666a68.266667 68.266667 0 0 1-68.266667 68.266667H136.533333a68.266667 68.266667 0 0 1-68.266666-68.266667v-273.066666a68.266667 68.266667 0 0 1 68.266666-68.266667h273.2032zM233.335467 95.573333H68.266667V0h165.0688v95.573333z m409.6 0h-136.533334V0h136.533334v95.573333z m0 341.333334h-136.533334V341.333333h136.533334v95.573334z m-204.8-341.333334h-136.533334V0h136.533334v95.573333z m-204.8 341.333334H72.4992V341.333333h160.836267v95.573334zM71.202133 276.548267v-123.562667h121.173334v123.562667H71.202133z m697.1392 0v-123.562667h105.130667v123.562667h-105.130667zM874.018133 95.573333H711.202133V0h162.816v95.573333z m-0.682666 341.333334H711.2704V341.333333h162.2016v95.573334zM163.84 928.426667h632.900267v-218.453334H163.84v218.453334z",fill:e?L:M})),B=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1280 1024"},D,t),x.a.createElement("path",{d:"M364.8 384v339.2H576v-3.776h89.6v115.84H576V812.8H275.2V384H64a64 64 0 0 1-64-64V64a64 64 0 0 1 64-64h512a64 64 0 0 1 64 64v256a64 64 0 0 1-64 64H364.8z m339.2 281.6H576V576h128v89.6z m384 0h-128V576h128v89.6z m0 320h-128V896h128v89.6z m-192-320h-128V576h128v89.6z m0 320h-128V896h128v89.6z m-192 0H576V896h128v89.6z m481.152-150.336v-115.84H1280v115.84h-94.848zM1280 665.6h-128V576h128v89.6z m0 320h-128V896h128v89.6zM89.6 89.6v204.8h460.8V89.6H89.6z",fill:e?L:M})),z=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M512 1024A511.99872 511.99872 0 1 0 468.650775 1.794556 512.169386 512.169386 0 0 0 0.00128 512.00128a511.99872 511.99872 0 0 0 511.99872 511.99872z",fill:"#FFFFFF",fillOpacity:e?.4:1}),x.a.createElement("path",{d:"M512 938.66688A426.6656 426.6656 0 1 0 511.914667 85.250347 426.6656 426.6656 0 0 0 512 938.66688z",fill:"#d81e06",fillOpacity:e?.4:1}),x.a.createElement("path",{d:"M512 938.66688a426.6656 426.6656 0 0 0 426.6656-426.6656H85.3344a426.6656 426.6656 0 0 0 426.6656 426.6656z",fill:"#FFED83",fillOpacity:e?.4:1,"data-spm-anchor-id":"a313x.7781069.0.i5"})),V=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M0 512A512 512 0 1 0 512 0 512 512 0 0 0 0 512z",fill:"#FFED83",fillOpacity:e?.4:1,"data-spm-anchor-id":"a313x.7781069.0.i41"}),x.a.createElement("path",{d:"M782.826255 253.254397a37.559846 37.559846 0 0 1 0 51.727156l-465.48949 465.599314a36.571429 36.571429 0 0 1-51.727155-51.727156l465.489489-465.599314a37.559846 37.559846 0 0 1 51.727156 0z",fill:"#d81e06",fillOpacity:e?.4:1,"data-spm-anchor-id":"a313x.7781069.0.i44"}),x.a.createElement("path",{d:"M265.554698 253.254397a37.559846 37.559846 0 0 1 51.727155 0l465.48949 465.48949a36.571429 36.571429 0 0 1-51.727156 51.727155L265.554698 305.091377a37.559846 37.559846 0 0 1 0-51.83698z",fill:"#d81e06",fillOpacity:e?.4:1,"data-spm-anchor-id":"a313x.7781069.0.i42"})),H=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M509.750303 514.249697m-509.750303 0a509.750303 509.750303 0 1 0 1019.500606 0 509.750303 509.750303 0 1 0-1019.500606 0Z",fill:"#6AC259",fillOpacity:e?.4:1}),x.a.createElement("path",{d:"M250.957576 537.05697a19.859394 19.859394 0 0 1 0-28.780606l28.780606-28.780606a19.859394 19.859394 0 0 1 28.780606 0l2.01697 2.094545 113.105454 121.250909a9.929697 9.929697 0 0 0 14.351515 0L713.69697 317.129697h2.094545a19.859394 19.859394 0 0 1 28.780606 0l28.780606 28.780606a19.859394 19.859394 0 0 1 0 28.780606l-328.921212 341.333333a19.859394 19.859394 0 0 1-28.780606 0L254.991515 543.030303z",fill:"#FFFFFF",fillOpacity:e?.4:1})),F=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M747.3152 415.6416a256.0512 256.0512 0 0 0-489.472 96.768H341.504a170.6496 170.6496 0 0 1 327.6288-58.624l-115.0976 20.9408 227.84 116.736 48.2816-251.392-82.8416 75.5712zM0 512C0 229.2224 229.1712 0 512 0c282.7776 0 512 229.1712 512 512 0 282.7776-229.1712 512-512 512-282.7776 0-512-229.1712-512-512z",fill:"#BE96F9",fillOpacity:e?.4:1,"p-id":"577"})),q=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M674.225 111.4c-7.9-7.8-20.6-7.8-28.5 0L5.925 751.2c-7.9 7.9-7.9 20.7 0 28.5l124.4 124.4c9.5 8.5 21.7 13.6 34.4 14.3h398.7c11.1 0 26.6-6.4 34.4-14.3l420.3-420.3c7.9-7.9 7.9-20.7 0-28.5L674.225 111.4zM558.325 828.3c-9.5 8.6-21.7 13.6-34.5 14.3H215.225c-12.8-0.7-24.9-5.7-34.4-14.3l-58.6-58.7c-7.9-7.9-7.9-20.7 0-28.5l234.5-234.6c7.9-7.9 20.7-7.9 28.5 0l233.1 233.2c7.8 7.9 7.8 20.6 0 28.5l-60 60.1z",fillOpacity:e?.4:1})),G=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M411.880727 905.169455v-279.272728h149.876364v279.272728z m54.272-279.645091v-124.881455h412.904728V325.771636h-64.605091v116.363637h-698.181819v-279.272728h698.181819v116.363637h111.104v268.055273h-412.904728v78.289454z",fillOpacity:e?.4:1})),U=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M1024 0v109.714286h-109.714286V0H1024z m-226.742857 0v109.714286H687.542857V0h109.714286zM570.514286 0v109.714286H460.8V0h109.714286zM336.457143 0v109.714286H226.742857V0h109.714286zM109.714286 0v109.714286H0V0h109.714286zM1024 226.742857v109.714286h-109.714286V226.742857H1024z m-914.285714 0v109.714286H0V226.742857h109.714286zM1024 453.485714v109.714286h-109.714286V453.485714H1024z m-914.285714 0v109.714286H0V453.485714h109.714286z m241.371428-109.714285L702.171429 438.857143 599.771429 541.257143l102.4 102.4-51.2 58.514286-102.4-102.4L438.857143 702.171429 351.085714 343.771429zM1024 687.542857v109.714286h-109.714286V687.542857H1024z m-914.285714 0v109.714286H0V687.542857h109.714286z m226.742857 226.742857V1024H226.742857v-109.714286h109.714286z m234.057143 0V1024H460.8v-109.714286h109.714286z m226.742857 0V1024H687.542857v-109.714286h109.714286z m226.742857 0V1024h-109.714286v-109.714286H1024z m-914.285714 0V1024H0v-109.714286h109.714286z",fillOpacity:e?.4:1})),Z=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M943.8 892.5l-201.4-201c24.2-29 43.9-61.3 58.7-96.3 20-47.3 30.1-97.6 30.1-149.4s-10.1-102-30.1-149.4c-19.3-45.7-47-86.7-82.1-122-35.2-35.2-76.2-62.9-121.9-82.2-47.3-20-97.5-30.2-149.3-30.2-51.8 0-102 10.2-149.3 30.2-45.7 19.3-86.7 47-121.9 82.2s-62.8 76.3-82.1 122c-20 47.3-30.1 97.6-30.1 149.4s10.1 102 30.1 149.4c19.3 45.7 47 86.7 82.1 122 35.2 35.2 76.2 62.9 121.9 82.2 47.3 20 97.5 30.2 149.3 30.2 51.7 0 102-10.2 149.3-30.2 34.6-14.7 66.6-34.1 95.3-58l201.5 201c6.9 6.9 15.9 10.3 24.9 10.3 9.1 0 18.1-3.5 25-10.4 13.8-13.7 13.8-36.1 0-49.8zM669.7 666.6c-0.4 0.4-0.8 0.7-1.2 1.1-0.3 0.3-0.6 0.6-0.8 0.9-59 58.3-137 90.4-219.9 90.4-83.5 0-162.1-32.6-221.2-91.7-59.1-59.1-91.6-137.8-91.6-221.4s32.5-162.3 91.6-221.4c59.1-59.1 137.6-91.7 221.2-91.7s162.1 32.6 221.2 91.7c59.1 59.1 91.6 137.8 91.6 221.4 0 83.3-32.3 161.6-90.9 220.7z"}),x.a.createElement("path",{d:"M573.7 419H473v-98c0-19.5-13-35.3-32.5-35.3S408 301.5 408 321v98H305.3c-19.5 0-35.3 13-35.3 32.5s15.8 32.5 35.3 32.5H408v105.4c0 19.5 13 35.3 32.5 35.3s32.5-15.8 32.5-35.3V484h100.7c19.5 0 35.3-13 35.3-32.5S593.2 419 573.7 419z"})),J=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M946.9 897.7L744 695.2c24.4-29.2 44.2-61.7 59.1-97 20.2-47.7 30.4-98.3 30.4-150.5s-10.2-102.8-30.4-150.5c-19.5-46-47.3-87.4-82.8-122.9s-76.8-63.4-122.8-82.8c-47.7-20.2-98.3-30.4-150.4-30.4S344.4 71.3 296.8 91.5c-46 19.5-87.3 47.4-122.8 82.8-35.5 35.5-63.3 76.8-82.8 122.9-20.2 47.7-30.4 98.3-30.4 150.5S71 550.5 91.2 598.2c19.5 46 47.3 87.4 82.8 122.9s76.8 63.4 122.8 82.8c47.7 20.2 98.3 30.4 150.4 30.4s102.7-10.2 150.4-30.4c34.9-14.8 67.1-34.4 96.1-58.5l203 202.6c6.9 6.9 16 10.4 25.1 10.4 9.1 0 18.2-3.5 25.2-10.5 13.8-13.8 13.8-36.3-0.1-50.2zM447.2 763.2c-84.2 0-163.3-32.8-222.8-92.4C164.8 611.2 132 532 132 447.7c0-84.3 32.8-163.5 92.3-223.1 59.5-59.6 138.7-92.4 222.8-92.4s163.3 32.8 222.8 92.4c59.5 59.6 92.3 138.8 92.3 223.1 0 83.9-32.5 162.8-91.6 222.3-0.4 0.4-0.8 0.8-1.2 1.1-0.3 0.3-0.6 0.6-0.8 0.9-59.3 58.9-137.9 91.2-221.4 91.2z"}),x.a.createElement("path",{d:"M574 416H303.7c-19.7 0-35.6 12.8-35.6 32.5S284 481 303.7 481H574c19.7 0 35.6-12.8 35.6-32.5S593.7 416 574 416z"})),Y=(e,t)=>x.a.createElement("svg",s()({viewBox:"0 0 1024 1024"},D,t),x.a.createElement("path",{d:"M1024.002828 483.15493h-122.892019a390.850704 390.850704 0 0 0-360.803756-359.181221V0.060094h-60.093896v124.093897A390.910798 390.910798 0 0 0 122.894847 483.15493H0.002828v60.093896h122.892019a390.910798 390.910798 0 0 0 357.258216 359.000939V1024h60.093896v-121.569953A390.79061 390.79061 0 0 0 901.050715 543.248826h122.892019V483.15493z m-483.695775 359.18122V723.530516h-60.093896v118.625353A330.997183 330.997183 0 0 1 182.988743 543.248826H300.472312V483.15493H182.988743a330.997183 330.997183 0 0 1 297.224414-298.907043v116.28169h60.093896V184.067606A330.937089 330.937089 0 0 1 841.016912 483.15493H723.533344v60.093896h117.483568a330.937089 330.937089 0 0 1-300.709859 299.087324z"}));class W extends w.Component{render(){var e=this.props,t=e.type,n=e.disabled,r=e.style,o={addChild:()=>P(n,r),addSibling:()=>I(n,r),addParent:()=>B(n,r),block:()=>z(n,r),fail:()=>V(n,r),checked:()=>H(n,r),skip:()=>F(n,r),clear:()=>q(n,r),stylePaste:()=>G(n,r),selectedAll:()=>U(n,r),zoomIn:()=>Z(n,r),zoomOut:()=>J(n,r),target:()=>Y(n,r)};return x.a.createElement(u.a,s()({component:o[t]},this.props))}}n("y8nQ");var Q,X=n("Vl3Y"),K=X.a.create({name:"link"})(e=>{var t=e.minder.queryCommandValue("HyperLink"),n=e.form.getFieldDecorator;return x.a.createElement(y.a,{title:"链接",className:"agiletc-modal",visible:e.visible,onOk:()=>{var t=e.form,n=e.minder,r=e.onCancel;t.validateFields((e,t)=>{if(!e){var o=m()({},t);n.execCommand("HyperLink",o.url,o.title),r()}})},onCancel:e.onCancel},x.a.createElement(X.a,{layout:"vertical"},x.a.createElement(X.a.Item,{label:"链接地址"},n("url",{rules:[{required:!0,message:"必填：以 http(s):// 或 ftp:// 开头"}],initialValue:t.url})(x.a.createElement(o.a,{placeholder:"必填：以 http(s):// 或 ftp:// 开头"}))),x.a.createElement(X.a.Item,{label:"提示文本"},n("title",{initialValue:t.title})(x.a.createElement(o.a,{placeholder:"选填：鼠标在链接上悬停时提示的文本"})))))}),$=(n("bbsP"),n("/wGt")),ee=n("qIgq"),te=n.n(ee),ne=n("G8v5"),re=n.n(ne),oe=n("sEfC"),ie=n.n(oe),ae=e=>{var t=e.minder,n=e.onCancel,r=e.visible,o=e.noteStatus,i=e.toolbar,a=void 0===i?{}:i,s=Object(w.useState)(""),c=te()(s,2),u=c[0],l=c[1],h=Object(w.useCallback)(ie()(e=>t.execCommand("Note",e),500),[]);return Object(w.useEffect)(()=>{l(t.queryCommandValue("note")||a.noteTemplate||"")},[o]),Object(w.useEffect)(()=>{l(t.getSelectedNode()&&(t.getSelectedNode().data.note||a.noteTemplate)||"")},[t.getSelectedNode()]),x.a.createElement($.a,{title:x.a.createElement("span",null,"备注（支持 Markdown 语法）"),placement:"right",width:360,onClose:n,visible:r,mask:!1,getContainer:()=>t.getPaper().container.parentNode,bodyStyle:{padding:0},className:"agiletc-note-drawer"},x.a.createElement(re.a,{toolbar:{},style:{borderRadius:0,border:"none",height:"calc(100vh - 55px)"},value:u,onChange:e=>{l(e),h(e)}}))},se=Object(w.forwardRef)((e,t)=>x.a.createElement(ae,s()({},e,{ref:t}))),ce=(n("DZo9"),n("8z0m")),ue=(n("7Kak"),n("9yH6")),le=X.a.create({name:"image"})(e=>{var t=e.minder.queryCommandValue("Image"),n=e.form,r=n.getFieldDecorator,i=n.getFieldValue,a=n.setFieldsValue,s=e.baseUrl,c=void 0===s?"":s,l=e.uploadUrl,h=void 0===l?"":l;return x.a.createElement(y.a,{title:"图片",className:"agiletc-modal",visible:e.visible,onOk:()=>{var t=e.form,n=e.minder,r=e.onCancel;t.validateFields((e,t)=>{if(!e){var o=m()({},t);n.execCommand("image",o.url,o.title),setTimeout(()=>{r()},300)}})},onCancel:e.onCancel},x.a.createElement(X.a,{layout:"vertical"},x.a.createElement(X.a.Item,null,r("type",{initialValue:"out",normalize:e=>("upload"===e&&r("url"),e)})(x.a.createElement(ue.a.Group,null,x.a.createElement(ue.a.Button,{value:"out"},"外链图片"),x.a.createElement(ue.a.Button,{value:"upload"},"上传图片")))),"out"===i("type")?x.a.createElement(X.a.Item,{label:"图片地址"},r("url",{rules:[{required:!0,message:"必填：以 http(s):// 或 ftp:// 开头"}],initialValue:t.url})(x.a.createElement(o.a,{placeholder:"必填：以 http(s):// 或 ftp:// 开头"}))):x.a.createElement(X.a.Item,{label:"上传图片"},r("upload",{rules:[{required:!0,message:"请上传图片！"}],valuePropName:"fileList",normalize:e=>{if(Array.isArray(e))return e;if(e){var t="removed"===e.file.status?[]:[e.file];return e&&t}}})(x.a.createElement(ce.a,{action:c+h,listType:"picture",accept:"image/*",withCredentials:!0,onChange:e=>{if("done"===e.file.status){var t=e.file.response,n=void 0===t?{}:t;a({url:n.data?n.data[0].url:""})}}},x.a.createElement(d.a,null,x.a.createElement(u.a,{type:"upload"})," 点击上传")))),x.a.createElement(X.a.Item,{label:"提示文本"},r("title",{initialValue:t.title})(x.a.createElement(o.a,{placeholder:"选填：鼠标在图片上悬停时提示的文本"})))))}),he=n("15kH"),de={position:"absolute",zIndex:"2"},fe={position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},pe=e=>{var t=e.minder,n=e.action,r=e.icon,o=e.button,i=e.onChange,a=Object(w.useState)(!1),c=te()(a,2),l=c[0],h=c[1],f=Object(w.useState)(""),p=te()(f,2),g=p[0],m=p[1];Object(w.useEffect)(()=>{m(-1!==t.queryCommandState(n)?t.queryCommandValue(n):"")},[t.getSelectedNode()]);return x.a.createElement("div",{className:"color-wrapper"},x.a.createElement(d.a,s()({},o,{onClick:()=>h(!l)}),x.a.createElement(u.a,{type:r,style:{color:g,backgroundColor:"#ffffff"===g?"#ccc":""}})),l&&x.a.createElement("div",{style:de},x.a.createElement("div",{style:fe,onClick:()=>h(!1)}),x.a.createElement(he.a,{color:g,onChange:e=>{m(e.hex),i(e.hex),h(!1)}})))},ge={root:{data:{text:"百度产品",image:"https://www.baidu.com/img/bd_logo1.png?where=super",imageSize:{width:270,height:129}},children:[{data:{text:"新闻",note:"asdadad"}},{data:{text:"网页",priority:1}},{data:{text:"贴吧",priority:2}},{data:{text:"知道",priority:2}},{data:{text:"音乐",priority:0,progress:1}},{data:{text:"图片",priority:3,progress:5}},{data:{text:"视频",priority:3,progress:0}},{data:{text:"地图",priority:3}},{data:{created:1587038237271,expandState:"expand","font-size":18,"font-style":"italic","font-weight":"bold",id:"c22m3p7alqg0",note:"lll",text:"ddd"}},{data:{text:"百科",priority:3}},{data:{text:"更多",hyperlink:"http://www.baidu.com/more"}}]}},me=["前移:Alt+Up:ArrangeUp","下级:Tab|Insert:AppendChildNode","同级:Enter:AppendSiblingNode","后移:Alt+Down:ArrangeDown","删除:Delete|Backspace:RemoveNode","上级:Shift+Tab|Shift+Insert:AppendParentNode"],ve={classic:"脑图经典","classic-compact":"紧凑经典",snow:"温柔冷光","snow-compact":"紧凑冷光",fish:"鱼骨图",wire:"线框","fresh-red":"清新红","fresh-soil":"泥土黄","fresh-green":"文艺绿","fresh-blue":"天空蓝","fresh-purple":"浪漫紫","fresh-pink":"脑残粉","fresh-red-compat":"紧凑红","fresh-soil-compat":"紧凑黄","fresh-green-compat":"紧凑绿","fresh-blue-compat":"紧凑蓝","fresh-purple-compat":"紧凑紫","fresh-pink-compat":"紧凑粉",tianpan:"经典天盘","tianpan-compact":"紧凑天盘"},ye=[10,12,16,18,24,32,48],be={default:"思维导图",tianpan:"天盘图",structure:"组织结构图",filetree:"目录组织图",right:"逻辑结构图","fish-bone":"鱼骨头图"},we={1:"展开到一级节点",2:"展开到二级节点",3:"展开到三级节点",4:"展开到四级节点",5:"展开到五级节点",6:"展开到六级节点",9999:"展开全部节点"},xe={all:"全选",revert:"反选",siblings:"选择兄弟节点",level:"选择同级节点",path:"选择路径",tree:"选择子树"},ke=[10,20,30,40,50,60,80,100,120,150,180,200],Se=Object(w.forwardRef)((e,t)=>{var n=e.minder,r=Object(w.useState)(100),o=te()(r,2),i=o[0],a=o[1];null!==n&&n.setDefaultOptions({zoom:ke});var s={width:24,height:24},c=e=>{n.execCommand(e)};return n&&n.on("zoom",()=>{a(n.queryCommandValue("zoom"))}),Object(w.useImperativeHandle)(t,()=>({handleClick:c})),x.a.createElement("div",{className:"nav-bar"},x.a.createElement("a",{onClick:()=>c("ZoomIn"),title:"放大"},x.a.createElement(W,{type:"zoomIn",style:s})),x.a.createElement("span",{className:"zoom-text"},i,"%"),x.a.createElement("a",{onClick:()=>c("ZoomOut"),title:"缩小"},x.a.createElement(W,{type:"zoomOut",style:s})),x.a.createElement("a",{style:{marginLeft:8},onClick:()=>{n.execCommand("camera",n.getRoot(),600)},title:"定位根节点"},x.a.createElement(W,{type:"target",style:s})))}),Ce=(n("P2fV"),n("NJEC")),Ee=(n("14J3"),n("BMrR")),_e=(n("jCWc"),n("kPKH")),Oe=(n("OaEy"),n("2fM7")),Ne=Oe.a.Option,Ae=e=>{var t=e.visible,n=e.minder,r=e.onCancel,i=Object(w.useState)([{id:Date.now()}]),a=te()(i,2),s=a[0],c=a[1],l=Object(w.useState)("pariwise"),f=te()(l,2),p=f[0],g=f[1],m=Object(w.useCallback)((e,t,n)=>{var r=s;r.find(e=>e.id===t)[n]=e,c([...r])});return x.a.createElement($.a,{title:"".concat(n.getSelectedNodes()[0].data.text),placement:"right",className:"agiletc-note-drawer",maskClosable:!1,onClose:r,visible:t,width:"500"},x.a.createElement(Ee.a,{gutter:[0,20]},x.a.createElement(_e.a,{span:5,style:{lineHeight:"32px"}},"方法选择："),x.a.createElement(_e.a,{span:19},x.a.createElement(Oe.a,{value:p,onChange:e=>g(e),style:{width:"100%"}},x.a.createElement(Ne,{value:"pariwise"},"pariwise")))),s.map((e,t)=>x.a.createElement(Ee.a,{gutter:[16,16],key:e.id},x.a.createElement(_e.a,{span:8},x.a.createElement(o.a,{value:e.key,placeholder:"请输入因子",onChange:t=>m(t.target.value,e.id,"key")})),x.a.createElement(_e.a,{span:s.length>1?14:16},x.a.createElement(o.a,{value:e.value,placeholder:"请输入因子取值并以“,”分割",onChange:t=>m(t.target.value,e.id,"value")})),s.length>1&&x.a.createElement(_e.a,{span:2,style:{color:"red",marginTop:5}},x.a.createElement(Ce.a,{title:"确认删除?",placement:"topRight",onConfirm:()=>(Q=e.id,void c(s.filter(e=>e.id!==Q))),onCancel:e=>void 0,okText:"确定",cancelText:"取消"},x.a.createElement(u.a,{type:"delete"}))))),x.a.createElement("div",{style:{margin:"20px 0 70px"}},x.a.createElement(h.a,{placement:"top",title:s.every(e=>e.key&&e.value)?null:"填写完整后方可继续添加"},x.a.createElement(d.a,{type:"dashed",block:!0,disabled:!s.every(e=>e.key&&e.value),onClick:()=>c([...s,{id:Date.now()}])},"添加"))),x.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},x.a.createElement(d.a,{onClick:r,style:{marginRight:8}},"取消"),x.a.createElement(h.a,{placement:"topRight",title:s.every(e=>e.key&&e.value)?null:"填写完整后方可确认"},x.a.createElement(d.a,{onClick:()=>{var e={};s.map(t=>(e[t.key]=t.value,t)),window.ws.sendMessage("case_design_event",{method:p,nodeId:n.getSelectedNodes()[0].data.id,message:JSON.stringify(e)}),r()},type:"primary",disabled:!s.every(e=>e.key&&e.value)},"确认"))))};n("TIWq");var Te=class extends w.Component{insertNode(e){var t=this.props.minder;if(t){switch(e){case"childNode":-1===t.queryCommandState("AppendChildNode")||t.execCommand("AppendChildNode","分支主题");break;case"parentNode":-1===t.queryCommandState("AppendParentNode")||t.execCommand("AppendParentNode","分支主题");break;case"siblingNode":-1===t.queryCommandState("AppendSiblingNode")||t.execCommand("AppendSiblingNode","分支主题")}this.props.callback()}}render(){var e=this.props,t=e.minder,n=e.isLock,r=0===t.getSelectedNodes().length;return n&&(r=!0),x.a.createElement("div",{className:"nodes-actions",style:{width:250}},x.a.createElement(d.a,{type:"link",size:"small",disabled:r,onClick:()=>{this.insertNode("childNode")}},x.a.createElement(W,{type:"addChild",disabled:r}),"插入下级主题"),x.a.createElement(d.a,{type:"link",size:"small",disabled:r,onClick:()=>{this.insertNode("parentNode")}},x.a.createElement(W,{type:"addParent",disabled:r}),"插入上级主题"),x.a.createElement(d.a,{type:"link",size:"small",disabled:r,onClick:()=>{this.insertNode("siblingNode")}},x.a.createElement(W,{type:"addSibling",disabled:r}),"插入同级主题"))}};n("JYCR");var je=class extends w.Component{constructor(){super(...arguments),this.handleAction=(e=>{this.props.minder.execCommand("Priority",e)})}render(){var e=this.props,t=e.minder,n=e.priority,r=void 0===n?[1,2,3]:n,o=e.isLock,i=0===t.getSelectedNodes().length;return o&&(i=!0),x.a.createElement("div",{className:"nodes-actions",style:{width:120}},x.a.createElement(h.a,{title:"移除优先级",getPopupContainer:e=>e.parentNode},x.a.createElement(d.a,{type:"link",size:"small",disabled:i,style:{padding:4,height:28},onClick:()=>this.handleAction()},x.a.createElement(u.a,{type:"minus-circle",theme:"filled",style:{fontSize:"18px",color:"rgba(0, 0, 0, 0.6)"}}))),r&&r.map(e=>x.a.createElement(d.a,{key:e,type:"link",size:"small",disabled:i,className:"priority-btn p".concat(e),onClick:()=>this.handleAction(e)},"P",e-1)))}};var Re=class extends w.Component{constructor(){super(...arguments),this.handleAction=(e=>{this.props.minder.execCommand("Progress",e)})}render(){var e=this.props,t=e.minder,n=e.isLock,r=0===t.getSelectedNodes().length;n&&(r=!0);var o={type:"link",disabled:r,style:{padding:4,height:28}},i=[{label:"移除结果",icon:x.a.createElement(u.a,{type:"minus-circle",theme:"filled",style:{fontSize:"18px",color:"rgba(0, 0, 0, 0.6)"}})},{label:"失败",value:1,icon:x.a.createElement(W,{type:"fail",disabled:r,style:{width:18,height:18}})},{label:"通过",value:9,icon:x.a.createElement(W,{type:"checked",disabled:r,style:{width:18,height:18}})},{label:"阻塞",value:5,icon:x.a.createElement(W,{type:"block",disabled:r,style:{width:18,height:18}})},{label:"不执行",value:4,icon:x.a.createElement(W,{type:"skip",disabled:r,style:{width:18,height:18}})}];return x.a.createElement("div",{className:"nodes-actions",style:{width:140}},i&&i.map(e=>x.a.createElement(h.a,{key:e.value||0,title:e.label,getPopupContainer:e=>e.parentNode},x.a.createElement(d.a,s()({},o,{onClick:()=>this.handleAction(e.value)}),e.icon))))}};var De=class extends w.Component{render(){var e=this.props,t=e.minder,n=e.handleShowInput,r=e.isLock,o=0===t.getSelectedNodes().length;return r&&(o=!0),x.a.createElement("div",{className:"nodes-actions",style:{width:64}},x.a.createElement(d.a,{type:"link",icon:"edit",size:"small",disabled:o,onClick:n},"编辑"),x.a.createElement(d.a,{type:"link",icon:"delete",size:"small",disabled:o,onClick:()=>t.execCommand("RemoveNode")},"删除"))}},Le=(n("qVdP"),n("jsC+")),Me=(n("lUTK"),n("BvKs"));n("4uoh");var Pe=class extends w.Component{constructor(){super(...arguments),this.state={showLink:!1,showNote:!1,showImage:!1,noteStatus:null,drawerVisible:!1},this.handleLinkMenuClick=(e=>{var t=e.key;"add"===t||"edit"===t?this.setState({showLink:!0}):this.props.minder.execCommand("HyperLink",null)}),this.handleImageMenuClick=(e=>{var t=e.key;"add"===t||"edit"===t?this.setState({showImage:!0}):(this.props.minder.execCommand("image",""),setTimeout(()=>{this.props.minder.fire("contentchange")},100))}),this.handleNoteMenuClick=(e=>{var t=e.key,n=this.props.minder;"add"===t||"edit"===t?this.setState({showNote:!0}):n.execCommand("note",null),this.setState({noteStatus:n.queryCommandValue("note")})}),this.renderMenu=((e,t)=>{var n=this.props.minder.getSelectedNode();return x.a.createElement(Me.a,{onClick:e=>{"hyperlink"===t&&this.handleLinkMenuClick(e),"image"===t&&this.handleImageMenuClick(e),"note"===t&&this.handleNoteMenuClick(e)}},x.a.createElement(Me.a.Item,{key:"add"},"插入",e),x.a.createElement(Me.a.Item,{key:"remove"},"移除已有",e),n&&void 0!==n.getData(t)&&x.a.createElement(Me.a.Item,{key:"edit"},"编辑已有",e))})}render(){var e=this.props,t=e.minder,n=e.toolbar,r=void 0===n?{}:n,o=e.isLock,i=e.toolbarCustom,a=void 0===i?{custom:null,title:"自定义"}:i,c=this.state,l=c.showLink,h=c.showImage,f=c.showNote,p=c.noteStatus,g=c.drawerVisible,m=0===t.getSelectedNodes().length;o&&(m=!0);var v=this.renderMenu("链接","hyperlink"),y=this.renderMenu("图片","image"),b=this.renderMenu("备注","note");return x.a.createElement("div",{className:"nodes-actions",style:{textAlign:"center",minWidth:200,paddingRight:6}},x.a.createElement(Le.a,{overlay:v,trigger:["click"],disabled:m,getPopupContainer:e=>e.parentNode},x.a.createElement(d.a,{type:"link",size:"small",className:"big-icon"},x.a.createElement(u.a,{type:"link",style:{fontSize:"1.6em"}}),x.a.createElement("br",null),"链接",x.a.createElement(u.a,{type:"caret-down"}))),!1!==r.image&&x.a.createElement(Le.a,{overlay:y,trigger:["click"],disabled:m,getPopupContainer:e=>e.parentNode},x.a.createElement(d.a,{type:"link",size:"small",className:"big-icon"},x.a.createElement(u.a,{type:"picture",style:{fontSize:"1.6em"}}),x.a.createElement("br",null),"图片",x.a.createElement(u.a,{type:"caret-down"}))),x.a.createElement(Le.a,{overlay:b,trigger:["click"],disabled:m,getPopupContainer:e=>e.parentNode},x.a.createElement(d.a,{type:"link",size:"small",className:"big-icon"},x.a.createElement(u.a,{type:"file-text",style:{fontSize:"1.6em"}}),x.a.createElement("br",null),"备注",x.a.createElement(u.a,{type:"caret-down"}))),r.addFactor&&x.a.createElement(Le.a,{overlay:x.a.createElement(Me.a,{onClick:()=>this.setState({drawerVisible:!0})},x.a.createElement(Me.a.Item,{key:"add"},"用例设计")),trigger:["click"],disabled:m,getPopupContainer:e=>e.parentNode},x.a.createElement(d.a,{type:"link",size:"small",className:"big-icon",style:{marginRight:10}},x.a.createElement(u.a,{type:"tool",style:{fontSize:"1.6em"}}),x.a.createElement("br",null),"工具",x.a.createElement(u.a,{type:"caret-down"}))),a.custom&&(m?x.a.createElement(d.a,{type:"link",disabled:!0,size:"small",className:"big-icon"},x.a.createElement(u.a,{type:"edit",style:{fontSize:"1.6em"}}),x.a.createElement("br",null),a.title||"自定义"):a.custom),l&&x.a.createElement(K,s()({visible:l,onCancel:()=>this.setState({showLink:!1})},this.props,{minder:t})),h&&x.a.createElement(le,s()({visible:h,onCancel:()=>this.setState({showImage:!1})},this.props,{minder:t})),f&&x.a.createElement(se,s()({noteStatus:p,visible:f,onCancel:()=>this.setState({showNote:!1})},this.props,{minder:t})),g&&x.a.createElement(Ae,s()({visible:g,onCancel:()=>this.setState({drawerVisible:!1})},this.props,{minder:t})))}},Ie=(n("+BJd"),n("mr32")),Be=(n("miYZ"),n("tsqr"));function ze(e,t,n){var r=t,o=document.getElementsByClassName("kityminder-core-container"),i=e.getRenderBox().cx-e.getRenderBox().width/2,a=e.getRenderBox().cy+o[0].offsetTop-8;if(void 0!==n)return{x:i+=e.getRenderBox().width/2,y:a};r.style.left=Math.round(i)+"px",r.style.top=Math.round(a)+"px"}var Ve={"application/km":"￿"},He={"\ufeff":"SPLITOR","￿":"application/km"},Fe=()=>{};Fe.registMimeTypeProtocol=((e,t)=>{if(t&&He[t])throw new Error("sing has registed!");if(e&&Ve[e])throw new Error("mimetype has registed!");He[t]=e,Ve[e]=t}),Fe.getMimeType=(e=>void 0!==e?He[e]||null:Ve),Fe.getSpitor=(()=>"\ufeff"),Fe.process=((e,t)=>{if(!Fe.isPureText(t)){if(!Fe.whichMimeType(t))throw new Error("unknow mimetype!");t=Fe.getPureText(t)}return!1===e?t:e+"\ufeff"+t}),Fe.getMimeTypeProtocol=((e,t)=>{var n=Ve[e]||!1;return void 0===t?Fe.process.bind(void 0,n):Fe.process(n,t)}),Fe.isPureText=(e=>!~e.indexOf(Fe.getSpitor())),Fe.getPureText=(e=>Fe.isPureText(e)?e:e.split(Fe.getSpitor())[1]),Fe.whichMimeType=(e=>Fe.isPureText(e)?null:Fe.getMimeType(e.split(Fe.getSpitor())[0]));var qe=Fe;function Ge(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ze=null,Je=null,Ye=null,We={init:(e,t)=>{var n=[],r=window.kityminder.data,o=r.getRegisterProtocol("json").decode,i=t=>{for(var n=qe.getMimeTypeProtocol("application/km"),o=[],i=0,a=t.length;i<a;i++)o.push(e.exportNode(t[i]));return n(r.getRegisterProtocol("json").encode(o))},a=t=>{var n=document.getElementsByClassName("agiletc-modal").length>0,r=document.getElementsByClassName("agiletc-note-drawer").length>0,o=document.getElementsByClassName("note-previewer").length>0;return!n&&!r&&!o&&!window.showEdit&&t.preventDefault&&!window.search&&!window.tagInput&&e};Ze=(n=>{if(a(n)){var r=n;switch(e.getStatus()){case"input":break;case"normal":if(t){var o=e.getSelectedNode();r.clipboardData.setData("text/plain",o?o.getText():"")}else{var s=[].concat(e.getSelectedNodes());if(s.length){var c;if(s.length>1)if(s.sort((e,t)=>e.getLevel()-t.getLevel()),(c=s[0].getLevel())!==s[s.length-1].getLevel()){var u=null,l=0,h=s.length,d=h-1;for(u=s[d];u.getLevel()!==c;){for(l=0;l<h&&s[l].getLevel()===c;){if(s[l].isAncestorOf(u)){s.splice(d,1);break}l++}u=s[--d]}}var f=i(s);r.clipboardData.setData("text/plain",f)}}n.preventDefault()}}}),Je=(n=>{if(a(n)&&!t){if("normal"!==e.getStatus())return void n.preventDefault();var r=n;switch(e.getStatus()){case"input":break;case"normal":var o=e.getSelectedNodes();o.length&&(r.clipboardData.setData("text/plain",i(o)),e.execCommand("removenode")),n.preventDefault()}}}),Ye=(r=>{if(a(r)&&!t){if("normal"!==e.getStatus())return void r.preventDefault();var i=r,s=i.clipboardData.getData("text/plain"),c=e.getSelectedNodes(),u=(e,t)=>{var n,r=Ge(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=Qe();o.data.id=i,o.data.created=(new Date).valueOf(),t.push(m()({},o)),o.children.length>0&&u(o.children,t)}}catch(e){r.e(e)}finally{r.f()}};if("application/km"===qe.whichMimeType(s)){var l=o(qe.getPureText(s)),h=null;c.forEach(function(t){for(var r=l.length-1;r>=0;r--)l[r].data.id=Qe(),l[r].data.created=(new Date).valueOf(),u(l[r].children,[]),h=e.createNode(null,t),e.importNode(h,l[r]),n.push(h),t.appendChild(h)}),e.select(n,!0),n=[],e.refresh()}else{if(i.clipboardData&&i.clipboardData.items[0].type.indexOf("image")>-1){var d=i.clipboardData.items[0].getAsFile();return angular.element(document.body).injector().get("server").uploadImage(d).then(function(t){var n=t.data;0===n.errno&&e.execCommand("image",n.data.url)})}c.forEach(function(t){e.Text2Children(t,s)})}r.preventDefault()}}),document.addEventListener("copy",Ze),document.addEventListener("cut",Je),document.addEventListener("paste",Ye)},removeListener:()=>{document.removeEventListener("copy",Ze),document.removeEventListener("cut",Je),document.removeEventListener("paste",Ye)}},Qe=()=>(1e6*+new Date+Math.floor(1e6*Math.random())).toString(36),Xe=e=>{for(var t=[],n=0;n<e.length;n++){var r=e[n].getData("resource");r&&t.push(...r)}return[...new Set(t)]};var Ke=class extends w.Component{constructor(){super(...arguments),this.state={value:"",selectedResource:[],newTags:[],inputVisible:!1,inputValue:""},this.handleClose=(e=>{var t=this.state.newTags.filter(t=>t!==e);this.setState({newTags:t})}),this.showInput=(()=>{window.tagInput=!0,this.setState({inputVisible:!0},()=>this.input.focus())}),this.handleInputChange=(e=>{this.setState({inputValue:e.target.value})}),this.handleInputConfirm=(()=>{var e=this.state.inputValue,t=this.state.newTags,n=this.props.minder,r=Xe(n.getAllNode());e&&-1===t.indexOf(e)&&-1===r.indexOf(e)?t=[...t,e]:-1===t.indexOf(e)&&-1===r.indexOf(e)||Be.a.warning("该标识已存在！"),this.setState({newTags:t,inputVisible:!1,inputValue:""},()=>{window.tagInput=!1})}),this.saveInputRef=(e=>this.input=e),this.onAdd=(e=>{var t=this.props.minder,n=[],r=t.queryCommandValue("Resource");r.indexOf(e)<0&&(n=[...r,e],t.execCommand("Resource",n))}),this.onRemove=(e=>{var t=this.props.minder,n=[],r=t.queryCommandValue("Resource");r.indexOf(e)>-1&&0===(n=r.filter(t=>t!==e&&null!==t)).length&&(n=null),t.execCommand("Resource",n)}),this.handleClick=((e,t)=>{this._delayedClick||(this._delayedClick=ie()(this.doClick,500)),this.clickedOnce?(this._delayedClick.cancel(),this.clickedOnce=!1,this.onRemove(t)):(this._delayedClick(e),this.clickedOnce=!0,this.onAdd(t))}),this.doClick=(()=>{this.clickedOnce=void 0}),this.renderTags=((e,t)=>{var n=this.props,r=n.minder,o=n.isLock,i=0===r.getSelectedNodes().length;return o&&(i=!0),e.map(e=>{var n=r.getResourceColor(e).toHEX();return x.a.createElement(Ie.a,{key:e,className:"resource-tag".concat(i?" disabled":""),disabled:i,closable:t,color:n,onClick:t=>i?null:this.handleClick(t,e),onClose:()=>this.handleClose(e)},e)})})}componentDidMount(){var e=this.props.minder;e.on("contentchange selectionchange",()=>{var t=e.queryCommandValue("Resource");this.setState({selectedResource:t})})}render(){var e=this.state,t=e.newTags,n=e.inputVisible,r=e.inputValue,i=this.props,a=i.minder,s=i.tags,c=Xe(a.getAllNode()).filter(e=>t.indexOf(e)<0&&s.indexOf(e)<0&&"undefined"!==e);return x.a.createElement("div",{className:"nodes-actions",style:{width:360,padding:"0px 4px"}},x.a.createElement(h.a,{title:"选中节点后，单击添加标签，双击移除标签。",getPopupContainer:e=>e.parentNode},x.a.createElement("div",{style:{display:"inline-block"}},s&&this.renderTags(s,!1),c&&this.renderTags(c,!1),t&&this.renderTags(t,!0))),n&&x.a.createElement(o.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:r,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!n&&x.a.createElement(Ie.a,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},x.a.createElement(u.a,{type:"plus"})," 增加标签"))}};var $e=class extends w.Component{constructor(){super(...arguments),this.state={themeValue:this.props.minder.queryCommandValue("Theme")},this.handleThemeChange=(e=>{this.props.minder.execCommand("Theme",e),this.setState({themeValue:e})})}render(){for(var e=this.props,t=e.minder,n=e.toolbar,r=void 0===n?{}:n,o=e.isLock,i=r.theme||Object.keys(ve),a=[],s=0;s<i.length;s++)a.push(x.a.createElement(Oe.a.Option,{key:i[s],value:i[s]},ve[i[s]]));return x.a.createElement("div",{className:"nodes-actions",style:{width:120}},x.a.createElement(Oe.a,{dropdownMatchSelectWidth:!1,value:t.queryCommandValue("Theme"),onChange:this.handleThemeChange,getPopupContainer:e=>e.parentNode,disabled:o},a))}};var et=class extends w.Component{constructor(){super(...arguments),this.state={templateValue:this.props.minder.queryCommandValue("Template")},this.handleTemplateChange=(e=>{this.props.minder.execCommand("Template",e),this.setState({templateValue:e})})}render(){for(var e=this.props,t=e.minder,n=e.toolbar,r=void 0===n?{}:n,o=e.isLock,i=[],a=r.template||Object.keys(be),s=0;s<a.length;s++)i.push(x.a.createElement(Oe.a.Option,{key:a[s],value:a[s]},be[a[s]]));return x.a.createElement("div",{className:"nodes-actions",style:{width:140}},x.a.createElement(Oe.a,{dropdownMatchSelectWidth:!1,getPopupContainer:e=>e.parentNode,value:t.queryCommandValue("Template"),onChange:this.handleTemplateChange,disabled:o},i))}};var tt=class extends w.Component{constructor(){super(...arguments),this.onClick=(()=>{var e=this.props.minder;-1!==e.queryCommandState("resetlayout")&&e.execCommand("resetlayout")})}render(){var e=this.props.isLock;return x.a.createElement("div",{className:"nodes-actions",style:{width:72}},x.a.createElement(d.a,{type:"link",size:"small",className:"big-icon",disabled:e,onClick:this.onClick},x.a.createElement(u.a,{type:"layout",style:{fontSize:"1.6em"}}),x.a.createElement("br",null),"整理布局"))}};var nt=class extends w.Component{constructor(){super(...arguments),this.onClick=(e=>{var t=this.props.minder;-1!==t.queryCommandState(e)&&t.execCommand(e)})}render(){var e=this.props,t=e.minder,n=e.isLock,r=0===t.getSelectedNodes().length;n&&(r=!0);var o={size:"small",type:"link",disabled:r};return x.a.createElement("div",{className:"nodes-actions",style:{width:164,display:"flex",alignItems:"center"}},x.a.createElement(d.a,s()({},o,{className:"big-icon",onClick:()=>this.onClick("ClearStyle")}),x.a.createElement(W,{type:"clear",style:{width:22,height:22},disabled:r}),x.a.createElement("br",null),"清除样式"),x.a.createElement("div",{style:{width:"50%"}},x.a.createElement(d.a,s()({},o,{onClick:()=>this.onClick("CopyStyle"),icon:"copy"}),"复制样式"),x.a.createElement("br",null),x.a.createElement(d.a,s()({},o,{onClick:()=>this.onClick("pastestyle")}),x.a.createElement(W,{type:"stylePaste",disabled:r}),"粘贴样式")))}};var rt=class extends w.Component{constructor(){super(...arguments),this.state={FontSize:this.props.minder.queryCommandValue("FontSize")},this.onChange=((e,t)=>{var n=this.props.minder;-1!==n.queryCommandState(e)&&(n.execCommand(e,t),this.setState({[e]:t}))})}componentWillReceiveProps(e){this.setState({FontSize:e.minder.queryCommandValue("FontSize")||""})}render(){var e=this.props,t=e.minder,n=e.isLock,r=this.state.FontSize,o=void 0===r?"":r,i=0===t.getSelectedNodes().length;n&&(i=!0);var a={size:"small",disabled:i};return x.a.createElement("div",{className:"nodes-actions",style:{width:128}},x.a.createElement("div",null,x.a.createElement(Oe.a,s()({},a,{value:o||"",onChange:e=>this.onChange("FontSize",e),dropdownMatchSelectWidth:!1,getPopupContainer:e=>e.parentNode}),x.a.createElement(Oe.a.Option,{value:""},"字号"),ye&&ye.map(e=>x.a.createElement(Oe.a.Option,{key:e,value:e},e)))),x.a.createElement("div",null,x.a.createElement(d.a,s()({icon:"bold",type:"link"},a,{onClick:()=>this.onChange("Bold","")})),x.a.createElement(d.a,s()({icon:"italic",type:"link"},a,{onClick:()=>this.onChange("Italic","")})),x.a.createElement(d.a,s()({icon:"strikethrough",type:"link"},a,{onClick:()=>this.onChange("del","")})),x.a.createElement(pe,s()({onChange:e=>this.onChange("ForeColor",e)},this.props,{button:m()({},a,{type:"link"}),icon:"font-colors",action:"ForeColor"})),x.a.createElement(pe,s()({onChange:e=>this.onChange("Background",e)},this.props,{button:m()({},a,{type:"link"}),icon:"bg-colors",action:"Background"}))))}},ot=e=>{var t=Object(w.useState)(0),n=te()(t,2),r=n[0],i=n[1],a=Object(w.useState)(null),s=te()(a,2),c=s[0],l=s[1],h=Object(w.useState)(""),f=te()(h,2),p=f[0],g=f[1],m=e.minder,v=e.isLock,y=()=>{var e=document.getElementsByClassName("kityminder-core-container")[0],t=e.className;t.indexOf("focus")<0&&(e.className=t+" focus")},b=e=>{var t=[];for(var n in e)t.push(x.a.createElement(Me.a.Item,{key:n},e[n]));return t},k=(e,t)=>{m.fire("hidenoterequest"),y(),e=e.toLowerCase();var n=[],o=["text","note","resource"];m.getRoot().traverse(t=>{var r=t.getData(),i=[];for(var a in r)-1!==o.indexOf(a)&&("string"!=typeof r[a]?i.push(...r[a]):i.push(r[a]+""));i.some(t=>t.toLowerCase().indexOf(e)>-1)&&n.push(t)});var a=r;void 0===t?(l(n),a=e===p&&(c||[]).length>0&&a<n.length-1?a+1:0):("prev"===t&&(a=a>0?a-1:n.length-1),"next"===t&&(a=a<n.length-1?a+1:0));var s=n.length>0?[n[a]]:[m.getRoot()];m.select(s,!0),s[0].isExpanded()||m.execCommand("expand",!0),i(a)},S=x.a.createElement(Me.a,{onClick:e=>{var t=e.key;m.execCommand("ExpandToLevel",Number(t))}},b(we)),C=x.a.createElement(Me.a,{onClick:e=>{var t=e.key,n=[],r=m.getSelectedNodes();switch(y(),t){case"all":m.getRoot().traverse(e=>{n.push(e)});break;case"revert":m.getRoot().traverse(e=>{-1===r.indexOf(e)&&n.push(e)});break;case"siblings":r.forEach(e=>{e.parent&&e.parent.children.forEach(function(e){-1===n.indexOf(e)&&n.push(e)})});break;case"level":var o=m.getSelectedNodes().map(e=>e.getLevel());m.getRoot().traverse(e=>{-1!==o.indexOf(e.getLevel())&&n.push(e)});break;case"path":r.forEach(function(e){for(;e&&-1===n.indexOf(e);)n.push(e),e=e.parent});break;default:m.getRoot().traverse(e=>{n.push(e)})}m.select(n,!0),m.fire("receiverfocus")}},b(xe));return x.a.createElement("div",{className:"nodes-actions",style:{width:"100%"}},x.a.createElement(Le.a,{disabled:v,overlay:S,getPopupContainer:e=>e.parentNode},x.a.createElement(d.a,{type:"link",size:"small",className:"big-icon"},x.a.createElement(u.a,{type:"arrows-alt",style:{fontSize:"1.6em"}}),x.a.createElement("br",null),"展开 ",x.a.createElement(u.a,{type:"caret-down"}))),x.a.createElement(Le.a,{overlay:C,getPopupContainer:e=>e.parentNode},x.a.createElement(d.a,{type:"link",size:"small",className:"big-icon"},x.a.createElement(W,{type:"selectedAll",style:{width:22,height:22}}),x.a.createElement("br",null),"全选 ",x.a.createElement(u.a,{type:"caret-down"}))),x.a.createElement(o.a.Search,{className:"search-input",placeholder:"搜索",onSearch:e=>k(e),style:{width:200,marginLeft:8,marginRight:8},value:p,onChange:e=>g(e.target.value),onFocus:()=>{window.search=!0},onBlur:()=>{window.search=!1}}),c&&x.a.createElement("div",{style:{display:"inline-block"}},x.a.createElement("span",null,"第"," ",c?0===c.length?0:r+1:0,"/",c.length," 条")," ",x.a.createElement(d.a.Group,{size:"small"},x.a.createElement(d.a,{onClick:()=>k(p,"prev")},x.a.createElement(u.a,{type:"up"})),x.a.createElement(d.a,{onClick:()=>k(p,"next")},x.a.createElement(u.a,{type:"down"})))))},it=window.HotBox,at=b.a.TabPane,st=2;O.a.setOptions({gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1});t.a=class extends w.Component{constructor(e){super(e),this.getAllData=(()=>this.minder.exportJson()),this.setEditerData=(e=>{this.minder.importJson(e),this.minder.fire("contentchange")}),this.initKeyBoardEvent=(()=>{setTimeout(()=>{document.addEventListener("keydown",this.handleKeyDown)},300)}),this.initOnEvent=(e=>{e.on("import",()=>{this.setState({loading:!1})});var t=this.props.readOnly;e.on("selectionchange",()=>{var n=e.getSelectedNode();if(!t){var r=this.state,o=r.selectedNode,i=r.showEdit,a=r.inputContent;i&&(o.getText()!==a&&(o.setText(a),this.minder.refresh(),this.minder.fire("contentchange")),this.setState({showEdit:!1,inputContent:null}),window.showEdit=!1)}this.hotbox.active(it.STATE_IDLE),this.setState({selectedNode:n,noteContent:null})}),t||e.on("dblclick",e=>{this.handleShowInput()}),e.on("mousedown",e=>{if(e.originEvent.button===st){e.preventDefault();var t=this.minder,n=this.inputNode;if(t.getSelectedNode()&&"readonly"!==t._status){var r=ze(t.getSelectedNode(),n,"positionOnly");setTimeout(()=>{this.hotbox.active("main",r)},200)}}this.setState({noteContent:null})}),e.on("viewchange",t=>{var n=this.state,r=n.showEdit,o=n.noteContent,i=e.getSelectedNode();r&&ze(i,this.inputNode),this.hotbox.active(it.STATE_IDLE),null!==o&&this.handleNotePreview()});var n=null;e.on("shownoterequest",e=>{n=setTimeout(()=>this.handleNotePreview(e),200)}),e.on("hidenoterequest",()=>{clearTimeout(n)}),e.on("contentchange",this.sendPatch)}),this.initHotbox=(e=>{var t=this.props,n=t.priority,r=void 0===n?[1,2,3]:n,o=t.progressShow,i=void 0!==o&&o,a=t.readOnly,s=void 0!==a&&a,c=e.getPaper().container.parentNode,u=new it(c),l=u.state("main");if(s||(l.button({position:"center",label:"编辑",key:"F2",enable:()=>!s,action:this.handleShowInput}),me.forEach(t=>{var n=t.split(":"),r=n.shift(),o=n.shift(),i=n.shift();l.button({position:"ring",label:r,key:o,enable:()=>!s,action:()=>{"AppendSiblingNode,AppendChildNode,AppendParentNode".indexOf(i)>-1?(e.execCommand(i,"分支主题"),setTimeout(this.handleShowInput,300)):e.execCommand(i)}})})),l.button({position:"top",label:"撤销",key:"Ctrl + Z",enable:()=>this.groupNode?this.groupNode.undo():!s,action:()=>{this.handleUndo()},next:"idle"}),l.button({position:"top",label:"重做",key:"Ctrl + Y",enable:()=>this.groupNode?this.groupNode.redo():!s,action:()=>{this.handleRedo()},next:"idle"}),!s){l.button({position:"top",label:"优先级",key:"P",next:"priorityBox",enable:()=>!s});var h=u.state("priorityBox");r.join("").replace(/./g,t=>{h.button({position:"ring",label:"P".concat(Number(t)-1),key:"".concat(Number(t)-1),action:()=>{e.execCommand("Priority",t)}})}),h.button({position:"top",label:"移除",key:"Del",action:()=>{e.execCommand("Priority",0)}}),h.button({position:"top",label:"返回",key:"esc",next:"back"})}if(i){l.button({position:"top",label:"结果",key:"G",next:"progress",enable:()=>i});var d=u.state("progress");"1459".replace(/./g,t=>{var n="失败";"4"===t&&(n="不执行"),"5"===t&&(n="阻塞"),"9"===t&&(n="通过"),d.button({position:"ring",label:n,key:n,action:()=>{e.execCommand("Progress",parseInt(t))}})}),d.button({position:"top",label:"移除",key:"Del",action:function(){e.execCommand("Progress",0)}}),d.button({position:"top",label:"返回",key:"esc",next:"back"})}this.hotbox=u}),this.handleUndoAck=(e=>{this.groupNode.undo(e)}),this.handleRedoAck=(e=>{this.groupNode.redo(e)}),this.handleKeyDown=(e=>{var t=e||window.event||this.arguments.callee.caller.arguments[0],n=window.event.metaKey||window.event.ctrlKey,r=document.getElementsByClassName("agiletc-modal").length>0,o=this.state,i=o.showEdit,a=o.selectedNode,s=o.inputContent,c=document.getElementsByClassName("agiletc-note-drawer").length>0,u=n&&82===window.event.keyCode;if(n&&83===window.event.keyCode&&this.props.onSave&&(t.preventDefault(),this.props.onSave(this.minder.exportJson())),n&&70===window.event.keyCode&&(t.preventDefault(),this.setState({activeTab:"3"})),!r&&!c&&!i&&t.preventDefault&&!u&&!window.search&&!window.tagInput){if(n&&65===window.event.keyCode){t.preventDefault();var l=[];this.minder.getRoot().traverse(e=>{l.push(e)}),this.minder.select(l,!0)}if(null!==this.state.selectedNode){if([13,9].indexOf(window.event.keyCode)>-1){var h=document.activeElement.parentNode.parentNode.className||"";13===window.event.keyCode&&h.indexOf("resource-input")<0&&(t.preventDefault(),this.minder.execCommand("AppendSiblingNode","分支主题"),setTimeout(this.handleShowInput,300)),9===window.event.keyCode&&(t.preventDefault(),this.minder.execCommand("AppendChildNode","分支主题"),setTimeout(this.handleShowInput,300))}8===window.event.keyCode&&(t.preventDefault(),this.minder.execCommand("RemoveNode"))}this.groupNode&&(n&&90===window.event.keyCode&&(t.preventDefault(),this.groupNode.undo()),n&&89===window.event.keyCode&&(t.preventDefault(),this.groupNode.redo()))}i&&(13!==window.event.keyCode||window.event.shiftKey||(t.preventDefault(),a.setText(s),this.minder.refresh(),this.minder.fire("contentchange"),this.setState({showEdit:!1,inputContent:null}),window.showEdit=!1))}),this.sendPatch=(e=>{if(this.groupNode&&window.minderData){this.groupNode.changed();var t=e.minder.exportJson();t.right=window.minderData.right||1;var n=this.groupNode.getAndResetPatch();if(1===n.length&&"/base"===n[0].path)return void(e.minder._status="normal");n.length>0&&"readonly"!==e.minder._status&&(this.ws.sendMessage("edit",{caseContent:JSON.stringify(t),patch:JSON.stringify(n),caseVersion:t.base}),this.base=e.minder.getBase(),this.expectedBase=this.base+1),e.minder._status="normal"}}),this.travere=(e=>{for(var t=[],n=0;n<e.length;n++)if(void 0===e[n].op)for(var r=0;r<e[n].length;r++)t.push(e[n][r]);else t.push(e[n]);return t}),this.handleShowInput=(()=>{var e=this.minder,t=this.inputNode;if(e.getSelectedNode()&&"readonly"!==e.getStatus()){var n=e.getSelectedNode();this.setState({showEdit:!0,inputContent:n.getText()},()=>{window.showEdit=!0,ze(n,t),document.getElementsByClassName("edit-input")[0].children[0].select()})}}),this.handleInputChange=(e=>{this.setState({inputContent:e.target.value})}),this.handleNotePreview=(e=>{e?this.setState({noteContent:e.node.getData("note")?O()(e.node.getData("note")):"",noteNode:e},()=>{!function(e,t){var n=e.getRenderer("NoteIconRenderer").getRenderShape().getRenderBox("screen"),r=t,o=document.getElementsByClassName("kityminder-core-container"),i=document.getElementsByClassName("kityminder-editor-container");r.scrollTop=0;var a=n.left-(document.documentElement.clientWidth-o[0].clientWidth),s=n.bottom+8-i[0].getBoundingClientRect().top;r.style.left=Math.round(a)+"px",r.style.top=Math.round(s)+"px"}(e.node,this.previewNode)}):this.setState({noteContent:null})}),this.handleWsClose=(e=>{void 0===this.modal&&(this.modal=y.a.warning({title:"Websocket通信已断开，请手动刷新页面。",className:"agiletc-modal ws-warning",getContainer:()=>document.getElementsByClassName("kityminder-core-container")[0],okText:"知道了，立即刷新",onOk:()=>{this.modal=void 0,location.reload()}}))}),this.largeJsonImport=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,r=[],o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};0!==n?t&&t.children.length>0&&t.children.forEach(t=>e(t,n-1,r)):r(t)};return new Promise(i=>{var a=0;o(t.root,3,e=>{a++,e.children&&e.children.length>0&&(r[a]=JSON.parse(JSON.stringify(e)),r[a].expandState="collapse",e.children=[])}),a=0;var s=[],c=t=>{for(;(t.timeRemaining()>0||t.didTimeout)&&s.length>0;)for(var r=n;r--&&s.length;)s.shift()();e.refresh(0),s.length>0?requestIdleCallback(c):i()},u=()=>{o(e._root,3,t=>{s.push(()=>{var n=r[++a];void 0!==n&&e.importNode(t,n)})}),requestIdleCallback(c),e.refresh(0),e.off("import",u)};e.on("import",u)})},this.heartCheck={timeout:1e4,timeoutObj:null,serverTimeoutObj:null,reset:function(){return clearInterval(this.timeoutObj),clearInterval(this.serverTimeoutObj),this},start:function(e){var t=this;this.timeoutObj=setTimeout(function(){e.sendMessage("0ping ping ping"),t.serverTimeoutObj=setTimeout(function(){e.state.ws.close(),e.state.ws.onclose()},t.timeout)},this.timeout)}},this.handleWsOpen=(()=>{window.ws=this.ws}),this.handleLock=(e=>{switch(e){case"0":this.minder.setStatus("readonly"),this.setState({isLock:!0},()=>{document.removeEventListener("keydown",this.handleKeyDown)}),v.a.warning({message:"用例被锁住，当前只读"});break;case"1":this.minder.setStatus("normal",!0),this.setState({isLock:!1},()=>{this.initOnEvent(this.minder),document.addEventListener("keydown",this.handleKeyDown)}),v.a.warning({message:"用例被解锁，请刷新重试"});break;case"2":v.a.success({message:"加/解锁成功"}),this.setState({locked:!this.state.locked});break;case"3":v.a.error({message:"加/解锁失败"})}}),this.handleWsUserStat=(e=>{this.setState({nowUseList:(null===e||void 0===e?void 0:e.split(","))||[]})}),this.handleWsData=(e=>{var t;if("HTTP_ACCESS_ERROR"!==e)if("websocket on error"!==e)if("当前用户"!=e.substring(0,4))try{var n=JSON.parse(e||"{}");if(void 0===n.root){var r,o;this.minder.setStatus("readonly");var i=this.travere(n),a=null===(r=i.filter(e=>"/base"===e.path)[0])||void 0===r?void 0:r.value,s=null===(o=i.filter(e=>"/base"===e.path)[0])||void 0===o?void 0:o.fromValue;this.minder.applyPatches(i),1!==i.length?void 0!=s&&s==a+1?this.expectedBase!=a+1?alert("通知报文回复的version错误，需要刷新. Exp:".concat(this.expectedBase,",Act:").concat(a)):this.expectedBase=a:this.expectedBase!=a-1?alert("通知报文回复的version错误，需要刷新. Exp:".concat(this.expectedBase,",Act:").concat(a)):this.expectedBase=a:this.expectedBase!=a&&alert("应答报文回复的version错误，需要刷新. Exp:".concat(this.expectedBase,",Act:").concat(a))}else{var c=m()({},n);if(e===JSON.stringify(this.minder.exportJson()))return;window.minderData=void 0,this.minder.importJson(c),window.minderData=c,this.expectedBase=this.minder.getBase()}}catch(e){alert("连接异常，请刷新重试")}else this.setState({nowUseList:(null===(t=e.split("用户是:")[1])||void 0===t?void 0:t.split(","))||[]});else this.ws.state.ws.onclose();else v.a.warning({message:"服务端实例退出，请刷新页面。"})}),this.onButtonSave=(()=>{this.ws.sendMessage("save",{caseContent:JSON.stringify(this.minder.exportJson()),patch:"",caseVersion:""})}),this.onButtonClear=(()=>{window.confirm("是否确认清除执行记录？")&&(this.ws.sendMessage("save",{caseContent:JSON.stringify(this.minder.exportJson()),patch:"",caseVersion:""}),this.ws.sendMessage("record_clear",{caseContent:"",patch:"",caseVersion:""}))}),this.state={minder:null,selectedNode:null,noteNode:null,noteContent:null,showEdit:!1,inputContent:null,activeTab:"1",showToolBar:"compare"!==this.props.type,fullScreen:!1,loading:!0,isLock:this.props.isLock||!1,locked:!1,popoverVisible:!1,nowUseList:[]},this.base=-1,this.expectedBase=-1,setTimeout(()=>{this.minder&&(this.setState({minder:this.minder}),We.init(this.minder,this.props.readOnly))},100),this.navNode=Object(w.createRef)()}componentDidMount(){setTimeout(()=>{this.props.readOnly||(this.arguments=arguments,this.initKeyBoardEvent(arguments))},1e3),this.initData=ge}componentWillUnmount(){window.minderData=void 0,document.removeEventListener("keydown",this.handleKeyDown),We.removeListener()}getColorByName(e){for(var t=0,n=0;t<e.length;n=e.charCodeAt(t++)+((n<<5)-n));var r=Math.floor(Math.abs(1e4*Math.sin(n)%1*16777216)).toString(16);return"#"+Array(6-r.length+1).join("0")+r+"bf"}render(){var e=this.state,t=e.minder,n=e.noteContent,a=e.showEdit,g=e.inputContent,v=e.noteNode,y=e.activeTab,w=e.showToolBar,k=e.fullScreen,S=e.loading,_=e.isLock,O=e.locked,N=e.popoverVisible,A=e.nowUseList,T=this.props,D=T.progressShow,L=void 0===D||D,M=T.readOnly,P=void 0!==M&&M,I=T.editorStyle,B=void 0===I?{}:I,z=T.tags,V=T.wsUrl,H=void 0===V?"":V,F=T.wsParam,q=T.callback,G=T.iscore,U=T.type,Z=m()({},this.props,{minder:t,isLock:_});return x.a.createElement(r.a,{locale:E.a},x.a.createElement("div",{className:"kityminder-editor-container".concat(k?" full-screen":""),style:B},t&&"compare"!==U&&x.a.createElement(C,{url:H,wsParam:F,onOpen:this.handleWsOpen,onMessage:this.handleWsData,onClose:this.handleWsClose,wsMinder:this.minder,handleLock:this.handleLock,handleUndoAck:this.handleUndoAck,handleRedoAck:this.handleRedoAck,handleWsUserStat:this.handleWsUserStat,ref:e=>{this.ws=e,window.ws=e}}),t&&x.a.createElement(b.a,{activeKey:y,className:"kityminder-tools-tab".concat(w?"":" collapsed"),tabBarExtraContent:[x.a.createElement(l.a,{key:"list",placement:"bottomRight",content:x.a.createElement(f.a,{grid:{gutter:30,column:A.length>=4?4:1},itemLayout:"horizontal",dataSource:A||[],renderItem:e=>x.a.createElement(f.a.Item,null,x.a.createElement(f.a.Item.Meta,{avatar:x.a.createElement(p.a,{style:{backgroundColor:this.getColorByName(e)}},e.substr(0,1)),title:x.a.createElement("div",{style:{lineHeight:"32px"}},e)}))}),trigger:"click",visible:N,onVisibleChange:e=>this.setState({popoverVisible:e})},x.a.createElement(h.a,{title:"当前在线列表"},x.a.createElement(d.a,{type:"primary",style:{marginRight:15},onClick:()=>this.setState({popoverVisible:!N})},A?A.length:1,"人在线"))),x.a.createElement(h.a,{key:"lock",title:_||O?"用例被锁住，当前只读，点击开关解锁。":"用例未上锁，点击开关锁住。",getPopupContainer:e=>e.parentNode},"compare"!==U&&x.a.createElement(c.a,{size:"small",checkedChildren:x.a.createElement(u.a,{type:"lock"}),unCheckedChildren:x.a.createElement(u.a,{type:"unlock"}),checked:_||O,onClick:e=>{this.ws.sendMessage("lock",{message:e?"lock":"unlock"})},className:"agiletc-lock"})),x.a.createElement(d.a,{key:"full",type:"link",icon:"fullscreen".concat(k?"-exit":""),onClick:()=>{this.setState({fullScreen:!k}),q&&q({fullScreen:!k})}},k?"退出全屏":"全屏"),x.a.createElement(d.a,{key:"show",type:"link",onClick:()=>this.setState({showToolBar:!w})},x.a.createElement(u.a,{type:"double-left",rotate:w?90:-90})," ",w?"收起":"展开")],onChange:e=>{this.setState({activeTab:e})}},"compare"!==U&&x.a.createElement(at,{tab:"思路",key:"1"},x.a.createElement("div",{className:"toolbar has-right-border"},x.a.createElement(j,s()({ref:e=>this.groupNode=e,initData:this.initData},Z,{wsInstance:this.ws})),!P&&x.a.createElement(Te,s()({initData:this.initData},Z,{callback:()=>{setTimeout(this.handleShowInput,300)}})),!P&&x.a.createElement(R,Z),!P&&x.a.createElement(De,s()({},Z,{handleShowInput:this.handleShowInput})),x.a.createElement(Pe,Z),!P&&x.a.createElement(je,Z),L&&x.a.createElement(Re,Z),!P&&z&&x.a.createElement(Ke,Z))),x.a.createElement(at,{tab:"外观",key:"compare"!==U?"2":"1"},x.a.createElement("div",{className:"toolbar has-right-border"},x.a.createElement($e,Z),x.a.createElement(et,Z),"compare"!==U&&x.a.createElement(x.a.Fragment,null,x.a.createElement(tt,Z),x.a.createElement(nt,Z),x.a.createElement(rt,Z)))),"compare"!==U&&x.a.createElement(at,{tab:"视图",key:"3"},x.a.createElement("div",{className:"toolbar has-right-border"},x.a.createElement(ot,Z)))),x.a.createElement("div",{className:"kityminder-core-container",ref:e=>{this.minder||(this.minder=new window.kityminder.Minder({renderTo:e}),this.centerNode=e,this.initOnEvent(this.minder),this.initHotbox(this.minder))},style:{height:"calc(100% - 45px - ".concat(w?"80px":"0px",")")}},S&&x.a.createElement(i.a,{className:"agiletc-loader"})),x.a.createElement(Se,s()({ref:this.navNode},Z)),this.minder&&n&&x.a.createElement("div",{ref:e=>this.previewNode=e,className:"note-previewer".concat(n?"":" hide"),dangerouslySetInnerHTML:{__html:n},onMouseEnter:()=>this.minder.fire("shownoterequest",v)}),this.minder&&x.a.createElement("div",{className:"edit-input".concat(a?"":" hide"),ref:e=>this.inputNode=e},x.a.createElement(o.a.TextArea,{rows:1,value:g||"",onChange:this.handleInputChange,onBlur:()=>{t.refresh(),t.fire("contentchange")},style:{minWidth:300},autoFocus:!0,autoSize:!0}))),x.a.createElement("div",{style:{display:"inline-block",position:"fixed",bottom:"30px",right:"20px",zIndex:999}},2!=G&&x.a.createElement(d.a,{type:"primary",onClick:this.onButtonSave},"保存"),x.a.createElement("span",null,"    "),3==G&&x.a.createElement(d.a,{type:"primary",onClick:this.onButtonClear},"清除执行记录")))}}},Sxd8:function(e,t,n){var r=n("ZCgT");e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},TIWq:function(e,t,n){e.exports={"km-node-command-menu":"km-node-command-menu","insert-node":"insert-node","ant-btn":"ant-btn",anticon:"anticon","nodes-actions":"nodes-actions","ant-btn-link":"ant-btn-link"}},TO8r:function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},U6JX:function(e,t,n){"use strict";t.a=function(e,t){return function(n){return e(t(n))}}},"UNi/":function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},UXvI:function(e,t,n){"use strict";var r=n("hbEN"),o=n("IzLi"),i="Expected a function";t.a=function(e,t,n){var a=!0,s=!0;if("function"!=typeof e)throw new TypeError(i);return Object(o.a)(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),Object(r.a)(e,t,{leading:a,maxWait:t,trailing:s})}},UfWW:function(e,t,n){var r=n("KwMD"),o=n("ut/Y"),i=n("Sxd8"),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var c=null==n?0:i(n);return c<0&&(c=a(s+c,0)),r(e,o(t,3),c)}},V6Ve:function(e,t,n){var r=n("kekF")(Object.keys,Object);e.exports=r},VOtZ:function(e,t,n){var r=n("juv8"),o=n("MvSz");e.exports=function(e,t){return r(e,o(e),t)}},VaNO:function(e,t){e.exports=function(e){return this.__data__.has(e)}},WFqU:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n("yLpj"))},WOAq:function(e,t,n){"use strict";(function(e){var r=n("Ju5/"),o=n("L3Qv"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.a.Buffer:void 0,c=(s?s.isBuffer:void 0)||o.a;t.a=c}).call(this,n("3UD+")(e))},WwFo:function(e,t,n){var r=n("juv8"),o=n("7GkX");e.exports=function(e,t){return e&&r(t,o(t),e)}},XYm9:function(e,t,n){var r=n("+K+b");e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},XZxo:function(e,t,n){var r={"./zh-cn":"XDpg","./zh-cn.js":"XDpg"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="XZxo"},Xi7e:function(e,t,n){var r=n("KMkd"),o=n("adU4"),i=n("tMB7"),a=n("+6XX"),s=n("Z8oC");function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},XqMk:function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n("yLpj"))},"Xt/L":function(e,t){e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},Y7yP:function(e,t,n){"use strict";var r,o=n("vJtL"),i=n("Ju5/").a["__core-js_shared__"],a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";var s=function(e){return!!a&&a in e},c=n("IzLi"),u=n("dLWn"),l=/^\[object .+?Constructor\]$/,h=Function.prototype,d=Object.prototype,f=h.toString,p=d.hasOwnProperty,g=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var m=function(e){return!(!Object(c.a)(e)||s(e))&&(Object(o.a)(e)?g:l).test(Object(u.a)(e))};var v=function(e,t){return null==e?void 0:e[t]};t.a=function(e,t){var n=v(e,t);return m(n)?n:void 0}},YESw:function(e,t,n){var r=n("Cwc5")(Object,"create");e.exports=r},YHEm:function(e,t,n){"use strict";t.a=function(e,t){return e===t||e!=e&&t!=t}},YO3V:function(e,t,n){var r=n("NykK"),o=n("LcsW"),i=n("ExA7"),a="[object Object]",s=Function.prototype,c=Object.prototype,u=s.toString,l=c.hasOwnProperty,h=u.call(Object);e.exports=function(e){if(!i(e)||r(e)!=a)return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==h}},Z0cm:function(e,t){var n=Array.isArray;e.exports=n},Z8oC:function(e,t,n){var r=n("y1pI");e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},ZCgT:function(e,t,n){var r=n("tLB3"),o=1/0,i=1.7976931348623157e308;e.exports=function(e){return e?(e=r(e))===o||e===-o?(e<0?-1:1)*i:e==e?e:0:0===e?e:0}},ZCpW:function(e,t,n){var r=n("lm/5"),o=n("O7RO"),i=n("IOzZ");e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},ZWtO:function(e,t,n){var r=n("4uTw"),o=n("9Nap");e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},aZkK:function(e,t,n){"use strict";var r=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}();t.a=r},adU4:function(e,t,n){var r=n("y1pI"),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},"b+SP":function(e,t,n){"use strict";n.r(t);n("T2oS");var r=n("W9HT"),o=(n("+BJd"),n("mr32")),i=(n("IzEo"),n("bx4M")),a=(n("miYZ"),n("tsqr")),s=n("q1tI"),c=n.n(s),u=n("wd/R"),l=n.n(u),h=n("on7z"),d=n("FG+t"),f=n("Sof7");n("8Dty");l.a.locale("zh-cn");t.default=class extends c.a.Component{constructor(e){super(e),this.state={loading:!1,info:[]}}componentDidMount(){this.setState({loading:!0}),Object(h.a)("/backup/getCaseDiff",{method:"GET",params:{caseId1:this.props.match.params.caseId1,caseId2:this.props.match.params.caseId2}}).then(e=>{this.setState({loading:!1}),200===e.code?(this.editorNode.setEditerData(e.data.content.root),this.setState({info:e.data.backupinfo})):a.a.error(e.msg)})}render(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,null),c.a.createElement(r.a,{tip:"Loading...",spinning:this.state.loading},c.a.createElement("div",{className:"historyBox"},c.a.createElement("div",{className:"box_title"},c.a.createElement(i.a,{bordered:!1,title:"版本比较",className:"title_history"},c.a.createElement("div",{style:{display:"flex"}},this.state.info&&this.state.info.map((e,t)=>c.a.createElement(i.a,{style:{marginRight:20},key:t},c.a.createElement("span",null,"创建人: ",e.user,c.a.createElement("br",null),"创建时间:"," ",l()(e.time).format("YYYY-MM-DD HH:mm:ss")))))),c.a.createElement(i.a,{bordered:!1,title:"颜色标识",className:"title_color"},c.a.createElement(o.a,{color:"#ddfade"},"该节点被添加"),c.a.createElement(o.a,{color:"#ffe7e7"},"该节点被删除"),c.a.createElement(o.a,{color:"#d6f0ff"},"内容已变更"))),c.a.createElement(f.a,{ref:e=>this.editorNode=e,tags:["前置条件","执行步骤","预期结果"],progressShow:!0,readOnly:!0,mediaShow:!0,editorStyle:{height:"calc(100vh - 240px)"},toolbar:{image:!0,theme:["classic-compact","fresh-blue","fresh-green-compat"],template:["default","right","fish-bone"],noteTemplate:"# test"},uploadUrl:"/api/file/uploadAttachment",type:"compare"}))))}}},b2z7:function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},b80T:function(e,t,n){var r=n("UNi/"),o=n("03A+"),i=n("Z0cm"),a=n("DSRE"),s=n("wJg7"),c=n("c6wG"),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&o(e),h=!n&&!l&&a(e),d=!n&&!l&&!h&&c(e),f=n||l||h||d,p=f?r(e.length,String):[],g=p.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||p.push(m);return p}},c6wG:function(e,t,n){var r=n("dD9F"),o=n("sEf8"),i=n("mdPL"),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},cSlR:function(e,t,n){"use strict";var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.a=function(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&o.test(e))&&e>-1&&e%1==0&&e<t}},"cq/+":function(e,t,n){var r=n("mc0g")();e.exports=r},dD9F:function(e,t,n){var r=n("NykK"),o=n("shjB"),i=n("ExA7"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},dLWn:function(e,t,n){"use strict";var r=Function.prototype.toString;t.a=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},dQpi:function(e,t,n){var r=n("yGk4"),o=n("vN+2"),i=n("rEGp"),a=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=a},dTAl:function(e,t,n){var r=n("GoyQ"),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},dt0z:function(e,t,n){var r=n("zoYe");e.exports=function(e){return null==e?"":r(e)}},e4Nc:function(e,t,n){var r=n("fGT3"),o=n("k+1r"),i=n("JHgL"),a=n("pSRY"),s=n("H8j4");function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,e.exports=c},e5cp:function(e,t,n){var r=n("fmRc"),o=n("or5M"),i=n("HDyB"),a=n("seXi"),s=n("QqLw"),c=n("Z0cm"),u=n("DSRE"),l=n("c6wG"),h=1,d="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,v,y){var b=c(e),w=c(t),x=b?f:s(e),k=w?f:s(t),S=(x=x==d?p:x)==p,C=(k=k==d?p:k)==p,E=x==k;if(E&&u(e)){if(!u(t))return!1;b=!0,S=!1}if(E&&!S)return y||(y=new r),b||l(e)?o(e,t,n,m,v,y):i(e,t,x,n,m,v,y);if(!(n&h)){var _=S&&g.call(e,"__wrapped__"),O=C&&g.call(t,"__wrapped__");if(_||O){var N=_?e.value():e,A=O?t.value():t;return y||(y=new r),v(N,A,n,m,y)}}return!!E&&(y||(y=new r),a(e,t,n,m,v,y))}},eUgh:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},ebwN:function(e,t,n){var r=n("Cwc5")(n("Kz5y"),"Map");e.exports=r},ekgI:function(e,t,n){var r=n("YESw"),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},fGT3:function(e,t,n){var r=n("4kuk"),o=n("Xi7e"),i=n("ebwN");e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},"fR/l":function(e,t,n){var r=n("CH3K"),o=n("Z0cm");e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},fmRc:function(e,t,n){var r=n("Xi7e"),o=n("77Zs"),i=n("L8xA"),a=n("gCq4"),s=n("VaNO"),c=n("0Cz8");function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},ftKO:function(e,t){var n="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,n),this}},gCq4:function(e,t){e.exports=function(e){return this.__data__.get(e)}},gFfm:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},h7JS:function(e,t,n){e.exports={"kityminder-editor-container":"kityminder-editor-container","full-screen":"full-screen","kityminder-core-container":"kityminder-core-container","toolbar-group":"toolbar-group","km-btn-item":"km-btn-item",toolbar:"toolbar","has-right-border":"has-right-border","nodes-actions":"nodes-actions","kityminder-tools-tab":"kityminder-tools-tab","ant-tabs-content":"ant-tabs-content",collapsed:"collapsed","ant-btn-link":"ant-btn-link","priority-btn":"priority-btn","ant-tabs":"ant-tabs","ant-tabs-bar":"ant-tabs-bar","ant-tabs-tabpane":"ant-tabs-tabpane","ant-tabs-tabpane-active":"ant-tabs-tabpane-active","for-container":"for-container","for-editor":"for-editor","note-previewer":"note-previewer","edit-input":"edit-input",hide:"hide","ant-checkbox-wrapper":"ant-checkbox-wrapper","color-wrapper":"color-wrapper","resource-tag":"resource-tag","ant-tag-has-color":"ant-tag-has-color","anticon-close":"anticon-close",disabled:"disabled","nav-bar":"nav-bar","zoom-text":"zoom-text","nav-previewer":"nav-previewer","nav-previewer-pointer":"nav-previewer-pointer","agiletc-loader":"agiletc-loader","agiletc-lock":"agiletc-lock","ant-switch":"ant-switch","ant-switch-checked":"ant-switch-checked"}},hbEN:function(e,t,n){"use strict";var r=n("IzLi"),o=n("Ju5/"),i=function(){return o.a.Date.now()},a=/\s/;var s=function(e){for(var t=e.length;t--&&a.test(e.charAt(t)););return t},c=/^\s+/;var u=function(e){return e?e.slice(0,s(e)+1).replace(c,""):e},l=n("G8aS"),h=NaN,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,p=/^0o[0-7]+$/i,g=parseInt;var m=function(e){if("number"==typeof e)return e;if(Object(l.a)(e))return h;if(Object(r.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(r.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=u(e);var n=f.test(e);return n||p.test(e)?g(e.slice(2),n?2:8):d.test(e)?h:+e},v="Expected a function",y=Math.max,b=Math.min;t.a=function(e,t,n){var o,a,s,c,u,l,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new TypeError(v);function g(t){var n=o,r=a;return o=a=void 0,h=t,c=e.apply(r,n)}function w(e){var n=e-l;return void 0===l||n>=t||n<0||f&&e-h>=s}function x(){var e=i();if(w(e))return k(e);u=setTimeout(x,function(e){var n=t-(e-l);return f?b(n,s-(e-h)):n}(e))}function k(e){return u=void 0,p&&o?g(e):(o=a=void 0,c)}function S(){var e=i(),n=w(e);if(o=arguments,a=this,l=e,n){if(void 0===u)return function(e){return h=e,u=setTimeout(x,t),d?g(e):c}(l);if(f)return clearTimeout(u),u=setTimeout(x,t),g(l)}return void 0===u&&(u=setTimeout(x,t)),c}return t=m(t)||0,Object(r.a)(n)&&(d=!!n.leading,s=(f="maxWait"in n)?y(m(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),S.cancel=function(){void 0!==u&&clearTimeout(u),h=0,o=l=a=u=void 0},S.flush=function(){return void 0===u?c:k(i())},S}},hgQt:function(e,t,n){var r=n("Juji"),o=n("4sDh");e.exports=function(e,t){return null!=e&&o(e,t,r)}},hypo:function(e,t,n){var r=n("O0oS");e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},i2du:function(e,t){t.getCookie=function(e){for(var t,n,r=e+"=",o=r.length,i=document.cookie.length,a=0,s=0;a<i;){if(s=a+o,document.cookie.substring(a,s)===r)return t=s,n=void 0,-1===(n=document.cookie.indexOf(";",t))&&(n=document.cookie.length),decodeURI(document.cookie.substring(t,n));if(0===(a=document.cookie.indexOf(" ",a)+1))break}return null}},jXQH:function(e,t,n){var r=n("TO8r"),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},"jbM+":function(e,t,n){var r=n("R/W3");e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},juv8:function(e,t,n){var r=n("MrPd"),o=n("hypo");e.exports=function(e,t,n,i){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=i?i(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),a?o(n,u,l):r(n,u,l)}return n}},"k+1r":function(e,t,n){var r=n("QkVE");e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},kekF:function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},l9OW:function(e,t,n){var r=n("SKAX"),o=n("MMmD");e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,function(e,r,o){i[++n]=t(e,r,o)}),i}},lQqw:function(e,t,n){var r=n("MMmD");e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&!1!==o(s[a],a,s););return n}}},lSCD:function(e,t,n){var r=n("NykK"),o=n("GoyQ"),i="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=r(e);return t==a||t==s||t==i||t==c}},ljhN:function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},"lm/5":function(e,t,n){var r=n("fmRc"),o=n("wF/u"),i=1,a=2;e.exports=function(e,t,n,s){var c=n.length,u=c,l=!s;if(null==e)return!u;for(e=Object(e);c--;){var h=n[c];if(l&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++c<u;){var d=(h=n[c])[0],f=e[d],p=h[1];if(l&&h[2]){if(void 0===f&&!(d in e))return!1}else{var g=new r;if(s)var m=s(f,p,d,e,t,g);if(!(void 0===m?o(p,f,i|a,s,g):m))return!1}}return!0}},lvO4:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&n.call(e,t)}},mTTR:function(e,t,n){var r=n("b80T"),o=n("QcOe"),i=n("MMmD");e.exports=function(e){return i(e)?r(e,!0):o(e)}},mc0g:function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}},mdPL:function(e,t,n){(function(e){var r=n("WFqU"),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,n("YuTi")(e))},mkut:function(e,t,n){"use strict";var r=n("7gMY"),o=n("pyRK"),i=n("U6JX"),a=Object(i.a)(Object.keys,Object),s=Object.prototype.hasOwnProperty;var c=function(e){if(!Object(o.a)(e))return a(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t},u=n("5WsY");t.a=function(e){return Object(u.a)(e)?Object(r.a)(e):c(e)}},mwIZ:function(e,t,n){var r=n("ZWtO");e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},nLtN:function(e,t,n){"use strict";var r=function(){this.__data__=[],this.size=0},o=n("YHEm");var i=function(e,t){for(var n=e.length;n--;)if(Object(o.a)(e[n][0],t))return n;return-1},a=Array.prototype.splice;var s=function(e){var t=this.__data__,n=i(t,e);return!(n<0||(n==t.length-1?t.pop():a.call(t,n,1),--this.size,0))};var c=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]};var u=function(e){return i(this.__data__,e)>-1};var l=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype.delete=s,h.prototype.get=c,h.prototype.has=u,h.prototype.set=l;t.a=h},nmnc:function(e,t,n){var r=n("Kz5y").Symbol;e.exports=r},"oCl/":function(e,t,n){var r=n("CH3K"),o=n("LcsW"),i=n("MvSz"),a=n("0ycA"),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:a;e.exports=s},oSzE:function(e,t,n){"use strict";var r=n("nLtN");var o=function(){this.__data__=new r.a,this.size=0};var i=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var a=function(e){return this.__data__.get(e)};var s=function(e){return this.__data__.has(e)},c=n("3cmB"),u=n("DlmY"),l=200;var h=function(e,t){var n=this.__data__;if(n instanceof r.a){var o=n.__data__;if(!c.a||o.length<l-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new u.a(o)}return n.set(e,t),this.size=n.size,this};function d(e){var t=this.__data__=new r.a(e);this.size=t.size}d.prototype.clear=o,d.prototype.delete=i,d.prototype.get=a,d.prototype.has=s,d.prototype.set=h;t.a=d},oYcn:function(e,t,n){"use strict";var r=n("8M4i"),o=n("Js68"),i=n("EUcb"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=function(e){return Object(i.a)(e)&&Object(o.a)(e.length)&&!!a[Object(r.a)(e)]};var c=function(e){return function(t){return e(t)}},u=n("xutz"),l=u.a&&u.a.isTypedArray,h=l?c(l):s;t.a=h},oaNE:function(e,t,n){"use strict";var r=n("oSzE"),o=n("Y7yP"),i=function(){try{var e=Object(o.a)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var a=function(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},s=n("YHEm");var c=function(e,t,n){(void 0===n||Object(s.a)(e[t],n))&&(void 0!==n||t in e)||a(e,t,n)},u=n("aZkK"),l=n("3/ER"),h=n("Ce4a");var d=function(e){var t=new e.constructor(e.byteLength);return new h.a(t).set(new h.a(e)),t};var f=function(e,t){var n=t?d(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var p=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},g=n("IzLi"),m=Object.create,v=function(){function e(){}return function(t){if(!Object(g.a)(t))return{};if(m)return m(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),y=n("U6JX"),b=Object(y.a)(Object.getPrototypeOf,Object),w=n("pyRK");var x=function(e){return"function"!=typeof e.constructor||Object(w.a)(e)?{}:v(b(e))},k=n("9f76"),S=n("/1FC"),C=n("5WsY"),E=n("EUcb");var _=function(e){return Object(E.a)(e)&&Object(C.a)(e)},O=n("WOAq"),N=n("vJtL"),A=n("8M4i"),T="[object Object]",j=Function.prototype,R=Object.prototype,D=j.toString,L=R.hasOwnProperty,M=D.call(Object);var P=function(e){if(!Object(E.a)(e)||Object(A.a)(e)!=T)return!1;var t=b(e);if(null===t)return!0;var n=L.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&D.call(n)==M},I=n("oYcn");var B=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},z=Object.prototype.hasOwnProperty;var V=function(e,t,n){var r=e[t];z.call(e,t)&&Object(s.a)(r,n)&&(void 0!==n||t in e)||a(e,t,n)};var H=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,s=t.length;++i<s;){var c=t[i],u=r?r(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),o?a(n,c,u):V(n,c,u)}return n},F=n("7gMY");var q=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},G=Object.prototype.hasOwnProperty;var U=function(e){if(!Object(g.a)(e))return q(e);var t=Object(w.a)(e),n=[];for(var r in e)("constructor"!=r||!t&&G.call(e,r))&&n.push(r);return n};var Z=function(e){return Object(C.a)(e)?Object(F.a)(e,!0):U(e)};var J=function(e){return H(e,Z(e))};var Y=function(e,t,n,r,o,i,a){var s=B(e,n),u=B(t,n),h=a.get(u);if(h)c(e,n,h);else{var d=i?i(s,u,n+"",e,t,a):void 0,m=void 0===d;if(m){var v=Object(S.a)(u),y=!v&&Object(O.a)(u),b=!v&&!y&&Object(I.a)(u);d=u,v||y||b?Object(S.a)(s)?d=s:_(s)?d=p(s):y?(m=!1,d=Object(l.a)(u,!0)):b?(m=!1,d=f(u,!0)):d=[]:P(u)||Object(k.a)(u)?(d=s,Object(k.a)(s)?d=J(s):Object(g.a)(s)&&!Object(N.a)(s)||(d=x(u))):m=!1}m&&(a.set(u,d),o(d,u,r,i,a),a.delete(u)),c(e,n,d)}};var W=function e(t,n,o,i,a){t!==n&&Object(u.a)(n,function(s,u){if(a||(a=new r.a),Object(g.a)(s))Y(t,n,u,o,e,i,a);else{var l=i?i(B(t,u),s,u+"",t,n,a):void 0;void 0===l&&(l=s),c(t,u,l)}},Z)},Q=n("+Xah");var X=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},K=Math.max;var $=function(e,t,n){return t=K(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=K(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),X(e,this,s)}};var ee=function(e){return function(){return e}},te=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:ee(t),writable:!0})}:Q.a,ne=800,re=16,oe=Date.now;var ie=function(e){var t=0,n=0;return function(){var r=oe(),o=re-(r-n);if(n=r,o>0){if(++t>=ne)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(te);var ae=function(e,t){return ie($(e,t,Q.a),e+"")},se=n("cSlR");var ce=function(e,t,n){if(!Object(g.a)(n))return!1;var r=typeof t;return!!("number"==r?Object(C.a)(n)&&Object(se.a)(t,n.length):"string"==r&&t in n)&&Object(s.a)(n[t],e)};var ue=function(e){return ae(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&ce(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}(function(e,t,n){W(e,t,n)});t.a=ue},on7z:function(e,t,n){"use strict";n.d(t,"a",function(){return u});n("/xke");var r=n("TeRw"),o=n("p0pE"),i=n.n(o),a=n("vDqi"),s=n.n(a);window.apiPrefix="/api",s.a.defaults.timeout=3e5,s.a.defaults.withCredentials=!0;var c={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"};function u(e,t){var n={};if(n.method=void 0!==t?t.method:"get",t&&(t.body&&(n.data="string"==typeof t.body?JSON.parse(t.body):t.body),void 0!==t.params)){for(var o in e+="?",t.params)void 0!==t.params[o]&&""!==t.params[o]&&(e=e+o+"="+t.params[o]+"&");e=e.substring(0,e.length-1)}return s()(i()({url:e},n)).then(e=>{if(401===e.data.code||401===e.code){var t="".concat(e.data.data.login_url,"?app_id=").concat(e.data.data.app_id),n=encodeURIComponent(window.location.href),r="".concat(t,"&version=1.0&jumpto=").concat(n);return window.location.href=r,Promise.reject(new Error("服务不可用，请联系管理员"))}if(99993===e.data.code||99993===e.code){return window.location.href="/login",Promise.reject(new Error("服务不可用，请联系管理员"))}return i()({},e.data)}).catch(e=>{if(e.response){var t=e.response.status,n=c[t]||e.response.statusText;return r.a.error({message:"请求错误 ".concat(t),description:n}),{code:t,message:n}}})}s.a.interceptors.request.use(e=>(e.baseURL=window.apiPrefix,e),e=>Promise.reject(e)),s.a.interceptors.response.use(e=>e,e=>Promise.reject(e))},or5M:function(e,t,n){var r=n("1hJj"),o=n("QoRX"),i=n("xYSL"),a=1,s=2;e.exports=function(e,t,n,c,u,l){var h=n&a,d=e.length,f=t.length;if(d!=f&&!(h&&f>d))return!1;var p=l.get(e),g=l.get(t);if(p&&g)return p==t&&g==e;var m=-1,v=!0,y=n&s?new r:void 0;for(l.set(e,t),l.set(t,e);++m<d;){var b=e[m],w=t[m];if(c)var x=h?c(w,b,m,t,e,l):c(b,w,m,e,t,l);if(void 0!==x){if(x)continue;v=!1;break}if(y){if(!o(t,function(e,t){if(!i(y,t)&&(b===e||u(b,e,n,c,l)))return y.push(t)})){v=!1;break}}else if(b!==w&&!u(b,w,n,c,l)){v=!1;break}}return l.delete(e),l.delete(t),v}},"otv/":function(e,t,n){var r=n("nmnc"),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},pSRY:function(e,t,n){var r=n("QkVE");e.exports=function(e){return r(this,e).has(e)}},pyRK:function(e,t,n){"use strict";var r=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},qPyV:function(e,t,n){var r=n("ut/Y"),o=n("LGYb");e.exports=function(e,t){return e&&e.length?o(e,r(t,2)):[]}},qZTm:function(e,t,n){var r=n("fR/l"),o=n("MvSz"),i=n("7GkX");e.exports=function(e){return r(e,i,o)}},rEGp:function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},sEf8:function(e,t){e.exports=function(e){return function(t){return e(t)}}},sEfC:function(e,t,n){var r=n("GoyQ"),o=n("QIyF"),i=n("tLB3"),a="Expected a function",s=Math.max,c=Math.min;e.exports=function(e,t,n){var u,l,h,d,f,p,g=0,m=!1,v=!1,y=!0;if("function"!=typeof e)throw new TypeError(a);function b(t){var n=u,r=l;return u=l=void 0,g=t,d=e.apply(r,n)}function w(e){var n=e-p;return void 0===p||n>=t||n<0||v&&e-g>=h}function x(){var e=o();if(w(e))return k(e);f=setTimeout(x,function(e){var n=t-(e-p);return v?c(n,h-(e-g)):n}(e))}function k(e){return f=void 0,y&&u?b(e):(u=l=void 0,d)}function S(){var e=o(),n=w(e);if(u=arguments,l=this,p=e,n){if(void 0===f)return function(e){return g=e,f=setTimeout(x,t),m?b(e):d}(p);if(v)return clearTimeout(f),f=setTimeout(x,t),b(p)}return void 0===f&&(f=setTimeout(x,t)),d}return t=i(t)||0,r(n)&&(m=!!n.leading,h=(v="maxWait"in n)?s(i(n.maxWait)||0,t):h,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==f&&clearTimeout(f),g=0,u=p=l=f=void 0},S.flush=function(){return void 0===f?d:k(o())},S}},seXi:function(e,t,n){var r=n("qZTm"),o=1,i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,s,c){var u=n&o,l=r(e),h=l.length;if(h!=r(t).length&&!u)return!1;for(var d=h;d--;){var f=l[d];if(!(u?f in t:i.call(t,f)))return!1}var p=c.get(e),g=c.get(t);if(p&&g)return p==t&&g==e;var m=!0;c.set(e,t),c.set(t,e);for(var v=u;++d<h;){var y=e[f=l[d]],b=t[f];if(a)var w=u?a(b,y,f,t,e,c):a(y,b,f,e,t,c);if(!(void 0===w?y===b||s(y,b,n,a,c):w)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var x=e.constructor,k=t.constructor;x!=k&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof k&&k instanceof k)&&(m=!1)}return c.delete(e),c.delete(t),m}},shjB:function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},tLB3:function(e,t,n){var r=n("jXQH"),o=n("GoyQ"),i=n("/9aa"),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):s.test(e)?a:+e}},tMB7:function(e,t,n){var r=n("y1pI");e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},tadb:function(e,t,n){var r=n("Cwc5")(n("Kz5y"),"DataView");e.exports=r},tlOI:function(e,t,n){(function(e){!function(){var t={r:function(e){if(t[e].inited)return t[e].value;if("function"!=typeof t[e].value)return t[e].inited=!0,t[e].value;var n={exports:{}},r=t[e].value(null,n.exports,n);if(t[e].inited=!0,t[e].value=r,void 0!==r)return r;for(var o in n.exports)if(n.exports.hasOwnProperty(o))return t[e].inited=!0,t[e].value=n.exports,n.exports}};t[0]={value:function(e,n,r){var o=t.r(17),i=t.r(11),a=(new o.Marker).pipe(function(){var e=new o.Circle(6);this.addShape(e),this.setRef(6,0).setViewBox(-7,-7,14,14).setWidth(7).setHeight(7),this.dot=e,this.node.setAttribute("markerUnits","userSpaceOnUse")});i.register("arc",function(e,t,n,r,i){var s,c,u,l=e.getLayoutBox(),h=t.getLayoutBox(),d=Math.abs,f=[],p=l.x>h.x?"right":"left";e.getMinder().getPaper().addResource(a),s=new o.Point(h.cx,h.cy),c="left"==p?new o.Point(l.right+2,l.cy):new o.Point(l.left-2,l.cy),u=o.Vector.fromPoints(s,c),f.push("M",s),f.push("A",d(u.x),d(u.y),0,0,u.x*u.y>0?0:1,c),n.setMarker(a),a.dot.fill(i),n.setPathData(f)})}},t[1]={value:function(e,n,r){var o=t.r(17),i=t.r(11),a=(new o.Marker).pipe(function(){var e=new o.Circle(6);this.addShape(e),this.setRef(6,0).setViewBox(-7,-7,14,14).setWidth(7).setHeight(7),this.dot=e,this.node.setAttribute("markerUnits","userSpaceOnUse")});i.register("arc_tp",function(e,t,n,r,i){var s,c,u=e.getLayoutBox(),l=t.getLayoutBox(),h=e.getIndex(),d=t.getChildren()[h+1];e.getIndex()>0&&(l=t.getChildren()[h-1].getLayoutBox());Math.abs;var f=[];u.x,l.x;e.getMinder().getPaper().addResource(a),s=new o.Point(l.cx,l.cy),c=new o.Point(u.cx,u.cy);var p=Math.sqrt(Math.pow(s.x-c.x,2)+Math.pow(s.y-c.y,2));if(p=0==e.getIndex()?.4*p:p,o.Vector.fromPoints(s,c),f.push("M",s),f.push("A",p,p,0,0,1,c),n.setMarker(a),a.dot.fill(i),n.setPathData(f),d&&d.getConnection()){var g=d.getConnection(),m=d.getLayoutBox(),v=new o.Point(m.cx,m.cy),y=Math.sqrt(Math.pow(c.x-v.x,2)+Math.pow(c.y-v.y,2));(f=[]).push("M",c),f.push("A",y,y,0,0,1,v),g.setMarker(a),a.dot.fill(i),g.setPathData(f)}})}},t[2]={value:function(e,n,r){t.r(17);t.r(11).register("bezier",function(e,t,n){var r=t.getLayoutVertexOut(),o=e.getLayoutVertexIn(),i=t.getLayoutVectorOut().normalize(),a=Math.round,s=Math.abs,c=[];if(c.push("M",a(r.x),a(r.y)),s(i.x)>s(i.y)){var u=(o.x+r.x)/2;c.push("C",u,r.y,u,o.y,o.x,o.y)}else{var l=(o.y+r.y)/2;c.push("C",r.x,l,o.x,l,o.x,o.y)}n.setMarker(null),n.setPathData(c)})}},t[3]={value:function(e,n,r){t.r(17);t.r(11).register("fish-bone-master",function(e,t,n){var r=t.getLayoutVertexOut(),o=e.getLayoutVertexIn(),i=Math.abs,a=i(r.y-o.y),s=i(r.x-o.x),c=[];c.push("M",r.x,r.y),c.push("h",s-a),c.push("L",o.x,o.y),n.setMarker(null),n.setPathData(c)})}},t[4]={value:function(e,n,r){t.r(17);t.r(11).register("l",function(e,t,n){var r=t.getLayoutVertexOut(),o=e.getLayoutVertexIn(),i=t.getLayoutVectorOut(),a=[],s=Math.round,c=Math.abs;a.push("M",r.round()),c(i.x)>c(i.y)?a.push("H",s(o.x)):a.push("V",o.y),a.push("L",o),n.setPathData(a)})}},t[5]={value:function(e,n,r){t.r(17);t.r(11).register("poly",function(e,t,n,r){var o=t.getLayoutVertexOut(),i=e.getLayoutVertexIn(),a=t.getLayoutVectorOut().normalize(),s=Math.round,c=Math.abs,u=[];switch(u.push("M",s(o.x),s(o.y)),!0){case c(a.x)>c(a.y)&&a.x<0:u.push("h",-t.getStyle("margin-left")),u.push("v",i.y-o.y),u.push("H",i.x);break;case c(a.x)>c(a.y)&&a.x>=0:u.push("h",t.getStyle("margin-right")),u.push("v",i.y-o.y),u.push("H",i.x);break;case c(a.x)<=c(a.y)&&a.y<0:u.push("v",-t.getStyle("margin-top")),u.push("h",i.x-o.x),u.push("V",i.y);break;case c(a.x)<=c(a.y)&&a.y>=0:u.push("v",t.getStyle("margin-bottom")),u.push("h",i.x-o.x),u.push("V",i.y)}n.setMarker(null),n.setPathData(u)})}},t[6]={value:function(e,n,r){var o=t.r(17);t.r(11).register("under",function(e,t,n,r,i){var a,s,c,u,l=e.getLayoutBox(),h=t.getLayoutBox(),d=(Math.abs,[]),f=l.x>h.x?"right":"left",p=(e.getStyle("connect-radius"),l.bottom+3),g="sub"==t.getType()?h.bottom+3:h.cy;"right"==f?(a=new o.Point(h.right,g),s=new o.Point(l.left-10,p),c=new o.Point(l.right,p)):(a=new o.Point(h.left,g),s=new o.Point(l.right+10,p),c=new o.Point(l.left,p)),u=(a.x+s.x)/2,d.push("M",a),d.push("C",u,a.y,u,s.y,s),d.push("L",c),n.setMarker(null),n.setPathData(d)})}},t[7]={value:function(e,n,r){var o,i=t.r(17),a=t.r(19);-1!=location.href.indexOf("boxv")&&(Object.defineProperty(i.Box.prototype,"visualization",{get:function(){return o?o.setBox(this):null}}),a.registerInitHook(function(){this.on("paperrender",function(){(o=new i.Rect).fill("rgba(200, 200, 200, .5)"),o.stroke("orange"),this.getRenderContainer().addShape(o)})}))}},t[8]={value:function(e,n,r){var o=t.r(19),i={enableAnimation:!0,layoutAnimationDuration:300,viewAnimationDuration:100,zoomAnimationDuration:300},a={};o.registerInitHook(function(){this.setDefaultOptions(i),this.getOption("enableAnimation")||this.disableAnimation()}),o.prototype.enableAnimation=function(){for(var e in i)i.hasOwnProperty(e)&&this.setOption(a[e])},o.prototype.disableAnimation=function(){for(var e in i)i.hasOwnProperty(e)&&(a[e]=this.getOption(e),this.setOption(e,0))}}},t[9]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19)),a=(t.r(21),t.r(13)),s=o.createClass("Command",{constructor:function(){this._isContentChange=!0,this._isSelectionChange=!1},execute:function(e,t){throw new Error("Not Implement: Command.execute()")},setContentChanged:function(e){this._isContentChange=!!e},isContentChanged:function(){return this._isContentChange},setSelectionChanged:function(e){this._isSelectionChange=!!e},isSelectionChanged:function(){return this._isContentChange},queryState:function(e){return 0},queryValue:function(e){return 0},isNeedUndo:function(){return!0}});s.STATE_NORMAL=0,s.STATE_ACTIVE=1,s.STATE_DISABLED=-1,o.extendClass(i,{_getCommand:function(e){return this._commands[e.toLowerCase()]},_queryCommand:function(e,t,n){var r=this._getCommand(e);if(r){var o=r["query"+t];if(o)return o.apply(r,[this].concat(n))}return 0},queryCommandState:function(e){return this._queryCommand(e,"State",[].slice.call(arguments,1))},queryCommandValue:function(e){return this._queryCommand(e,"Value",[].slice.call(arguments,1))},execCommand:function(e){if(!e)return null;e=e.toLowerCase();var t,n,r,o=[].slice.call(arguments,1),i=this;return r={command:t=this._getCommand(e),commandName:e.toLowerCase(),commandArgs:o},!(!t||!~this.queryCommandState(e))&&(this._hasEnterExecCommand?(n=t.execute.apply(t,[i].concat(o)),this._hasEnterExecCommand||this._interactChange()):(this._hasEnterExecCommand=!0,this._fire(new a("beforeExecCommand",r,!0))||(this._fire(new a("preExecCommand",r,!1)),n=t.execute.apply(t,[i].concat(o)),this._fire(new a("execCommand",r,!1)),t.isContentChanged()&&this._firePharse(new a("contentchange")),this._interactChange()),this._hasEnterExecCommand=!1),void 0===n?null:n)}}),r.exports=s}},t[10]={value:function(e,n,r){t.r(33);function o(e,t){t(e),e.children&&e.children.forEach(function(e){o(e,t)})}return function(e){switch(e.version||(e.root?"1.4.0":"1.1.3")){case"1.1.3":!function(e){var t=e.data.currentstyle;delete e.data.currentstyle,"bottom"==t?(e.template="structure",e.theme="snow"):"default"==t&&(e.template="default",e.theme="classic"),o(e,function(e){var t=e.data;"PriorityIcon"in t&&(t.priority=t.PriorityIcon,delete t.PriorityIcon),"ProgressIcon"in t&&(t.progress=1+(t.ProgressIcon-1<<1),delete t.ProgressIcon),delete t.point,delete t.layout})}(e);case"1.2.0":case"1.2.1":!function(e){o(e,function(e){var t=e.data;delete t.layout_bottom_offset,delete t.layout_default_offset,delete t.layout_filetree_offset})}(e);case"1.3.0":case"1.3.1":case"1.3.2":case"1.3.3":case"1.3.4":case"1.3.5":!function(e){e.root={data:e.data,children:e.children},delete e.data,delete e.children}(e)}return e}}},t[11]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=t.r(20),s=t.r(19),c=t.r(21),u={};function l(e,t){u[e]=t}l("default",function(e,t,n){n.setPathData(["M",t.getLayoutVertexOut(),"L",e.getLayoutVertexIn()])}),o.extendClass(c,{getConnect:function(){return this.data.connect||"default"},getConnectProvider:function(){return u[this.getConnect()]||u.default},getConnection:function(){return this._connection||null}}),o.extendClass(s,{getConnectContainer:function(){return this._connectContainer},createConnect:function(e){if(!e.isRoot()){var t=new o.Path;e._connection=t,this._connectContainer.addShape(t),this.updateConnect(e)}},removeConnect:function(e){var t=this;e.traverse(function(e){t._connectContainer.removeShape(e._connection),e._connection=null})},updateConnect:function(e){var t=e._connection,n=e.parent;if(n&&t)if(n.isCollapsed())t.setVisible(!1);else{t.setVisible(!0);var r=e.getConnectProvider(),o=e.getStyle("connect-color")||"white",i=e.getStyle("connect-width")||2;t.stroke(o,i),r(e,n,t,i,o),i%2==0?t.setTranslate(.5,.5):t.setTranslate(0,0)}}}),a.register("Connect",{init:function(){this._connectContainer=(new o.Group).setId(i.uuid("minder_connect_group")),this.getRenderContainer().prependShape(this._connectContainer)},events:{nodeattach:function(e){this.createConnect(e.node)},nodedetach:function(e){this.removeConnect(e.node)},"layoutapply layoutfinish noderender":function(e){this.updateConnect(e.node)}}}),n.register=l}},t[12]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19)),a=(t.r(21),t.r(13)),s=t.r(10),c=t.r(25),u={};n.registerProtocol=function(e,t){for(var n in u[e]=t,u)u.hasOwnProperty(n)&&(u[n]=u[n],u[n].name=n)},n.getRegisterProtocol=function(e){return void 0===e?u:u[e]||null},o.extendClass(i,{setup:function(e){if("string"==typeof e&&(e=document.querySelector(e)),e){var t=e.getAttribute("minder-data-type");if(t in u){var n=e.textContent;e.textContent=null,this.renderTo(e),this.importData(t,n)}return this}},exportJson:function(){var e={root:function e(t){var n={};n.data=t.getData();var r=t.getChildren();n.children=[];for(var o=0;o<r.length;o++)n.children.push(e(r[o]));return n}(this.getRoot())};return e.template=this.getTemplate(),e.theme=this.getTheme(),e.version=i.version,e.base=this.getBase(),JSON.parse(JSON.stringify(e))},Text2Children:function(e,t){if(e instanceof kityminder.Node){for(var n,r=[],o={},i=0,a=/^(\t|\x20{4})/,s=t.split(/\r|\n|\r\n/),c="",u=0,l=this;void 0!==(c=s[u++]);)if(!h(c=c.replace(/&nbsp;/g,"")))if(i=f(c),n=d(c),0===i)o={},r.push(n),o[0]=r[r.length-1];else{if(!o[i-1])throw new Error("Invalid local format");p(o[i-1],n),o[i]=n}!function e(t,n){for(var r=0,o=n.length;r<o;r++){var i=l.createNode(null,t);i.setData("text",n[r].data.text||""),e(i,n[r].children)}}(e,r),l.refresh()}function h(e){return""===e&&!/\S/.test(e)}function d(e){return{data:{text:e.replace(/^(\t|\x20{4})+/,"").replace(/(\t|\x20{4})+$/,"")},children:[]}}function f(e){for(var t=0;a.test(e);)e=e.replace(a,""),t++;return t}function p(e,t){e.children.push(t)}},exportNode:function(e){var t={};t.data=e.getData();var n=e.getChildren();t.children=[];for(var r=0;r<n.length;r++)t.children.push(this.exportNode(n[r]));return t},importNode:function(e,t){var n=t.data;for(var r in e.data={},n)e.setData(r,n[r]);for(var o=t.children||[],i=0;i<o.length;i++){var a=this.createNode(null,e);this.importNode(a,o[i])}return e},importJson:function(e){if(e){for(this._fire(new a("preimport",null,!1));this._root.getChildren().length;)this.removeNode(this._root.getChildren()[0]);return e=s(e),this.importNode(this._root,e.root),this.setTemplate(e.template||"default"),this.setTheme(e.theme||null),this.setBase(e.base),this.refresh(),this.fire("import"),this._firePharse({type:"contentchange"}),this._interactChange(),this}},exportData:function(e,t){var n,r;return n=this.exportJson(),!e||(r=u[e])&&r.encode?(this._fire(new a("beforeexport",{json:n,protocolName:e,protocol:r})),c.resolve(r.encode(n,this,t))):c.reject(new Error("Not supported protocol:"+e))},importData:function(e,t,n){var r,o=this;if(e&&(!(r=u[e])||!r.decode))return c.reject(new Error("Not supported protocol:"+e));var i={local:t,protocolName:e,protocol:r};return this._fire(new a("beforeimport",i)),c.resolve(r.decode(t,this,n)).then(function(e){return o.importJson(e),e})},decodeData:function(e,t,n){var r;if(e&&(!(r=u[e])||!r.decode))return c.reject(new Error("Not supported protocol:"+e));var o={local:t,protocolName:e,protocol:r};return this._fire(new a("beforeimport",o)),c.resolve(r.decode(t,this,n))}})}},t[13]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19)),a=o.createClass("MindEvent",{constructor:function(e,t,n){(t=t||{}).getType&&"ShapeEvent"==t.getType()?(this.kityEvent=t,this.originEvent=t.originEvent):t.target&&t.preventDefault?this.originEvent=t:o.Utils.extend(this,t),this.type=e,this._canstop=n||!1},getPosition:function(e){if(this.kityEvent)return e&&"minder"!=e?this.kityEvent.getPosition.call(this.kityEvent,e):this.kityEvent.getPosition(this.minder.getRenderContainer())},getTargetNode:function(){var e=this.kityEvent&&this.kityEvent.targetShape;if(!e)return null;for(;!e.minderNode&&e.container;)e=e.container;var t=e.minderNode;return t&&e.getOpacity()<1?null:t||null},stopPropagation:function(){this._stoped=!0},stopPropagationImmediately:function(){this._immediatelyStoped=!0,this._stoped=!0},shouldStopPropagation:function(){return this._canstop&&this._stoped},shouldStopPropagationImmediately:function(){return this._canstop&&this._immediatelyStoped},preventDefault:function(){this.originEvent.preventDefault()},isRightMB:function(){var e=!1;return!!this.originEvent&&("which"in this.originEvent?e=3==this.originEvent.which:"button"in this.originEvent&&(e=2==this.originEvent.button),e)},getKeyCode:function(){var e=this.originEvent;return e.keyCode||e.which}});i.registerInitHook(function(e){this._initEvents()}),o.extendClass(i,{_initEvents:function(){this._eventCallbacks={}},_resetEvents:function(){this._initEvents(),this._bindEvents()},_bindEvents:function(){this._paper.on("click dblclick mousedown contextmenu mouseup mousemove mouseover mousewheel DOMMouseScroll touchstart touchmove touchend dragenter dragleave drop",this._firePharse.bind(this)),window&&window.addEventListener("resize",this._firePharse.bind(this))},dispatchKeyEvent:function(e){this._firePharse(e)},_firePharse:function(e){var t,n,r;"DOMMouseScroll"==e.type&&(e.type="mousewheel",e.wheelDelta=e.originEvent.wheelDelta=-10*e.originEvent.detail,e.wheelDeltaX=e.originEvent.mozMovementX,e.wheelDeltaY=e.originEvent.mozMovementY),t=new a("before"+e.type,e,!0),this._fire(t)||(n=new a("pre"+e.type,e,!0),r=new a(e.type,e,!0),(this._fire(n)||this._fire(r))&&this._fire(new a("after"+e.type,e,!1)))},_interactChange:function(e){var t=this;t._interactScheduled||(setTimeout(function(){t._fire(new a("interactchange")),t._interactScheduled=!1},100),t._interactScheduled=!0)},_listen:function(e,t){(this._eventCallbacks[e]||(this._eventCallbacks[e]=[])).push(t)},_fire:function(e){e.minder=this;var t=this.getStatus(),n=this._eventCallbacks[e.type.toLowerCase()]||[];if(t&&(n=n.concat(this._eventCallbacks[t+"."+e.type.toLowerCase()]||[])),0!==n.length){this.getStatus();for(var r=0;r<n.length&&(n[r].call(this,e),!e.shouldStopPropagationImmediately());r++);return e.shouldStopPropagation()}},on:function(e,t){var n=this;return e.split(/\s+/).forEach(function(e){n._listen(e.toLowerCase(),t)}),this},off:function(e,t){var n,r,o,i,a=e.split(/\s+/);for(n=0;n<a.length;n++)if(o=this._eventCallbacks[a[n].toLowerCase()]){for(i=null,r=0;r<o.length;r++)o[r]==t&&(i=r);null!==i&&o.splice(i,1)}},fire:function(e,t){var n=new a(e,t);return this._fire(n),this}}),r.exports=a}},t[14]={value:function(e,n,r){var o=t.r(17),i=t.r(19);i.registerInitHook(function(){this.on("beforemousedown",function(e){this.focus(),e.preventDefault()}),this.on("paperrender",function(){this.focus()})}),o.extendClass(i,{focus:function(){this.isFocused()||(this._renderTarget.classList.add("focus"),this.renderNodeBatch(this.getSelectedNodes()));return this.fire("focus"),this},blur:function(){this.isFocused()&&(this._renderTarget.classList.remove("focus"),this.renderNodeBatch(this.getSelectedNodes()));return this.fire("blur"),this},isFocused:function(){var e=this._renderTarget;return e&&e.classList.contains("focus")}})}},t[15]={value:function(e,t,n){var r={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Left:37,Up:38,Right:39,Down:40,direction:{37:1,38:1,39:1,40:1},Del:46,NumLock:144,Cmd:91,CmdFF:224,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"`":192,"=":187,"-":189,"/":191,".":190,controlKeys:{16:1,17:1,18:1,20:1,91:1,224:1},notContentChange:{13:1,9:1,33:1,34:1,35:1,36:1,16:1,17:1,18:1,20:1,91:1,37:1,38:1,39:1,40:1,113:1,114:1,115:1,144:1,27:1},isSelectedNodeKey:{37:1,38:1,39:1,40:1,13:1,9:1}};for(var o in r)r.hasOwnProperty(o)&&(r[o.toLowerCase()]=r[o]);var i="a".charCodeAt(0);"abcdefghijklmnopqrstuvwxyz".split("").forEach(function(e){r[e]=e.charCodeAt(0)-i+65});var a=9;do{r[a.toString()]=a+48}while(--a);n.exports=r}},t[16]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19));i.registerInitHook(function(e){this.setDefaultOptions({enableKeyReceiver:!0}),this.getOption("enableKeyReceiver")&&this.on("paperrender",function(){this._initKeyReceiver()})}),o.extendClass(i,{_initKeyReceiver:function(){if(!this._keyReceiver){var e=this._keyReceiver=document.createElement("input");e.classList.add("km-receiver"),this._renderTarget.appendChild(e);var t,n,r=this;t=e,n=function(t){switch(t.type){case"blur":r.blur();break;case"focus":r.focus();break;case"input":e.value=null}r._firePharse(t),t.preventDefault()},"keydown keyup keypress copy paste blur focus input".split(" ").forEach(function(e){t.addEventListener(e,n,!1)}),this.on("focus",function(){e.select(),e.focus()}),this.on("blur",function(){e.blur()}),this.isFocused()&&(e.select(),e.focus())}}})}},t[17]={value:function(e,t,n){n.exports=window.kity}},t[18]={value:function(e,n,r){var o,i=t.r(17),a=t.r(33),s=t.r(19),c=t.r(21),u=(t.r(13),t.r(9),{});var l=i.createClass("Layout",{doLayout:function(e,t){throw new Error("Not Implement: Layout.doLayout()")},align:function(e,t,n){var r=this;n=n||0,e.forEach(function(e){var o=r.getTreeBox([e]),i=e.getLayoutTransform();switch(t){case"left":return i.translate(n-o.left,0);case"right":return i.translate(n-o.right,0);case"top":return i.translate(0,n-o.top);case"bottom":return i.translate(0,n-o.bottom)}})},stack:function(e,t,n){var r=this,o=0;return n=n||function(e,t,n){return e.getStyle({x:"margin-right",y:"margin-bottom"}[n])+t.getStyle({x:"margin-left",y:"margin-top"}[n])},e.forEach(function(e,i,a){var s=r.getTreeBox([e]),c={x:s.width,y:s.height}[t],u={x:s.left,y:s.top}[t],l=e.getLayoutTransform();"x"==t?l.translate(o-u,0):l.translate(0,o-u),o+=c,a[i+1]&&(o+=n(e,a[i+1],t))}),o},move:function(e,t,n){e.forEach(function(e){e.getLayoutTransform().translate(t,n)})},getBranchBox:function(e){var t,n,r,o,a=new i.Box;for(t=0;t<e.length;t++)r=(n=e[t]).getLayoutTransform(),o=n.getContentBox(),a=a.merge(r.transformBox(o));return a},getTreeBox:function(e){var t,n,r,o,a=new i.Box;for(e instanceof Array||(e=[e]),t=0;t<e.length;t++)r=(n=e[t]).getLayoutTransform(),o=n.getContentBox(),n.isExpanded()&&n.children.length&&(o=o.merge(this.getTreeBox(n.children))),a=a.merge(r.transformBox(o));return a},getOrderHint:function(e){return[]}});l.register=function(e,t){u[e]=t,o=o||e},s.registerInitHook(function(e){this.refresh()}),a.extend(s,{getLayoutList:function(){return u},getLayoutInstance:function(e){var t=u[e];if(!t)throw new Error("Missing Layout: "+e);return new t}}),i.extendClass(c,{getLayout:function(){var e=this.getData("layout");return e=e||(this.isRoot()?o:this.parent.getLayout())},setLayout:function(e){return e&&("inherit"==e?this.setData("layout"):this.setData("layout",e)),this},layout:function(e){return this.setLayout(e).getMinder().layout(),this},getLayoutInstance:function(){return s.getLayoutInstance(this.getLayout())},getOrderHint:function(e){return this.parent.getLayoutInstance().getOrderHint(this)},getLayoutTransform:function(){return this._layoutTransform||new i.Matrix},getGlobalLayoutTransformPreview:function(){var e=this.parent?this.parent.getLayoutTransform():new i.Matrix,t=this.getLayoutTransform(),n=this.getLayoutOffset();return n&&(t=t.clone().translate(n.x,n.y)),e.merge(t)},getLayoutPointPreview:function(){return this.getGlobalLayoutTransformPreview().transformPoint(new i.Point)},getGlobalLayoutTransform:function(){return this._globalLayoutTransform?this._globalLayoutTransform:this.parent?this.parent.getGlobalLayoutTransform():new i.Matrix},setLayoutTransform:function(e){return this._layoutTransform=e,this},setGlobalLayoutTransform:function(e){return this.getRenderContainer().setMatrix(this._globalLayoutTransform=e),this},setVertexIn:function(e){this._vertexIn=e},setVertexOut:function(e){this._vertexOut=e},getVertexIn:function(){return this._vertexIn||new i.Point},getVertexOut:function(){return this._vertexOut||new i.Point},getLayoutVertexIn:function(){return this.getGlobalLayoutTransform().transformPoint(this.getVertexIn())},getLayoutVertexOut:function(){return this.getGlobalLayoutTransform().transformPoint(this.getVertexOut())},setLayoutVectorIn:function(e){return this._layoutVectorIn=e,this},setLayoutVectorOut:function(e){return this._layoutVectorOut=e,this},getLayoutVectorIn:function(){return this._layoutVectorIn||new i.Vector},getLayoutVectorOut:function(){return this._layoutVectorOut||new i.Vector},getLayoutBox:function(){return this.getGlobalLayoutTransform().transformBox(this.getContentBox())},getLayoutPoint:function(){return this.getGlobalLayoutTransform().transformPoint(new i.Point)},getLayoutOffset:function(){if(!this.parent)return new i.Point;var e=this.getData("layout_"+this.parent.getLayout()+"_offset");return e?new i.Point(e.x,e.y):new i.Point},setLayoutOffset:function(e){return this.parent?(this.setData("layout_"+this.parent.getLayout()+"_offset",e?{x:e.x,y:e.y}:void 0),this):this},hasLayoutOffset:function(){return!!this.getData("layout_"+this.parent.getLayout()+"_offset")},resetLayoutOffset:function(){return this.setLayoutOffset(null)},getLayoutRoot:function(){return this.isLayoutRoot()?this:this.parent.getLayoutRoot()},isLayoutRoot:function(){return this.getData("layout")||this.isRoot()}}),i.extendClass(s,{layout:function(){var e=this.getOption("layoutAnimationDuration");function t(e,n){e.isExpanded(),e.children.forEach(function(e){t(e,n)}),e.getLayoutInstance().doLayout(e,e.getChildren(),n)}this.getRoot().traverse(function(e){e.setLayoutTransform(null)}),t(this.getRoot(),1),t(this.getRoot(),2);var n=this;return this.applyLayoutResult(this.getRoot(),e,function(){setTimeout(function(){n.fire("layoutallfinish")},0)}),this.fire("layout")},refresh:function(){return this.getRoot().renderTree(),this.layout().fire("contentchange")._interactChange(),this},applyLayoutResult:function(e,t,n){var r=this,o=(e=e||this.getRoot()).getComplex();function a(){--o||n&&n()}function s(e,t){e.setGlobalLayoutTransform(t),r.fire("layoutapply",{node:e,matrix:t})}return o>200&&(t=0),function e(n,o){var c=n.getLayoutTransform().merge(o.clone()),u=n.getGlobalLayoutTransform()||new i.Matrix,l=n.getLayoutOffset();c.translate(l.x,l.y),c.m.e=Math.round(c.m.e),c.m.f=Math.round(c.m.f),n._layoutTimeline&&(n._layoutTimeline.stop(),n._layoutTimeline=null),t?n._layoutTimeline=new i.Animator(u,c,s).start(n,t,"ease").on("finish",function(){setTimeout(function(){s(n,c),r.fire("layoutfinish",{node:n,matrix:c}),a()},150)}):(s(n,c),r.fire("layoutfinish",{node:n,matrix:c}),a());for(var h=0;h<n.children.length;h++)e(n.children[h],c)}(e,e.parent?e.parent.getGlobalLayoutTransform():new i.Matrix),this}}),r.exports=l}},t[19]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=[],s=o.createClass("Minder",{constructor:function(e){this._options=i.extend({},e);for(var t,n=a.slice();n.length;)"function"==typeof(t=n.shift())&&t.call(this,this._options);this.fire("finishInitHook")}});s.version="1.4.43",s.registerInitHook=function(e){a.push(e)},r.exports=s}},t[20]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=t.r(19),s={};n.register=function(e,t){s[e]=t},a.registerInitHook(function(){this._initModules()}),o.extendClass(a,{_initModules:function(){var e,t,n,r,o,a,c,u=s,l=this._options.modules||i.keys(u);this._commands={},this._query={},this._modules={},this._rendererClasses={};for(e=0;e<l.length;e++)if(u[t=l[e]]&&(r="function"==typeof u[t]?u[t].call(this):u[t],this._modules[t]=r,r)){for(t in r.defaultOptions&&this.setDefaultOptions(r.defaultOptions),r.init&&r.init.call(this,this._options),o=r.commands)this._commands[t.toLowerCase()]=new o[t];if(a=r.events)for(n in a)this.on(n,a[n]);if(c=r.renderers)for(n in c)this._rendererClasses[n]=this._rendererClasses[n]||[],i.isArray(c[n])?this._rendererClasses[n]=this._rendererClasses[n].concat(c[n]):this._rendererClasses[n].push(c[n]);r.commandShortcutKeys&&this.addCommandShortcutKeys(r.commandShortcutKeys)}},_garbage:function(){for(this.clearSelect();this._root.getChildren().length;)this._root.removeChild(0)},destroy:function(){var e=this._modules;for(var t in this._resetEvents(),this._garbage(),e)e[t].destroy&&e[t].destroy.call(this)},reset:function(){var e=this._modules;for(var t in this._garbage(),e)e[t].reset&&e[t].reset.call(this)}})}},t[21]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=t.r(19),s=o.createClass("MinderNode",{constructor:function(e){this.parent=null,this.root=this,this.children=[],this.data={id:i.guid(),created:+new Date},this.initContainers(),i.isString(e)?this.setText(e):i.isObject(e)&&i.extend(this.data,e)},initContainers:function(){this.rc=(new o.Group).setId(i.uuid("minder_node")),this.rc.minderNode=this},isRoot:function(){return this.root===this},isLeaf:function(){return 0===this.children.length},getRoot:function(){return this.root||this},getParent:function(){return this.parent},getSiblings:function(){var e=[],t=this;return this.parent.children.forEach(function(n){n!=t&&e.push(n)}),e},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},getComplex:function(){var e=0;return this.traverse(function(){e++}),e},getType:function(e){return this.type=["root","main","sub"][Math.min(this.getLevel(),2)],this.type},isAncestorOf:function(e){for(var t=e.parent;t;){if(t==this)return!0;t=t.parent}return!1},getData:function(e){return e?this.data[e]:this.data},setData:function(e,t){if("object"==typeof e){var n=e;for(e in n)n.hasOwnProperty(e)&&(this.data[e]=n[e])}else this.data[e]=t;return this},setText:function(e){return this.data.text=e},getText:function(){return this.data.text||null},preTraverse:function(e,t){var n=this.getChildren();t||e(this);for(var r=0;r<n.length;r++)n[r].preTraverse(e)},postTraverse:function(e,t){for(var n=this.getChildren(),r=0;r<n.length;r++)n[r].postTraverse(e);t||e(this)},traverse:function(e,t){return this.postTraverse(e,t)},getChildren:function(){return this.children},getIndex:function(){return this.parent?this.parent.children.indexOf(this):-1},insertChild:function(e,t){void 0===t&&(t=this.children.length),e.parent&&e.parent.removeChild(e),e.parent=this,e.root=this.root,this.children.splice(t,0,e)},appendChild:function(e){return this.insertChild(e)},prependChild:function(e){return this.insertChild(e,0)},removeChild:function(e){var t,n=e;e instanceof s&&(n=this.children.indexOf(e)),n>=0&&((t=this.children.splice(n,1)[0]).parent=null,t.root=t)},clearChildren:function(){this.children=[]},getChild:function(e){return this.children[e]},getRenderContainer:function(){return this.rc},getCommonAncestor:function(e){return s.getCommonAncestor(this,e)},contains:function(e){return this==e||this.isAncestorOf(e)},clone:function(){var e=new s;return e.data=i.clone(this.data),this.children.forEach(function(t){e.appendChild(t.clone())}),e},compareTo:function(e){if(!i.comparePlainObject(this.data,e.data))return!1;if(!i.comparePlainObject(this.temp,e.temp))return!1;if(this.children.length!=e.children.length)return!1;for(var t=0;this.children[t];){if(!this.children[t].compareTo(e.children[t]))return!1;t++}return!0},getMinder:function(){return this.getRoot().minder}});s.getCommonAncestor=function(e,t){if(e instanceof Array)return s.getCommonAncestor.apply(this,e);switch(arguments.length){case 1:return e.parent||e;case 2:if(e.isAncestorOf(t))return e;if(t.isAncestorOf(e))return t;for(var n=e.parent;n&&!n.isAncestorOf(t);)n=n.parent;return n;default:return Array.prototype.reduce.call(arguments,function(e,t){return s.getCommonAncestor(e,t)},e)}},o.extendClass(a,{getRoot:function(){return this._root},setRoot:function(e){this._root=e,e.minder=this},getAllNode:function(){var e=[];return this.getRoot().traverse(function(t){e.push(t)}),e},getNodeById:function(e){return this.getNodesById([e])[0]},getNodesById:function(e){var t=[];return this.getAllNode().forEach(function(n){-1!=e.indexOf(n.getData("id"))&&t.push(n)}),t},createNode:function(e,t,n){var r=new s(e);return this.fire("nodecreate",{node:r,parent:t,index:n}),this.appendNode(r,t,n),r},appendNode:function(e,t,n){return t&&t.insertChild(e,n),this.attachNode(e),this},removeNode:function(e){e.parent&&(e.parent.removeChild(e),this.detachNode(e),this.fire("noderemove",{node:e}))},attachNode:function(e){var t=this.getRenderContainer();e.traverse(function(e){e.attached=!0,t.addShape(e.getRenderContainer())}),t.addShape(e.getRenderContainer()),this.fire("nodeattach",{node:e})},detachNode:function(e){var t=this.getRenderContainer();e.traverse(function(e){e.attached=!1,t.removeShape(e.getRenderContainer())}),this.fire("nodedetach",{node:e})},getMinderTitle:function(){return this.getRoot().getText()}}),r.exports=s}},t[22]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=t.r(19);a.registerInitHook(function(e){this._defaultOptions={}}),o.extendClass(a,{setDefaultOptions:function(e){return i.extend(this._defaultOptions,e),this},getOption:function(e){return e?e in this._options?this._options[e]:this._defaultOptions[e]:i.extend({},this._defaultOptions,this._options)},setOption:function(e,t){this._options[e]=t}})}},t[23]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=t.r(19);a.registerInitHook(function(){this._initPaper()}),o.extendClass(a,{_initPaper:function(){this._paper=new o.Paper,this._paper._minder=this,this._paper.getNode().ondragstart=function(e){e.preventDefault()},this._paper.shapeNode.setAttribute("transform","translate(0.5, 0.5)"),this._addRenderContainer(),this.setRoot(this.createNode()),this._options.renderTo&&this.renderTo(this._options.renderTo)},_addRenderContainer:function(){this._rc=(new o.Group).setId(i.uuid("minder")),this._paper.addShape(this._rc)},renderTo:function(e){if("string"==typeof e&&(e=document.querySelector(e)),e){if("script"==e.tagName.toLowerCase()){var t=document.createElement("div");t.id=e.id,t.class=e.class,e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e),e=t}e.classList.add("km-view"),this._paper.renderTo(this._renderTarget=e),this._bindEvents(),this.fire("paperrender")}return this},getRenderContainer:function(){return this._rc},getPaper:function(){return this._paper},getRenderTarget:function(){return this._renderTarget}})}},t[24]={value:function(e,n,r){var o=t.r(17),i=t.r(19);function a(e,t){var n=t.path.split("/");n.shift();var r,o=n.shift();if("root"==o){var i,a,s=n.indexOf("data");if(s>-1){o="data";var c=n.splice(s+1);t.dataPath=c}else o="node";for(r=e.getRoot();i=n.shift();)"children"!=i&&(void 0!==a&&(r=r.getChild(a)),a=+i);t.index=a,t.node=r}switch(t.express=[o,t.op].join(".")){case"theme.replace":e.useTheme(t.value);break;case"template.replace":e.useTemplate(t.value);break;case"node.add":(function e(t,n,r,o){return r=t.createNode(n.data,r,o),n.children.forEach(function(n,o){e(t,n,r,o)}),r})(e,t.value,t.node,t.index).renderTree(),e.layout();break;case"node.remove":e.removeNode(t.node.getChild(t.index)),e.layout();break;case"base.replace":e.setBase(t.value);break;case"data.add":case"data.replace":case"data.remove":var u,l=t.node.data;for(n=t.dataPath.slice();l&&n.length>1;)(u=n.shift())in l?l=l[u]:"remove"!=t.op&&(l=l[u]={});l&&(u=n.shift(),"remove"==t.op?l[u]=null:l[u]=t.value),"expandState"==u?r.renderTree():r.render(),e.layout()}e.fire("patch",{patch:t})}o.extendClass(i,{applyPatches:function(e){for(var t=0;t<e.length;t++)a(this,e[t]);return this.fire("contentchange"),this}})}},t[25]={value:function(t,n,r){var o=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};o.prototype={fulfill:function(e){return i(this,1,"fulfillValue",e)},reject:function(e){return i(this,2,"rejectReason",e)},then:function(e,t){var n=new o;return this.onFulfilled.push(c(e,n,"fulfill")),this.onRejected.push(c(t,n,"reject")),a(this),n}},o.all=function(e){return new o(function(t,n){var r=e.length,o=0,i=0,a=[];for(0===r&&t(a);o<r;)e[o].then(function(e){a.push(e),++i===r&&t(a)},function(e){n(e)}),o++})};var i=function(e,t,n,r){return 0===e.state&&(e.state=t,e[n]=r,a(e)),e},a=function(e){1===e.state?s(e,"onFulfilled",e.fulfillValue):2===e.state&&s(e,"onRejected",e.rejectReason)},s=function(t,n,r){if(0!==t[n].length){var o=t[n];t[n]=[];var i=function(){for(var e=0;e<o.length;e++)o[e](r)};"object"==typeof e&&"function"==typeof e.nextTick?e.nextTick(i):"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},c=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=r instanceof o?r.then(e):e(r)}catch(e){return void t.reject(e)}u(t,i)}}},u=function e(t,n){if(t!==n){var r;if("object"==typeof n&&null!==n||"function"==typeof n)try{r=n.then}catch(e){return void t.reject(e)}if("function"!=typeof r)t.fulfill(n);else{var o=!1;try{r.call(n,function(r){o||(o=!0,r===n?t.reject(new TypeError("circular thenable chain")):e(t,r))},function(e){o||(o=!0,t.reject(e))})}catch(e){o||t.reject(e)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};o.resolve=function(e){return new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},r.exports=o}},t[26]={value:function(e,n,r){var o=t.r(17),i=t.r(19);t.r(13);i.registerInitHook(function(e){e.readOnly&&this.setDisabled()}),o.extendClass(i,{disable:function(){var e=this;e.bkqueryCommandState=e.queryCommandState,e.bkqueryCommandValue=e.queryCommandValue,e.queryCommandState=function(t){var n=this._getCommand(t);return n&&n.enableReadOnly?e.bkqueryCommandState.apply(e,arguments):-1},e.queryCommandValue=function(t){var n=this._getCommand(t);return n&&n.enableReadOnly?e.bkqueryCommandValue.apply(e,arguments):null},this.setStatus("readonly"),e._interactChange()},enable:function(){var e=this;e.bkqueryCommandState&&(e.queryCommandState=e.bkqueryCommandState,delete e.bkqueryCommandState),e.bkqueryCommandValue&&(e.queryCommandValue=e.bkqueryCommandValue,delete e.bkqueryCommandValue),this.setStatus("normal"),e._interactChange()}})}},t[27]={value:function(e,n,r){var o=t.r(17),i=t.r(19),a=t.r(21),s=o.createClass("Renderer",{constructor:function(e){this.node=e},create:function(e){throw new Error("Not implement: Renderer.create()")},shouldRender:function(e){return!0},watchChange:function(e){void 0===this.watchingData||this.watchingData,this.watchingData=e},shouldDraw:function(e){return!0},update:function(e,t,n){return this.shouldDraw()&&this.draw(e,t),this.place(e,t,n)},draw:function(e,t){throw new Error("Not implement: Renderer.draw()")},place:function(e,t,n){throw new Error("Not implement: Renderer.place()")},getRenderShape:function(){return this._renderShape||null},setRenderShape:function(e){this._renderShape=e}});o.extendClass(i,function(){function e(e,t){var n=[];["center","left","right","top","bottom","outline","outside"].forEach(function(e){var r="before"+e,o="after"+e;t[r]&&(n=n.concat(t[r])),t[e]&&(n=n.concat(t[e])),t[o]&&(n=n.concat(t[o]))}),e._renderers=n.map(function(t){return new t(e)})}return{renderNodeBatch:function(t){var n,r,i,a,s,c=this._rendererClasses,u=[];if(t.length){for(i=0;i<t.length;i++)(s=t[i])._renderers||e(s,c),s._contentBox=new o.Box,this.fire("beforerender",{node:s});for(n=t[0]._renderers.length,r=0;r<n;r++){for(i=0;i<t.length;i++)"function"==typeof u[i]&&(u[i]=u[i]()),u[i]instanceof o.Box||(u[i]=new o.Box(u[i]));for(i=0;i<t.length;i++)a=(s=t[i])._renderers[r],u[i]&&(s._contentBox=s._contentBox.merge(u[i]),a.contentBox=u[i]),a.shouldRender(s)?(a.getRenderShape()||(a.setRenderShape(a.create(s)),a.bringToBack?s.getRenderContainer().prependShape(a.getRenderShape()):s.getRenderContainer().appendShape(a.getRenderShape())),a.getRenderShape().setVisible(!0),u[i]=a.update(a.getRenderShape(),s,s._contentBox)):a.getRenderShape()&&(a.getRenderShape().setVisible(!1),u[i]=null)}for(i=0;i<t.length;i++)this.fire("noderender",{node:t[i]})}},renderNode:function(t){var n,r=this._rendererClasses;t._renderers||e(t,r),this.fire("beforerender",{node:t}),t._contentBox=new o.Box,t._renderers.forEach(function(e){e.shouldRender(t)?(e.getRenderShape()||(e.setRenderShape(e.create(t)),e.bringToBack?t.getRenderContainer().prependShape(e.getRenderShape()):t.getRenderContainer().appendShape(e.getRenderShape())),e.getRenderShape().setVisible(!0),"function"==typeof(n=e.update(e.getRenderShape(),t,t._contentBox))&&(n=n()),n&&(t._contentBox=t._contentBox.merge(n),e.contentBox=n)):e.getRenderShape()&&e.getRenderShape().setVisible(!1)}),this.fire("noderender",{node:t})}}}()),o.extendClass(a,{render:function(){if(this.attached)return this.getMinder().renderNode(this),this},renderTree:function(){if(this.attached){var e=[];return this.traverse(function(t){e.push(t)}),this.getMinder().renderNodeBatch(e),this}},getRenderer:function(e){var t=this._renderers;if(!t)return null;for(var n=0;n<t.length;n++)if(t[n].getType()==e)return t[n];return null},getContentBox:function(){return this.parent&&this.parent.isCollapsed()?new o.Box:this._contentBox||new o.Box},getRenderBox:function(e,t){var n=e&&this.getRenderer(e),r=n?n.contentBox:this.getContentBox();return o.Matrix.getCTM(this.getRenderContainer(),t||"paper").transformBox(r)}}),r.exports=s}},t[28]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=t.r(19),s=t.r(21);a.registerInitHook(function(){this._initSelection()}),o.extendClass(a,{_initSelection:function(){this._selectedNodes=[]},renderChangedSelection:function(e){var t=this.getSelectedNodes(),n=[];for(t.forEach(function(t){-1==e.indexOf(t)&&n.push(t)}),e.forEach(function(e){-1==t.indexOf(e)&&n.push(e)}),n.length&&(this._interactChange(),this.fire("selectionchange"));n.length;)n.shift().render()},getSelectedNodes:function(){return this._selectedNodes},getSelectedNode:function(){return this.getSelectedNodes()[0]||null},removeAllSelectedNodes:function(){var e=this._selectedNodes.splice(0);return this._selectedNodes=[],this.renderChangedSelection(e),this.fire("selectionclear")},removeSelectedNodes:function(e){var t=this,n=this._selectedNodes.slice(0);return(e=i.isArray(e)?e:[e]).forEach(function(e){var n;-1!==(n=t._selectedNodes.indexOf(e))&&t._selectedNodes.splice(n,1)}),this.renderChangedSelection(n),this},select:function(e,t){var n=this.getSelectedNodes().slice(0);t&&(this._selectedNodes=[]);var r=this;return(e=i.isArray(e)?e:[e]).forEach(function(e){-1===r._selectedNodes.indexOf(e)&&r._selectedNodes.unshift(e)}),this.renderChangedSelection(n),this},selectById:function(e,t){e=i.isArray(e)?e:[e];var n=this.getNodesById(e);return this.select(n,t)},toggleSelect:function(e){return i.isArray(e)?e.forEach(this.toggleSelect.bind(this)):e.isSelected()?this.removeSelectedNodes(e):this.select(e),this},isSingleSelect:function(){return 1==this._selectedNodes.length},getSelectedAncestors:function(e){var t,n=this.getSelectedNodes().slice(0),r=[],o=n.indexOf(this.getRoot());function i(e,t){for(var n=e.length-1;n>=0;--n)if(e[n].isAncestorOf(t))return!0;return!1}for(~o&&!e&&n.splice(o,1),n.sort(function(e,t){return e.getLevel()-t.getLevel()});t=n.pop();)i(n,t)||r.push(t);return r}}),o.extendClass(s,{isSelected:function(){var e=this.getMinder();return e&&-1!=e.getSelectedNodes().indexOf(this)}})}},t[29]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=t.r(15),s=t.r(19),c=t.r(13);function u(e){var t=0;return"string"==typeof e?e.toLowerCase().split(/\+\s*/).forEach(function(e){switch(e){case"ctrl":case"cmd":t|=4096;break;case"alt":t|=8192;break;case"shift":t|=16384;break;default:t|=a[e]}}):((e.ctrlKey||e.metaKey)&&(t|=4096),e.altKey&&(t|=8192),e.shiftKey&&(t|=16384),t|=e.keyCode),t}o.extendClass(c,{isShortcutKey:function(e){var t=this.originEvent;return!!t&&u(e)==u(t)}}),s.registerInitHook(function(){this._initShortcutKey()}),o.extendClass(s,{_initShortcutKey:function(){this._bindShortcutKeys()},_bindShortcutKeys:function(){var e=this._shortcutKeys={};this.on("keydown",function(t){for(var n in e)if(e.hasOwnProperty(n)&&t.isShortcutKey(n)){var r=e[n];if(r.__statusCondition&&r.__statusCondition!=this.getStatus())return;r(),t.preventDefault()}})},addShortcut:function(e,t){var n=this._shortcutKeys;e.split(/\|\s*/).forEach(function(e){var r,o=e.split("::");o.length>1&&(e=o[1],r=o[0],t.__statusCondition=r),n[e]=t})},addCommandShortcutKeys:function(e,t){var n=this._commandShortcutKeys||(this._commandShortcutKeys={}),r={};t?r[e]=t:r=e;var o=this;i.each(r,function(e,t){n[t]=e,o.addShortcut(e,function(){-1!==o.queryCommandState(t)&&o.execCommand(t)})})},getCommandShortcutKey:function(e){var t=this._commandShortcutKeys;return t&&t[e]||null},supportClipboardEvent:function(e){return!!e.ClipboardEvent}(window)})}},t[30]={value:function(e,n,r){var o=t.r(17),i=t.r(19);window.location.href.indexOf("status"),window.location.href.indexOf("trace");i.registerInitHook(function(){this._initStatus()}),o.extendClass(i,{_initStatus:function(){this._status="normal",this._rollbackStatus="normal"},setStatus:function(e,t){return"readonly"!=this._status||t?(e!=this._status&&(this._rollbackStatus=this._status,this._status=e,this.fire("statuschange",{lastStatus:this._rollbackStatus,currentStatus:this._status})),this):this},rollbackStatus:function(){this.setStatus(this._rollbackStatus)},getRollbackStatus:function(){return this._rollbackStatus},getStatus:function(){return this._status}})}},t[31]={value:function(e,n,r){var o,i,a,s=t.r(17),c=t.r(33),u=t.r(19),l=t.r(9),h=t.r(21),d=t.r(20),f={};n.register=function(e,t){f[e]=t},c.extend(u,{getTemplateList:function(){return f}}),s.extendClass(u,(o=u.prototype.getTheme,{useTemplate:function(e,t){this.setTemplate(e),setTimeout(()=>{this.refresh(t||800)},300)},getTemplate:function(){return this._template||"default"},setTemplate:function(e){this._template=e||null},getTemplateSupport:function(e){var t=f[this.getTemplate()];return t&&t[e]},getTheme:function(e){return(this.getTemplateSupport("getTheme")||o).call(this,e)},getBase:function(){return this._base||1},setBase:function(e){this._base=e?Number(e):0}})),s.extendClass(h,(i=h.prototype.getLayout,a=h.prototype.getConnect,{getLayout:function(){return(this.getMinder().getTemplateSupport("getLayout")||i).call(this,this)},getConnect:function(){return(this.getMinder().getTemplateSupport("getConnect")||a).call(this,this)}})),d.register("TemplateModule",{commands:{template:s.createClass("TemplateCommand",{base:l,execute:function(e,t){e.useTemplate(t),e.execCommand("camera")},queryValue:function(e){return e.getTemplate()||"default"}})}})}},t[32]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=t.r(19),s=t.r(21),c=t.r(20),u=t.r(9),l={left:function(e){return 3 in e&&e[3]||1 in e&&e[1]||e[0]},right:function(e){return 1 in e&&e[1]||e[0]},top:function(e){return e[0]},bottom:function(e){return 2 in e&&e[2]||e[0]}},h={};n.register=function(e,t){h[e]=t},i.extend(a,{getThemeList:function(){return h}}),o.extendClass(a,{useTheme:function(e){return this.setTheme(e),setTimeout(()=>{this.refresh(800)},300),!0},setTheme:function(e){if(e&&!h[e])throw new Error("Theme "+e+" not exists!");var t=this._theme;this._theme=e||null;var n=this.getRenderTarget();return n&&(n.classList.remove("km-theme-"+t),e&&n.classList.add("km-theme-"+e),n.style.background=this.getStyle("background")),this.fire("themechange",{theme:e}),this},getTheme:function(e){return this._theme||this.getOption("defaultTheme")||"fresh-blue"},getThemeItems:function(e){this.getTheme(e);return h[this.getTheme(e)]},getStyle:function(e,t){var n,r,o,a,s=this.getThemeItems(t);if(e in s)return s[e];if((n=e.split("-")).length<2)return null;if(r=n.pop(),(e=n.join("-"))in s){if(o=s[e],i.isArray(o)&&(a=l[r]))return a(o);if(!isNaN(o))return o}return null},getNodeStyle:function(e,t){var n=this.getStyle(e.getType()+"-"+t,e);return null!==n?n:this.getStyle(t,e)}}),o.extendClass(s,{getStyle:function(e){return this.getMinder().getNodeStyle(this,e)}}),c.register("Theme",{defaultOptions:{defaultTheme:"fresh-blue"},commands:{theme:o.createClass("ThemeCommand",{base:u,execute:function(e,t){return e.useTheme(t)},queryValue:function(e){return e.getTheme()||"default"}})}}),a.registerInitHook(function(){this.setTheme()})}},t[33]={value:function(e,n){var r=t.r(17),o={};n.extend=r.Utils.extend.bind(r.Utils),n.each=r.Utils.each.bind(r.Utils),n.uuid=function(e){return o[e]=o[e]?o[e]+1:1,e+o[e]},n.guid=function(){return(1e6*+new Date+Math.floor(1e6*Math.random())).toString(36)},n.trim=function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},n.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},n.clone=function(e){return JSON.parse(JSON.stringify(e))},n.comparePlainObject=function(e,t){return JSON.stringify(e)==JSON.stringify(t)},n.encodeHtml=function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp);)?/g,function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}):""},n.clearWhiteSpace=function(e){return e.replace(/[\u200b\t\r\n]/g,"")},n.each(["String","Function","Array","Number","RegExp","Object"],function(e){var t=Object.prototype.toString;n["is"+e]=function(n){return t.apply(n)=="[object "+e+"]"}})}},t[34]={value:function(e,n,r){r.exports=window.kityminder=t.r(35)}},t[35]={value:function(e,n,r){var o={version:t.r(19).version};t.r(33),o.Minder=t.r(19),o.Command=t.r(9),o.Node=t.r(21),t.r(22),t.r(8),o.Event=t.r(13),o.data=t.r(12),t.r(10),o.KeyMap=t.r(15),t.r(29),t.r(30),t.r(23),t.r(28),t.r(14),t.r(16),o.Module=t.r(20),t.r(26),o.Render=t.r(27),o.Connect=t.r(11),o.Layout=t.r(18),o.Theme=t.r(32),o.Template=t.r(31),o.Promise=t.r(25),t.r(7),t.r(24),t.r(42),t.r(43),t.r(44),t.r(45),t.r(46),t.r(47),t.r(48),t.r(50),t.r(49),t.r(51),t.r(52),t.r(53),t.r(54),t.r(55),t.r(56),t.r(57),t.r(58),t.r(59),t.r(60),t.r(61),t.r(62),t.r(63),t.r(64),t.r(68),t.r(65),t.r(67),t.r(66),t.r(40),t.r(36),t.r(37),t.r(38),t.r(39),t.r(41),t.r(75),t.r(78),t.r(77),t.r(76),t.r(78),t.r(80),t.r(79),t.r(0),t.r(1),t.r(2),t.r(3),t.r(4),t.r(5),t.r(6),t.r(69),t.r(73),t.r(70),t.r(72),t.r(71),t.r(74),r.exports=o}},t[36]={value:function(e,n,r){var o=t.r(17),i=t.r(18);["left","right","top","bottom"].forEach(function(e){var t="left"==e||"right"==e?"x":"y",n="left"==e||"top"==e?-1:1,r={left:"right",right:"left",top:"bottom",bottom:"top",x:"y",y:"x"};i.register(e,o.createClass({base:i,doLayout:function(i,a){var s=i.getContentBox();if("x"==t?(i.setVertexOut(new o.Point(s[e],s.cy)),i.setLayoutVectorOut(new o.Vector(n,0))):(i.setVertexOut(new o.Point(s.cx,s[e])),i.setLayoutVectorOut(new o.Vector(0,n))),!a.length)return!1;a.forEach(function(i){var a=i.getContentBox();i.setLayoutTransform(new o.Matrix),"x"==t?(i.setVertexIn(new o.Point(a[r[e]],a.cy)),i.setLayoutVectorIn(new o.Vector(n,0))):(i.setVertexIn(new o.Point(a.cx,a[r[e]])),i.setLayoutVectorIn(new o.Vector(0,n)))}),this.align(a,r[e]),this.stack(a,r[t]);var c=this.getBranchBox(a),u=0,l=0;"x"==t?(u=s[e],u+=n*i.getStyle("margin-"+e),u+=n*a[0].getStyle("margin-"+r[e]),l=s.bottom,l-=s.height/2,l-=c.height/2,l-=c.y):(u=s.right,u-=s.width/2,u-=c.width/2,u-=c.x,l=s[e],l+=n*i.getStyle("margin-"+e),l+=n*a[0].getStyle("margin-"+r[e])),this.move(a,u,l)},getOrderHint:function(e){var n=[],r=e.getLayoutBox();"x"==t?(n.push({type:"up",node:e,area:new o.Box({x:r.x,y:r.top-e.getStyle("margin-top")-5,width:r.width,height:e.getStyle("margin-top")}),path:["M",r.x,r.top-5,"L",r.right,r.top-5]}),n.push({type:"down",node:e,area:new o.Box({x:r.x,y:r.bottom+5,width:r.width,height:e.getStyle("margin-bottom")}),path:["M",r.x,r.bottom+5,"L",r.right,r.bottom+5]})):(n.push({type:"up",node:e,area:new o.Box({x:r.left-e.getStyle("margin-left")-5,y:r.top,width:e.getStyle("margin-left"),height:r.height}),path:["M",r.left-5,r.top,"L",r.left-5,r.bottom]}),n.push({type:"down",node:e,area:new o.Box({x:r.right+5,y:r.top,width:e.getStyle("margin-right"),height:r.height}),path:["M",r.right+5,r.top,"L",r.right+5,r.bottom]}));return n}}))})}},t[37]={value:function(e,n,r){var o=t.r(17),i=t.r(18);[-1,1].forEach(function(e){var t="filetree-"+(e>0?"down":"up");i.register(t,o.createClass({base:i,doLayout:function(t,n,r){var i=t.getContentBox();if(t.setVertexOut(new o.Point(i.left+20,e>0?i.bottom:i.top)),t.setLayoutVectorOut(new o.Vector(0,e)),n.length){n.forEach(function(e){var t=e.getContentBox();e.setLayoutTransform(new o.Matrix),e.setVertexIn(new o.Point(t.left,t.cy)),e.setLayoutVectorIn(new o.Vector(1,0))}),this.align(n,"left"),this.stack(n,"y");var a=0;a+=i.left,a+=20,a+=n[0].getStyle("margin-left");var s=0;e>0?(s+=i.bottom,s+=t.getStyle("margin-bottom"),s+=n[0].getStyle("margin-top")):(s-=this.getTreeBox(n).bottom,s+=i.top,s-=t.getStyle("margin-top"),s-=n[0].getStyle("margin-bottom")),this.move(n,a,s)}},getOrderHint:function(e){var t=[],n=e.getLayoutBox(),r=e.getLevel()>1?3:5;return t.push({type:"up",node:e,area:new o.Box({x:n.x,y:n.top-e.getStyle("margin-top")-r,width:n.width,height:e.getStyle("margin-top")}),path:["M",n.x,n.top-r,"L",n.right,n.top-r]}),t.push({type:"down",node:e,area:new o.Box({x:n.x,y:n.bottom+r,width:n.width,height:e.getStyle("margin-bottom")}),path:["M",n.x,n.bottom+r,"L",n.right,n.bottom+r]}),t}}))})}},t[38]={value:function(e,n,r){var o=t.r(17),i=t.r(18);i.register("fish-bone-master",o.createClass("FishBoneMasterLayout",{base:i,doLayout:function(e,t,n){var r=[],i=[],a=t[0],s=e.getContentBox();if(e.setVertexOut(new o.Point(s.right,s.cy)),e.setLayoutVectorOut(new o.Vector(1,0)),a){a.getContentBox();var c=e.getStyle("margin-right"),u=a.getStyle("margin-left"),l=a.getStyle("margin-top"),h=a.getStyle("margin-bottom");t.forEach(function(e,t){e.setLayoutTransform(new o.Matrix);var n=e.getContentBox();t%2?(i.push(e),e.setVertexIn(new o.Point(n.left,n.top)),e.setLayoutVectorIn(new o.Vector(1,1))):(r.push(e),e.setVertexIn(new o.Point(n.left,n.bottom)),e.setLayoutVectorIn(new o.Vector(1,-1)))}),this.stack(r,"x"),this.stack(i,"x"),this.align(r,"bottom"),this.align(i,"top");var d=s.right+c+u,f=s.cy-h-e.getStyle("margin-top"),p=s.cy+l+e.getStyle("margin-bottom");this.move(r,d,f),this.move(i,d+u,p)}}}))}},t[39]={value:function(e,n,r){var o=t.r(17),i=t.r(18);i.register("fish-bone-slave",o.createClass("FishBoneSlaveLayout",{base:i,doLayout:function(e,t,n){var r=this,i=Math.abs,a=e.getContentBox(),s=e.getLayoutVectorIn();e.setLayoutVectorOut(s);var c=a.left+.382*a.width,u=new o.Point(c,s.y>0?a.bottom:a.top);e.setVertexOut(u);var l=t[0];if(l){var h=l.getContentBox();t.forEach(function(e,t){e.setLayoutTransform(new o.Matrix),e.setLayoutVectorIn(new o.Vector(1,0)),e.setVertexIn(new o.Point(h.left,h.cy))}),this.stack(t,"y"),this.align(t,"left");var d=0,f=0;d+=u.x,e.getLayoutVectorOut().y<0?(f-=this.getTreeBox(t).bottom,f+=e.getContentBox().top,f-=e.getStyle("margin-top"),f-=l.getStyle("margin-bottom")):(f+=e.getContentBox().bottom,f+=e.getStyle("margin-bottom"),f+=l.getStyle("margin-top")),this.move(t,d,f),2==n&&t.forEach(function(e){var t=e.getLayoutTransform(),n=e.getContentBox(),a=t.transformPoint(new o.Point(n.left,0));r.move([e],i(a.y-u.y),0)})}}}))}},t[40]={value:function(e,n,r){var o=t.r(17),i=t.r(18),a=t.r(19);i.register("mind",o.createClass({base:i,doLayout:function(e,t){var n=Math.ceil(e.children.length/2),r=[],i=[];t.forEach(function(e){e.getIndex()<n?r.push(e):i.push(e)});var s=a.getLayoutInstance("left"),c=a.getLayoutInstance("right");s.doLayout(e,i),c.doLayout(e,r);var u=e.getContentBox();e.setVertexOut(new o.Point(u.cx,u.cy)),e.setLayoutVectorOut(new o.Vector(0,0))},getOrderHint:function(e){var t=[],n=e.getLayoutBox();return t.push({type:"up",node:e,area:new o.Box({x:n.x,y:n.top-e.getStyle("margin-top")-5,width:n.width,height:e.getStyle("margin-top")}),path:["M",n.x,n.top-5,"L",n.right,n.top-5]}),t.push({type:"down",node:e,area:new o.Box({x:n.x,y:n.bottom+5,width:n.width,height:e.getStyle("margin-bottom")}),path:["M",n.x,n.bottom+5,"L",n.right,n.bottom+5]}),t}}))}},t[41]={value:function(e,n,r){var o=t.r(17),i=t.r(18);t.r(19);i.register("tianpan",o.createClass({base:i,doLayout:function(e,t){if(0!=t.length){var n,r,i,a=this,s=e.getContentBox(),c=5,u=Math.max(s.width,50);t.forEach(function(e,t){e.setLayoutTransform(new o.Matrix),i=a.getTreeBox(e),u=Math.max(Math.max(i.width,i.height),u)}),u=u/1.5/Math.PI,t.forEach(function(e,t){n=u*(Math.cos(c)+Math.sin(c)*c),r=u*(Math.sin(c)-Math.cos(c)*c),c+=.9-.02*t,e.setLayoutVectorIn(new o.Vector(1,0)),e.setVertexIn(new o.Point(s.cx,s.cy)),e.setLayoutTransform(new o.Matrix),a.move([e],n,r)})}},getOrderHint:function(e){var t=[],n=e.getLayoutBox();return t.push({type:"up",node:e,area:{x:n.x,y:n.top-e.getStyle("margin-top")-5,width:n.width,height:e.getStyle("margin-top")},path:["M",n.x,n.top-5,"L",n.right,n.top-5]}),t.push({type:"down",node:e,area:{x:n.x,y:n.bottom+5,width:n.width,height:e.getStyle("margin-bottom")},path:["M",n.x,n.bottom+5,"L",n.right,n.bottom+5]}),t}}))}},t[42]={value:function(e,n,r){var o=t.r(17),i=t.r(21),a=t.r(9),s=t.r(20);function c(e,t){return e.getIndex()-t.getIndex()}function u(e,t){return-c(e,t)}o.extendClass(i,{arrange:function(e){var t=this.parent;if(t){var n=t.children;if(!(e<0||e>=n.length))return n.splice(this.getIndex(),1),n.splice(e,0,this),this}}});var l=o.createClass("ArrangeUpCommand",{base:a,execute:function(e){var t=e.getSelectedNodes();t.sort(c);var n=t.map(function(e){return e.getIndex()});t.forEach(function(e,t){e.arrange(n[t]-1)}),e.layout(300)},queryState:function(e){return e.getSelectedNode()?0:-1}}),h=o.createClass("ArrangeDownCommand",{base:a,execute:function(e){var t=e.getSelectedNodes();t.sort(u);var n=t.map(function(e){return e.getIndex()});t.forEach(function(e,t){e.arrange(n[t]+1)}),e.layout(300)},queryState:function(e){return e.getSelectedNode()?0:-1}}),d=o.createClass("ArrangeCommand",{base:a,execute:function(e,t){var n=e.getSelectedNodes().slice();if(n.length&&i.getCommonAncestor(n)==n[0].parent){var r=n.map(function(e){return{index:e.getIndex(),node:e}}),o=Math.min.apply(Math,r.map(function(e){return e.index}))>=t;r.sort(function(e,t){return o?t.index-e.index:e.index-t.index}),r.forEach(function(e){e.node.arrange(t)}),e.layout(300)}},queryState:function(e){return e.getSelectedNode()?0:-1}});s.register("ArrangeModule",{commands:{arrangeup:l,arrangedown:h,arrange:d},contextmenu:[{command:"arrangeup"},{command:"arrangedown"},{divider:!0}],commandShortcutKeys:{arrangeup:"normal::alt+Up",arrangedown:"normal::alt+Down"}})}},t[43]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19),t.r(21),t.r(9)),a=t.r(20),s=t.r(61);a.register("basestylemodule",function(){var e=this;function t(e,t){return e.getData(t)||e.getStyle(t)}return s.registerStyleHook(function(e,n){var r=t(e,"font-weight"),o=t(e,"text-decoration"),i=t(e,"font-style");[r,i].join("/");n.eachItem(function(e,t){t.setFont({weight:r,style:i}),t.setStyle("text-decoration",o)})}),{commands:{bold:o.createClass("boldCommand",{base:i,execute:function(e){var t=e.getSelectedNodes();1==this.queryState("bold")?t.forEach(function(e){e.setData("font-weight").render()}):t.forEach(function(e){e.setData("font-weight","bold").render()}),e.layout()},queryState:function(){var t=e.getSelectedNodes(),n=0;return 0===t.length?-1:(t.forEach(function(e){if(e&&e.getData("font-weight"))return n=1,!1}),n)}}),italic:o.createClass("italicCommand",{base:i,execute:function(e){var t=e.getSelectedNodes();1==this.queryState("italic")?t.forEach(function(e){e.setData("font-style").render()}):t.forEach(function(e){e.setData("font-style","italic").render()}),e.layout()},queryState:function(){var t=e.getSelectedNodes(),n=0;return 0===t.length?-1:(t.forEach(function(e){if(e&&e.getData("font-style"))return n=1,!1}),n)}}),del:o.createClass("delCommand",{base:i,execute:function(e){var t=e.getSelectedNodes();1==this.queryState("del")?t.forEach(function(e){e.setData("text-decoration").render()}):t.forEach(function(e){e.setData("text-decoration","line-through").render()}),e.layout()},queryState:function(){var t=e.getSelectedNodes(),n=0;return 0===t.length?-1:(t.forEach(function(e){if(e&&e.getData("text-decoration"))return n=1,!1}),n)}})},commandShortcutKeys:{bold:"ctrl+b",italic:"ctrl+i",del:"ctrl+d"}}})}},t[44]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=t.r(21),s=t.r(9);t.r(20).register("ClipboardModule",function(){var e=this,t=[],n=[];function r(t,o){n.push(o),e.appendNode(o,t),o.render(),o.setLayoutOffset(null);var a=o.children.map(function(e){return e.clone()});o.clearChildren();for(var s,c=0;s=a[c];c++){var u=s.clone();u.setData("id",i.guid()),u.setData("created",(new Date).valueOf()),r(o,u)}}function c(e){e.length&&(e.sort(function(e,t){return e.getIndex()-t.getIndex()}),t=e.map(function(e){return e.clone()}))}var u=o.createClass("CopyCommand",{base:s,execute:function(e){c(e.getSelectedAncestors(!0)),this.setContentChanged(!1)}}),l=o.createClass("CutCommand",{base:s,execute:function(e){var t=e.getSelectedAncestors();0!==t.length&&(c(t),e.select(a.getCommonAncestor(t),!0),t.slice().forEach(function(t){e.removeNode(t)}),e.layout(300))}}),h=o.createClass("PasteCommand",{base:s,execute:function(e){if(t.length){var o=e.getSelectedNodes();if(!o.length)return;for(var a,s=0;a=t[s];s++)for(var c,u=0;c=o[u];u++){var l=a.clone();l.setData("id",i.guid()),l.setData("created",(new Date).valueOf()),r(c,l)}e.select(n,!0),n=[],e.layout(300)}},queryState:function(e){return e.getSelectedNode()?0:-1}});if(e.supportClipboardEvent&&!o.Browser.gecko){return{commands:{copy:u,cut:l,paste:h},clipBoardEvents:{copy:function(e){this.fire("beforeCopy",e)}.bind(e),cut:function(e){this.fire("beforeCut",e)}.bind(e),paste:function(e){this.fire("beforePaste",e)}.bind(e)},sendToClipboard:c}}return{commands:{copy:u,cut:l,paste:h},commandShortcutKeys:{copy:"normal::ctrl+c|",cut:"normal::ctrl+x",paste:"normal::ctrl+v"},sendToClipboard:c}})}},t[45]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(21)),a=t.r(9),s=t.r(20),c=o.createClass("MoveToParentCommand",{base:a,execute:function(e,t,n){for(var r,o=0;o<t.length;o++)(r=t[o]).parent&&(r.parent.removeChild(r),n.appendChild(r),r.render());n.expand(),e.select(t,!0)}}),u=o.createClass("DropHinter",{base:o.Group,constructor:function(){this.callBase(),this.rect=new o.Rect,this.addShape(this.rect)},render:function(e){this.setVisible(!!e),e&&(this.rect.setBox(e.getLayoutBox()).setRadius(e.getStyle("radius")||0).stroke(e.getStyle("drop-hint-color")||"yellow",e.getStyle("drop-hint-width")||2),this.bringTop())}}),l=o.createClass("OrderHinter",{base:o.Group,constructor:function(){this.callBase(),this.area=new o.Rect,this.path=new o.Path,this.addShapes([this.area,this.path])},render:function(e){this.setVisible(!!e),e&&(this.area.setBox(e.area),this.area.fill(e.node.getStyle("order-hint-area-color")||"rgba(0, 255, 0, .5)"),this.path.setPathData(e.path),this.path.stroke(e.node.getStyle("order-hint-path-color")||"#0f0",e.node.getStyle("order-hint-path-width")||1))}}),h=o.createClass("TreeDragger",{constructor:function(e){this._minder=e,this._dropHinter=new u,this._orderHinter=new l,e.getRenderContainer().addShapes([this._dropHinter,this._orderHinter])},dragStart:function(e){this._startPosition=e},dragMove:function(e){if(this._startPosition){var t=o.Vector.fromPoints(this._dragPosition||this._startPosition,e),n=this._minder;if(this._dragPosition=e,!this._dragMode){if(o.Vector.fromPoints(this._dragPosition,this._startPosition).length()<10)return;if(!this._enterDragMode())return}for(var r=0;r<this._dragSources.length;r++)this._dragSources[r].setLayoutOffset(this._dragSources[r].getLayoutOffset().offset(t)),n.applyLayoutResult(this._dragSources[r]);this._dropTest()?this._renderOrderHint(this._orderSucceedHint=null):this._orderTest()}},dragEnd:function(){if(this._startPosition=null,this._dragPosition=null,this._dragMode){if(this._fadeDragSources(1),this._dropSucceedTarget)this._dragSources.forEach(function(e){e.setLayoutOffset(null)}),this._minder.layout(-1),this._minder.execCommand("movetoparent",this._dragSources,this._dropSucceedTarget);else if(this._orderSucceedHint){var e=this._orderSucceedHint,t=e.node.getIndex(),n=this._dragSources.map(function(e){return e.setLayoutOffset(null),e.getIndex()}),r=Math.max.apply(Math,n);t<Math.min.apply(Math,n)&&"down"==e.type&&t++,t>r&&"up"==e.type&&t--,e.node.setLayoutOffset(null),this._minder.execCommand("arrange",t),this._renderOrderHint(null)}else this._minder.fire("savescene");this._minder.layout(300),this._leaveDragMode(),this._minder.fire("contentchange")}},_enterDragMode:function(){return this._calcDragSources(),this._dragSources.length?(this._fadeDragSources(.5),this._calcDropTargets(),this._calcOrderHints(),this._dragMode=!0,this._minder.setStatus("dragtree"),!0):(this._startPosition=null,!1)},_calcDragSources:function(){this._dragSources=this._minder.getSelectedAncestors()},_fadeDragSources:function(e){var t=this._minder;this._dragSources.forEach(function(n){n.getRenderContainer().setOpacity(e,200),n.traverse(function(n){e<1?t.detachNode(n):t.attachNode(n)},!0)})},_calcDropTargets:function(){this._dropTargets=function e(t,n){var r,o=[];return o.push(n),n.getChildren().forEach(function(n){for(r=0;r<t.length;r++)if(t[r]==n)return;o=o.concat(e(t,n))}),o}(this._dragSources,this._minder.getRoot()),this._dropTargetBoxes=this._dropTargets.map(function(e){return e.getLayoutBox()})},_calcOrderHints:function(){var e=this._dragSources,t=i.getCommonAncestor(e);if(t==e[0]&&(t=e[0].parent),0!==e.length&&t==e[0].parent){var n=t.children;this._orderHints=n.reduce(function(t,n){return-1==e.indexOf(n)&&(t=t.concat(n.getOrderHint())),t},[])}else this._orderHints=[]},_leaveDragMode:function(){this._dragMode=!1,this._dropSucceedTarget=null,this._orderSucceedHint=null,this._renderDropHint(null),this._renderOrderHint(null),this._minder.rollbackStatus()},_drawForDragMode:function(){this._text.setContent(this._dragSources.length+" items"),this._text.setPosition(this._startPosition.x,this._startPosition.y+5),this._minder.getRenderContainer().addShape(this)},_boxTest:function(e,t,n){var r,o,i,a,s,c=this._dragSources.map(function(e){return e.getLayoutBox()});for(n=n||function(e,t,n){return e&&!e.isEmpty()},r=0;r<e.length;r++)for(i=e[r],s=t.call(this,i,r),o=0;o<c.length;o++){if(n((a=c[o]).intersect(s),a,s))return i}return null},_dropTest:function(){return this._dropSucceedTarget=this._boxTest(this._dropTargets,function(e,t){return this._dropTargetBoxes[t]},function(e,t,n){function r(e){return e.width*e.height}return!!e&&(!!r(e)&&(r(e)>.5*Math.min(r(t),r(n))||(e.width+1>=Math.min(t.width,n.width)||e.height+1>=Math.min(t.height,n.height))))}),this._renderDropHint(this._dropSucceedTarget),!!this._dropSucceedTarget},_orderTest:function(){return this._orderSucceedHint=this._boxTest(this._orderHints,function(e){return e.area}),this._renderOrderHint(this._orderSucceedHint),!!this._orderSucceedHint},_renderDropHint:function(e){this._dropHinter.render(e)},_renderOrderHint:function(e){this._orderHinter.render(e)},preventDragMove:function(){this._startPosition=null}});s.register("DragTree",function(){var e;return{init:function(){e=new h(this),window.addEventListener("mouseup",function(){e.dragEnd()})},events:{"normal.mousedown inputready.mousedown":function(t){t.originEvent.button||t.getTargetNode()&&t.getTargetNode()!=this.getRoot()&&e.dragStart(t.getPosition())},"normal.mousemove dragtree.mousemove":function(t){e.dragMove(t.getPosition())},"normal.mouseup dragtree.beforemouseup":function(t){e.dragEnd(),t.preventDefault()},statuschange:function(t){"textedit"==t.lastStatus&&"normal"==t.currentStatus&&e.preventDragMove()}},commands:{movetoparent:c}}})}},t[46]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=t.r(15),s=t.r(21),c=t.r(9),u=t.r(20),l=t.r(27);u.register("Expand",function(){var e=this;o.extendClass(s,{expand:function(){return this.setData("expandState","expand"),this},collapse:function(){return this.setData("expandState","collapse"),this},isExpanded:function(){return"collapse"!==this.getData("expandState")&&(this.isRoot()||this.parent.isExpanded())},isCollapsed:function(){return!this.isExpanded()}});var t=o.createClass("ExpandCommand",{base:c,execute:function(e,t){var n=e.getSelectedNode();if(n){for(t&&(n=n.parent);n.parent;)n.expand(),n=n.parent;n.renderTree(),e.layout(100)}},queryState:function(e){var t=e.getSelectedNode();return!t||t.isRoot()||t.isExpanded()?-1:0}}),n=o.createClass("ExpandToLevelCommand",{base:c,execute:function(e,t){e.getRoot().traverse(function(e){e.getLevel()<t&&e.expand(),e.getLevel()!=t||e.isLeaf()||e.collapse()}),setTimeout(()=>{e.refresh(100)},300)},enableReadOnly:!0}),r=o.createClass("CollapseCommand",{base:c,execute:function(e){var t=e.getSelectedNode();t&&(t.collapse(),t.renderTree(),e.layout())},queryState:function(e){var t=e.getSelectedNode();return t&&!t.isRoot()&&t.isExpanded()?0:-1}}),u=o.createClass("Expander",{base:o.Group,constructor:function(e){this.callBase(),this.radius=6,this.outline=new o.Circle(this.radius).stroke("gray").fill("white"),this.sign=(new o.Path).stroke("gray"),this.addShapes([this.outline,this.sign]),this.initEvent(e),this.setId(i.uuid("node_expander")),this.setStyle("cursor","pointer")},initEvent:function(t){this.on("mousedown",function(n){e.select([t],!0),t.isExpanded()?t.collapse():t.expand(),t.renderTree().getMinder().layout(100),t.getMinder().fire("contentchange"),n.stopPropagation(),n.preventDefault()}),this.on("dblclick click mouseup",function(e){e.stopPropagation(),e.preventDefault()})},setState:function(e){if("hide"!=e){this.setVisible(!0);var t=["M",1.5-this.radius,0,"L",this.radius-1.5,0];"collapse"==e&&t.push(["M",0,1.5-this.radius,"L",0,this.radius-1.5]),this.sign.setPathData(t)}else this.setVisible(!1)}});return{commands:{expand:t,expandtolevel:n,collapse:r},events:{layoutapply:function(e){var t=e.node.getRenderer("ExpanderRenderer");t.getRenderShape()&&t.update(t.getRenderShape(),e.node)},beforerender:function(e){var t=e.node,n=!t.parent||t.parent.isExpanded();t.getRenderContainer().setVisible(n),n||e.stopPropagation()},"normal.keydown":function(e){if("textedit"!=this.getStatus()){if(e.originEvent.keyCode==a["/"]){var t=this.getSelectedNode();if(!t||t==this.getRoot())return;var n=t.isExpanded();this.getSelectedNodes().forEach(function(e){n?e.collapse():e.expand(),e.renderTree()}),this.layout(100),this.fire("contentchange"),e.preventDefault(),e.stopPropagationImmediately()}e.isShortcutKey("Alt+`")&&this.execCommand("expandtolevel",9999);for(var r=1;r<6;r++)e.isShortcutKey("Alt+"+r)&&this.execCommand("expandtolevel",r)}}},renderers:{outside:o.createClass("ExpanderRenderer",{base:l,create:function(e){if(!e.isRoot())return this.expander=new u(e),e.getRenderContainer().prependShape(this.expander),e.expanderRenderer=this,this.node=e,this.expander},shouldRender:function(e){return!e.isRoot()},update:function(e,t,n){if(t.parent){var r=t.parent.isExpanded();e.setState(r&&t.children.length?t.getData("expandState"):"hide");var o=t.getLayoutVectorIn().normalize(e.radius+t.getStyle("stroke-width")),i=t.getVertexIn().offset(o.reverse());this.expander.setTranslate(i)}}})},contextmenu:[{command:"expandtoleaf",query:function(){return!e.getSelectedNode()},fn:function(e){e.execCommand("expandtolevel",9999)}},{command:"expandtolevel1",query:function(){return!e.getSelectedNode()},fn:function(e){e.execCommand("expandtolevel",1)}},{command:"expandtolevel2",query:function(){return!e.getSelectedNode()},fn:function(e){e.execCommand("expandtolevel",2)}},{command:"expandtolevel3",query:function(){return!e.getSelectedNode()},fn:function(e){e.execCommand("expandtolevel",3)}},{divider:!0}]}})}},t[47]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19),t.r(21),t.r(9)),a=t.r(20);function s(e,t){return e.getData(t)||e.getStyle(t)}t.r(61).registerStyleHook(function(e,t){var n=e.getData("color"),r=e.getStyle("selected-color"),o=e.getStyle("color"),i=n||(e.isSelected()&&r?r:o),a=s(e,"font-family"),c=s(e,"font-size");t.fill(i),t.eachItem(function(e,t){t.setFont({family:a,size:c})})}),a.register("fontmodule",{commands:{forecolor:o.createClass("fontcolorCommand",{base:i,execute:function(e,t){e.getSelectedNodes().forEach(function(e){e.setData("color",t),e.render()})},queryState:function(e){return 0===e.getSelectedNodes().length?-1:0},queryValue:function(e){return 1==e.getSelectedNodes().length?e.getSelectedNodes()[0].getData("color"):"mixed"}}),background:o.createClass("backgroudCommand",{base:i,execute:function(e,t){e.getSelectedNodes().forEach(function(e){e.setData("background",t),e.render()})},queryState:function(e){return 0===e.getSelectedNodes().length?-1:0},queryValue:function(e){return 1==e.getSelectedNodes().length?e.getSelectedNodes()[0].getData("background"):"mixed"}}),fontfamily:o.createClass("fontfamilyCommand",{base:i,execute:function(e,t){e.getSelectedNodes().forEach(function(n){n.setData("font-family",t),n.render(),e.layout()})},queryState:function(e){return 0===e.getSelectedNodes().length?-1:0},queryValue:function(e){var t=e.getSelectedNode();return t?t.getData("font-family"):null}}),fontsize:o.createClass("fontsizeCommand",{base:i,execute:function(e,t){e.getSelectedNodes().forEach(function(n){n.setData("font-size",t),n.render(),e.layout(300)})},queryState:function(e){return 0===e.getSelectedNodes().length?-1:0},queryValue:function(e){var t=e.getSelectedNode();return t?t.getData("font-size"):null}})}})}},t[48]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19),t.r(21),t.r(9)),a=t.r(20),s=t.r(27);a.register("hyperlink",{commands:{hyperlink:o.createClass("hyperlink",{base:i,execute:function(e,t,n){e.getSelectedNodes().forEach(function(e){e.setData("hyperlink",t),e.setData("hyperlinkTitle",t&&n),e.render()}),e.layout()},queryState:function(e){var t=e.getSelectedNodes(),n=0;return 0===t.length?-1:(t.forEach(function(e){if(e&&e.getData("hyperlink"))return n=0,!1}),n)},queryValue:function(e){var t=e.getSelectedNode();return{url:t.getData("hyperlink"),title:t.getData("hyperlinkTitle")}}})},renderers:{right:o.createClass("hyperlinkrender",{base:s,create:function(){var e=new o.HyperLink,t=new o.Path,n=new o.Rect(24,22,-2,-6,4).fill("rgba(255, 255, 255, 0)");return t.setPathData("M16.614,10.224h-1.278c-1.668,0-3.07-1.07-3.599-2.556h4.877c0.707,0,1.278-0.571,1.278-1.278V3.834 c0-0.707-0.571-1.278-1.278-1.278h-4.877C12.266,1.071,13.668,0,15.336,0h1.278c2.116,0,3.834,1.716,3.834,3.834V6.39 C20.448,8.508,18.73,10.224,16.614,10.224z M5.112,5.112c0-0.707,0.573-1.278,1.278-1.278h7.668c0.707,0,1.278,0.571,1.278,1.278 S14.765,6.39,14.058,6.39H6.39C5.685,6.39,5.112,5.819,5.112,5.112z M2.556,3.834V6.39c0,0.707,0.573,1.278,1.278,1.278h4.877 c-0.528,1.486-1.932,2.556-3.599,2.556H3.834C1.716,10.224,0,8.508,0,6.39V3.834C0,1.716,1.716,0,3.834,0h1.278 c1.667,0,3.071,1.071,3.599,2.556H3.834C3.129,2.556,2.556,3.127,2.556,3.834z").fill("#666"),e.addShape(n),e.addShape(t),e.setTarget("_blank"),e.setStyle("cursor","pointer"),e.on("mouseover",function(){n.fill("rgba(255, 255, 200, .8)")}).on("mouseout",function(){n.fill("rgba(255, 255, 255, 0)")}),e},shouldRender:function(e){return e.getData("hyperlink")},update:function(e,t,n){var r=t.getData("hyperlink");e.setHref("#");for(var i=["^http:","^https:","^ftp:","^mailto:"],a=0;a<i.length;a++){if(new RegExp(i[a]).test(r)){e.setHref(r);break}}var s=t.getData("hyperlinkTitle");s=s?[s,"(",r,")"].join(""):r,e.node.setAttributeNS("http://www.w3.org/1999/xlink","title",s);var c=t.getStyle("space-right");return e.setTranslate(n.right+c+2,-5),new o.Box({x:n.right+c,y:-11,width:24,height:22})}})}})}},t[49]={value:function(e,n,r){var o=t.r(17),i=t.r(15),a=t.r(20);t.r(9);a.register("ImageViewer",function(){function e(e,t,r){var o=document.createElement(e);return n(o,t),r&&r.length&&r.forEach(function(e){o.appendChild(e)}),o}function t(e,t,n){e.addEventListener(t,n)}function n(e,t){t&&t.split(" ").forEach(function(t){e.classList.add(t)})}var r=o.createClass("ImageViewer",{constructor:function(){var n=e("button","km-image-viewer-btn km-image-viewer-close"),r=e("button","km-image-viewer-btn km-image-viewer-source"),o=this.image=e("img"),i=this.toolbar=e("div","km-image-viewer-toolbar",[r,n]),a=e("div","km-image-viewer-container",[o]),s=this.viewer=e("div","km-image-viewer",[i,a]);this.hotkeyHandler=this.hotkeyHandler.bind(this),t(n,"click",this.close.bind(this)),t(r,"click",this.viewSource.bind(this)),t(o,"click",this.zoomImage.bind(this)),t(s,"contextmenu",this.toggleToolbar.bind(this)),t(document,"keydown",this.hotkeyHandler)},dispose:function(){this.close(),document.removeEventListener("remove",this.hotkeyHandler)},hotkeyHandler:function(e){this.actived&&e.keyCode===i.esc&&this.close()},toggleToolbar:function(e){e&&e.preventDefault(),this.toolbar.classList.toggle("hidden")},zoomImage:function(e){var t=this.image;"boolean"==typeof e?e&&n(t,"limited"):t.classList.toggle("limited")},viewSource:function(e){window.open(this.image.src)},open:function(e){var t=document.querySelector("input");t&&(t.focus(),t.blur()),this.image.src=e,this.zoomImage(!0),document.body.appendChild(this.viewer),this.actived=!0},close:function(){this.image.src="",document.body.removeChild(this.viewer),this.actived=!1}});return{init:function(){this.viewer=new r},events:{"normal.dblclick":function(e){var t=e.kityEvent.targetShape;"Image"===t.__KityClassName&&t.url&&this.viewer.open(t.url)}}}})}},t[50]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19),t.r(21),t.r(9)),a=t.r(20),s=t.r(27);a.register("image",function(){return{defaultOptions:{maxImageWidth:200,maxImageHeight:200},commands:{image:o.createClass("ImageCommand",{base:i,execute:function(e,t,n){var r=e.getSelectedNodes();!function(e,t){var n=document.createElement("img");n.onload=function(){t(n.width,n.height)},n.onerror=function(){t(null)},n.src=e}(t,function(o,i){r.forEach(function(r){var a=function(e,t,n,r){var o=e/t;return e>n&&o>n/r?t=(e=n)/o:t>r&&(e=(t=r)*o),{width:0|e,height:0|t}}(o,i,e.getOption("maxImageWidth"),e.getOption("maxImageHeight"));r.setData("image",t),r.setData("imageTitle",t&&n),r.setData("imageSize",t&&a),r.render()}),e.fire("saveScene"),e.layout(300),setTimeout(()=>{e.fire("contentchange")},300)})},queryState:function(e){var t=e.getSelectedNodes(),n=0;return 0===t.length?-1:(t.forEach(function(e){if(e&&e.getData("image"))return n=0,!1}),n)},queryValue:function(e){var t=e.getSelectedNode();return{url:t.getData("image"),title:t.getData("imageTitle")}}})},renderers:{top:o.createClass("ImageRenderer",{base:s,create:function(e){return new o.Image(e.getData("image"))},shouldRender:function(e){return e.getData("image")},update:function(e,t,n){var r=t.getData("image"),i=t.getData("imageTitle"),a=t.getData("imageSize"),s=t.getStyle("space-top");if(a){i&&e.node.setAttributeNS("http://www.w3.org/1999/xlink","title",i);var c=n.cx-a.width/2,u=n.y-a.height-s;return e.setUrl(r).setX(0|c).setY(0|u).setWidth(0|a.width).setHeight(0|a.height),new o.Box(0|c,0|u,0|a.width,0|a.height)}}})}}})}},t[51]={value:function(e,n,r){t.r(17),t.r(33),t.r(15),t.r(19),t.r(21),t.r(9);var o=t.r(20);t.r(27);o.register("KeyboardModule",function(){var e=Math.min,t=Math.max,n=(Math.abs,Math.sqrt);Math.exp;function r(e){var t,n=[];e.traverse(function(e){(t=e.getLayoutBox()).width&&t.height&&n.push({left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height,width:t.width,height:t.height,node:e})});for(var r=0;r<n.length;r++)i(n,r)}function o(r,o){var i,a,s,c,u,l,h;i=e(r.left,o.left),a=t(r.right,o.right),s=e(r.top,o.top),c=t(r.bottom,o.bottom),u=a-i-r.width-o.width,l=c-s-r.height-o.height,h=u<0?l:l<0?u:n(u*u+l*l);var d=r.node,f=o.node;return d.parent==f.parent&&(h/=10),f.parent==d&&(h/=5),h}function i(e,t){for(var n,r,i=e[t],a={},s=0;s<e.length;s++)s!=t&&(r=o(n=e[s],i),n.right<i.left&&(!a.left||r<a.left.dist)&&(a.left={dist:r,node:n.node}),n.left>i.right&&(!a.right||r<a.right.dist)&&(a.right={dist:r,node:n.node}),n.bottom<i.top&&(!a.top||r<a.top.dist)&&(a.top={dist:r,node:n.node}),n.top>i.bottom&&(!a.down||r<a.down.dist)&&(a.down={dist:r,node:n.node}));i.node._nearestNodes={right:a.right&&a.right.node||null,top:a.top&&a.top.node||null,left:a.left&&a.left.node||null,down:a.down&&a.down.node||null}}return{events:{layoutallfinish:function(){r(this.getRoot())},"normal.keydown readonly.keydown":function(e){var t=this;["left","right","up","down"].forEach(function(n){e.isShortcutKey(n)&&(!function(e,t){var n=e.getSelectedNode();if(!n)return e.select(e.getRoot()),void r(e.getRoot());n._nearestNodes||r(e.getRoot());var o=n._nearestNodes[t];o&&e.select(o,!0)}(t,"up"==n?"top":n),e.preventDefault())})}}}})}},t[52]={value:function(e,n,r){var o=t.r(17),i=t.r(9),a=t.r(20),s=o.createClass("LayoutCommand",{base:i,execute:function(e,t){e.getSelectedNodes().forEach(function(e){e.layout(t)})},queryValue:function(e){var t=e.getSelectedNode();if(t)return t.getData("layout")},queryState:function(e){return e.getSelectedNode()?0:-1}}),c=o.createClass("ResetLayoutCommand",{base:i,execute:function(e){var t=e.getSelectedNodes();t.length||(t=[e.getRoot()]),t.forEach(function(e){e.traverse(function(e){e.resetLayoutOffset(),e.isRoot()||e.setData("layout",null)})}),e.layout(300)},enableReadOnly:!0});a.register("LayoutModule",{commands:{layout:s,resetlayout:c},contextmenu:[{command:"resetlayout"},{divider:!0}],commandShortcutKeys:{resetlayout:"Ctrl+Shift+L"}})}},t[53]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19),t.r(21)),a=t.r(9),s=t.r(20),c=(t.r(27),o.createClass("AppendChildCommand",{base:a,execute:function(e,t){var n=e.getSelectedNode();if(!n)return null;var r=e.createNode(t,n);e.select(r,!0),n.isExpanded()?r.render():(n.expand(),n.renderTree()),e.layout(600)},queryState:function(e){return e.getSelectedNode()?0:-1}})),u=o.createClass("AppendSiblingCommand",{base:a,execute:function(e,t){var n=e.getSelectedNode(),r=n.parent;if(!r)return e.execCommand("AppendChildNode",t);var o=e.createNode(t,r,n.getIndex()+1);o.setGlobalLayoutTransform(n.getGlobalLayoutTransform()),e.select(o,!0),o.render(),e.layout(600)},queryState:function(e){return e.getSelectedNode()?0:-1}}),l=o.createClass("RemoverNodeCommand",{base:a,execute:function(e){var t=e.getSelectedNodes(),n=i.getCommonAncestor.apply(null,t),r=t[0].getIndex();if(t.forEach(function(t){t.isRoot()||e.removeNode(t)}),1==t.length){var o=n.children[r-1]||n.children[r];e.select(o||n||e.getRoot(),!0)}else e.select(n||e.getRoot(),!0);e.layout(600)},queryState:function(e){var t=e.getSelectedNode();return t&&!t.isRoot()?0:-1}}),h=o.createClass("AppendParentCommand",{base:a,execute:function(e,t){var n=e.getSelectedNodes();n.sort(function(e,t){return e.getIndex()-t.getIndex()});var r=n[0].parent,o=e.createNode(t,r,n[0].getIndex());n.forEach(function(e){o.appendChild(e)}),o.setGlobalLayoutTransform(n[n.length>>1].getGlobalLayoutTransform()),e.select(o,!0),e.layout(600)},queryState:function(e){var t=e.getSelectedNodes();if(!t.length)return-1;var n=t[0].parent;if(!n)return-1;for(var r=1;r<t.length;r++)if(t[r].parent!=n)return-1;return 0}});s.register("NodeModule",function(){return{commands:{AppendChildNode:c,AppendSiblingNode:u,RemoveNode:l,AppendParentNode:h},commandShortcutKeys:{appendsiblingnode:"normal::Enter",appendchildnode:"normal::Insert|Tab",appendparentnode:"normal::Shift+Tab|normal::Shift+Insert",removenode:"normal::Del|Backspace"}}})}},t[54]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19),t.r(21),t.r(9)),a=t.r(20),s=t.r(27);a.register("NoteModule",function(){var e=o.createClass("NoteCommand",{base:i,execute:function(e,t){var n=e.getSelectedNode();n.setData("note",t),n.render(),n.getMinder().layout(300)},queryState:function(e){return 1===e.getSelectedNodes().length?0:-1},queryValue:function(e){var t=e.getSelectedNode();return t&&t.getData("note")}}),t=o.createClass("NoteIcon",{base:o.Group,constructor:function(){this.callBase(),this.width=16,this.height=17,this.rect=new o.Rect(16,17,.5,-8.5,2).fill("transparent"),this.path=(new o.Path).setPathData("M9,9H3V8h6L9,9L9,9z M9,7H3V6h6V7z M9,5H3V4h6V5z M8.5,11H2V2h8v7.5 M9,12l2-2V1H1v11").setTranslate(2.5,-6.5),this.addShapes([this.rect,this.path]),this.on("mouseover",function(){this.rect.fill("rgba(255, 255, 200, .8)")}).on("mouseout",function(){this.rect.fill("transparent")}),this.setStyle("cursor","pointer")}});return{renderers:{right:o.createClass("NoteIconRenderer",{base:s,create:function(e){var n=new t;return n.on("mousedown",function(t){t.preventDefault(),e.getMinder().fire("editnoterequest")}),n.on("mouseover",function(){e.getMinder().fire("shownoterequest",{node:e,icon:n})}),n.on("mouseout",function(){e.getMinder().fire("hidenoterequest",{node:e,icon:n})}),n},shouldRender:function(e){return e.getData("note")},update:function(e,t,n){var r=n.right+t.getStyle("space-left"),i=n.cy;return e.path.fill(t.getStyle("color")),e.setTranslate(r,i),new o.Box(r,Math.round(i-e.height/2),e.width,e.height)}})},commands:{note:e}}})}},t[55]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=(t.r(19),t.r(21),t.r(9),t.r(20)),s=t.r(27),c=o.createClass("OutlineRenderer",{base:s,create:function(e){var t=(new o.Rect).setId(i.uuid("node_outline"));return this.bringToBack=!0,t},update:function(e,t,n){var r=t.getStyle("shape"),i=t.getStyle("padding-left"),a=t.getStyle("padding-right"),s=t.getStyle("padding-top"),c=t.getStyle("padding-bottom"),u={x:n.x-i,y:n.y-s,width:n.width+i+a,height:n.height+s+c},l=t.getStyle("radius");if(r&&"circle"==r){var h=Math.pow;l=(0,Math.round)(Math.sqrt(h(u.width,2)+h(u.height,2))/2),u.x=n.cx-l,u.y=n.cy-l,u.width=2*l,u.height=2*l}var d=t.isSelected()?t.getMinder().isFocused()?"selected-":"blur-selected-":"";return e.setPosition(u.x,u.y).setSize(u.width,u.height).setRadius(l).fill(t.getData("background")||t.getStyle(d+"background")||t.getStyle("background")).stroke(t.getStyle(d+"stroke"||!1),t.getStyle(d+"stroke-width")),new o.Box(u)}}),u=o.createClass("ShadowRenderer",{base:s,create:function(e){return this.bringToBack=!0,new o.Rect},shouldRender:function(e){return e.getStyle("shadow")},update:function(e,t,n){e.setPosition(n.x+4,n.y+5).fill(t.getStyle("shadow"));var r=t.getStyle("shape");if(r){if("circle"==r){var o=Math.max(n.width,n.height);e.setSize(o,o),e.setRadius(o/2)}}else e.setSize(n.width,n.height),e.setRadius(t.getStyle("radius"))}}),l=new o.Marker;l.setWidth(10),l.setHeight(12),l.setRef(0,0),l.setViewBox(-6,-4,8,10),l.addShape((new o.Path).setPathData("M-5-3l5,3,-5,3").stroke("#33ffff"));var h=/wire/.test(window.location.href),d=o.createClass("WireframeRenderer",{base:s,create:function(){var e=new o.Group,t=this.oxy=(new o.Path).stroke("#f6f").setPathData("M0,-50L0,50M-50,0L50,0"),n=this.wireframe=(new o.Rect).stroke("lightgreen"),r=this.vectorIn=(new o.Path).stroke("#66ffff"),i=this.vectorOut=(new o.Path).stroke("#66ffff");return r.setMarker(l,"end"),i.setMarker(l,"end"),e.addShapes([t,n,r,i])},shouldRender:function(){return h},update:function(e,t,n){this.wireframe.setPosition(n.x,n.y).setSize(n.width,n.height);var r=t.getVertexIn(),o=t.getVertexOut(),i=t.getLayoutVectorIn().normalize(30),a=t.getLayoutVectorOut().normalize(30);this.vectorIn.setPathData(["M",r.offset(i.reverse()),"L",r]),this.vectorOut.setPathData(["M",o,"l",a])}});a.register("OutlineModule",function(){return{events:h?{ready:function(){this.getPaper().addResource(l)},layoutallfinish:function(){this.getRoot().traverse(function(e){e.getRenderer("WireframeRenderer").update(null,e,e.getContentBox())})}}:null,renderers:{outline:c,outside:[u,d]}}})}},t[56]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=(t.r(19),t.r(21),t.r(9)),s=t.r(20),c=t.r(27);s.register("PriorityModule",function(){var e=[null,["#FF1200","#840023"],["#0074FF","#01467F"],["#00AF00","#006300"],["#FF962E","#B25000"],["#A464FF","#4720C4"],["#A3A3A3","#515151"],["#A3A3A3","#515151"],["#A3A3A3","#515151"],["#A3A3A3","#515151"]],t="M20,10c0,3.866-3.134,7-7,7H7c-3.866,0-7-3.134-7-7V7c0-3.866,3.134-7,7-7h6c3.866,0,7,3.134,7,7V10z",n=o.createClass("PriorityIcon",{base:o.Group,constructor:function(){this.callBase(),this.setSize(20),this.create(),this.setId(i.uuid("node_priority"))},setSize:function(e){this.width=this.height=e},create:function(){var e,n,r;(new o.Path).setPathData(t).fill("white"),e=(new o.Path).setPathData("M0,13c0,3.866,3.134,7,7,7h6c3.866,0,7-3.134,7-7V7H0V13z").setTranslate(.5,.5),n=(new o.Path).setPathData(t).setOpacity(.8).setTranslate(.5,.5),r=(new o.Text).setX(this.width/2-.5).setY(this.height/2).setTextAnchor("middle").setVerticalAlign("middle").setFontItalic(!0).setFontSize(12).fill("white"),this.addShapes([e,n,r]),this.mask=n,this.back=e,this.number=r},setValue:function(t){var n=this.back,r=this.mask,o=this.number,i=e[t];i&&(n.fill(i[1]),r.fill(i[0])),o.setContent("P"+(t-1))}});return{commands:{priority:o.createClass("SetPriorityCommand",{base:a,execute:function(e,t){for(var n=e.getSelectedNodes(),r=0;r<n.length;r++)n[r].setData("priority",t||null).render();e.layout()},queryValue:function(e){for(var t,n=e.getSelectedNodes(),r=0;r<n.length&&!(t=n[r].getData("priority"));r++);return t||null},queryState:function(e){return e.getSelectedNodes().length?0:-1}})},renderers:{left:o.createClass("PriorityRenderer",{base:c,create:function(e){return new n},shouldRender:function(e){return e.getData("priority")},update:function(e,t,n){var r,i,a=t.getData("priority"),s=t.getStyle("space-left");return e.setValue(a),r=n.left-e.width-s,i=-e.height/2,e.setTranslate(r,i),new o.Box({x:r,y:i,width:e.width,height:e.height})}})}}})}},t[57]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=(t.r(19),t.r(21),t.r(9)),s=t.r(20),c=t.r(27);s.register("ProgressModule",function(){var e=(new o.LinearGradient).pipe(function(e){e.setStartPosition(0,0),e.setEndPosition(0,1),e.addStop(0,"#fff"),e.addStop(1,"#ccc")});this.getPaper().addResource(e);var t=o.createClass("ProgressIcon",{base:o.Group,constructor:function(e){this.callBase(),this.setSize(20),this.create(),this.setValue(e),this.setId(i.uuid("node_progress")),this.translate(.5,.5)},setSize:function(e){this.width=this.height=e},create:function(){var t,n,r,i,a,s,c,u;t=new o.Circle(9).fill("#FFED83"),n=new o.Pie(9,0).fill("#43BC00"),r=(new o.Path).setPathData("M10,3c4.418,0,8,3.582,8,8h1c0-5.523-3.477-10-9-10S1,5.477,1,11h1C2,6.582,5.582,3,10,3z").setTranslate(-10,-10).fill("#8E8E8E"),i=(new o.Path).setTranslate(-10,-10).setPathData("M10,0C4.477,0,0,4.477,0,10c0,5.523,4.477,10,10,10s10-4.477,10-10C20,4.477,15.523,0,10,0zM10,18c-4.418,0-8-3.582-8-8s3.582-8,8-8s8,3.582,8,8S14.418,18,10,18z").fill(e),a=(new o.Path).setTranslate(-10,-10).setPathData("M15.812,7.896l-6.75,6.75l-4.5-4.5L6.25,8.459l2.812,2.803l5.062-5.053L15.812,7.896z").fill("#EEE"),s=(new o.Path).setTranslate(-10,-10).setPathData("M5,5l.7,-.7l4.3,4.3l4.3,-4.3l1.4,1.4l-4.3,4.3l4.3,4.3l-1.4,1.4l-4.3,-4.3l-4.3,4.3l-1.4,-1.4l4.3,-4.3l-4.3,-4.3l.7,-.7z").fill("#d81e06"),c=new o.Pie(9,0).fill("red"),u=(new o.Path).setTranslate(-10,-10).setScale(.02).setPathData("M747.3152 415.6416a256.0512 256.0512 0 0 0-489.472 96.768H341.504a170.6496 170.6496 0 0 1 327.6288-58.624l-115.0976 20.9408 227.84 116.736 48.2816-251.392-82.8416 75.5712zM0 512C0 229.2224 229.1712 0 512 0c282.7776 0 512 229.1712 512 512 0 282.7776-229.1712 512-512 512-282.7776 0-512-229.1712-512-512z").fill("#BE96F9"),this.addShapes([t,n,r,u,a,s,c,i]),this.pie=n,this.check=a,this.fail=s,this.block=c,this.skip=u},setValue:function(e){4!==e?this.pie.setAngle(-360*(e-1)/8).fill("#43BC00"):this.pie.setAngle(360).fill("#fff"),this.check.setVisible(9==e),this.fail.setVisible(1==e),this.block.setVisible(5==e),this.skip.setVisible(4==e),5==e&&this.block.setAngle(-180)}});return{commands:{progress:o.createClass("ProgressCommand",{base:a,execute:function(e,t){for(var n=e.getSelectedNodes(),r=0;r<n.length;r++)n[r].setData("progress",t||null).render();e.layout()},queryValue:function(e){for(var t,n=e.getSelectedNodes(),r=0;r<n.length&&!(t=n[r].getData("progress"));r++);return t||null},queryState:function(e){return e.getSelectedNodes().length?0:-1}})},renderers:{left:o.createClass("ProgressRenderer",{base:c,create:function(e){return new t},shouldRender:function(e){return e.getData("progress")},update:function(e,t,n){var r,i,a=t.getData("progress"),s=t.getStyle("space-left");return e.setValue(a),r=n.left-e.width-s,i=-e.height/2,e.setTranslate(r+e.width/2,i+e.height/2),new o.Box(r,i,e.width,e.height)}})}}})}},t[58]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19)),a=(t.r(21),t.r(9)),s=t.r(20),c=t.r(27);s.register("Resource",function(){var e,t,n,r,s,u,l,h,d,f,p,g=(p=4*(1<<30),e=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],s=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479],f=function(e){return e<0&&(e+=p),("00000000"+e.toString(16)).slice(-8)},u=[[16,50,84,118,152,186,220,254],[174,132,249,109,193,32,123,53],[139,12,37,223,234,99,23,73],[151,19,205,235,98,165,4,143],[9,117,66,250,30,203,134,211],[194,166,176,56,212,87,239,145],[92,241,222,164,112,54,41,184],[189,231,28,147,5,79,104,162],[246,158,59,128,44,125,65,90],[42,72,103,81,191,233,195,13]],l=function(e,t,n){var r=h[e]^h[t];h[e]=r>>>n|r<<32-n},t=function(e,t,o,i,a){var c=r+u[n][e]%16,f=r+(u[n][e]>>4);o=4+o%4,i=8+i%4,a=12+a%4,h[t%=4]+=h[o]+(d[c]^s[f%16]),l(a,t,16),h[i]+=h[a],l(o,i,12),h[t]+=h[o]+(d[f]^s[c%16]),l(a,t,8),h[i]+=h[a],l(o,i,7)},function(o,i){var a,c,u,l,p,g,m,v;for(i instanceof Array&&4===i.length||(i=[0,0,0,0]),c=e.slice(0),a=s.slice(0,8),n=0;n<4;n+=1)a[n]^=i[n];if(p=(u=16*o.length)%512>446||u%512==0?0:u,u%512==432)o+="老";else{for(o+="耀";o.length%32!=27;)o+="\0";o+=""}for(d=[],v=0;v<o.length;v+=2)d.push(65536*o.charCodeAt(v)+o.charCodeAt(v+1));for(d.push(0),d.push(u),g=d.length-16,m=0,r=0;r<d.length;r+=16){for(m+=512,l=r===g?p:Math.min(u,m),(h=c.concat(a))[12]^=l,h[13]^=l,n=0;n<10;n+=1)for(v=0;v<8;v+=1)v<4?t(v,v,v,v,v):t(v,v,v+1,v+2,v+3);for(v=0;v<8;v+=1)c[v]^=i[v%4]^h[v]^h[v+8]}return c.map(f).join("")}),m=[51,303,75,200,157,0,26,254].map(function(e){return 75===e?o.Color.createHSL(e,25,85):o.Color.createHSL(e,100,85)});o.extendClass(i,{getHashCode:function(e){var t,n=1315423911;for(t=(e=g(e)).length-1;t>=0;t--)n^=(n<<5)+e.charCodeAt(t)+(n>>2);return 2147483647&n},getResourceColor:function(e){var t,n=this._getResourceColorIndexMapping();return Object.prototype.hasOwnProperty.call(n,e)||(t=this._getNextResourceColorIndex(),n[e]=t),m[n[e]]||o.Color.createHSL(Math.floor(this.getHashCode(e)/2147483647*359),100,85)},getUsedResource:function(){var e,t=this._getResourceColorIndexMapping(),n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},_getNextResourceColorIndex:function(){var e,t,n,r=this._getResourceColorIndexMapping();for(e in t=[],r)Object.prototype.hasOwnProperty.call(r,e)&&t.push(r[e]);for(n=0;n<m.length;n++)if(!~t.indexOf(n))return n;return-1},_getResourceColorIndexMapping:function(){return this._resourceColorMapping||(this._resourceColorMapping={})}});var v=o.createClass("ResourceCommand",{base:a,execute:function(e,t){var n=e.getSelectedNodes();"string"==typeof t&&(t=[t]),n.forEach(function(e){e.setData("resource",t).render()}),e.layout(200)},queryValue:function(e){var t=[];return e.getSelectedNodes().forEach(function(e){var n=e.getData("resource");n&&n.forEach(function(e){~t.indexOf(e)||t.push(e)})}),t},queryState:function(e){return e.getSelectedNode()?0:-1}}),y=o.createClass("ResourceOverlay",{base:o.Group,constructor:function(){var e,t;this.callBase(),t=this.rect=(new o.Rect).setRadius(4),e=this.text=(new o.Text).setFontSize(12).setVerticalAlign("middle"),this.addShapes([t,e])},setValue:function(e,t){var n,r,o;n=this.text,e==this.lastResourceName?r=this.lastBox:(n.setContent(e),r=n.getBoundaryBox(),this.lastResourceName=e,this.lastBox=r),n.setX(8).fill(t.dec("l",70)),(o=this.rect).setPosition(0,r.y-4),this.width=Math.round(r.width+16),this.height=Math.round(r.height+8),o.setSize(this.width,this.height),o.fill(t)}});return{commands:{resource:v},renderers:{right:o.createClass("ResourceRenderer",{base:c,create:function(e){return this.overlays=[],new o.Group},shouldRender:function(e){return e.getData("resource")&&e.getData("resource").length},update:function(e,t,n){var r=t.getStyle("space-right"),i=this.overlays,a=t.getData("resource").filter(function(e){return null!==e&&void 0!==e});if(0!==a.length){var s,c,u,l=t.getMinder();for(u=0,s=0;s<a.length;s++)u+=r,(c=i[s])||(c=new y,i.push(c),e.addShape(c)),c.setVisible(!0),c.setValue(a[s],l.getResourceColor(a[s])),c.setTranslate(u,-1),u+=c.width;for(;c=i[s++];)c.setVisible(!1);return e.setTranslate(n.right,0),new o.Box({x:n.right,y:Math.round(-i[0].height/2),width:u,height:i[0].height})}}})}}})}},t[59]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19),t.r(21),t.r(9),t.r(20));t.r(27);i.register("Select",function(){var e,t,n,r=this,i=r.getRenderContainer(),a=(e=null,t=new o.Path,n=!1,{selectStart:function(t){if(!t.originEvent.button&&!t.originEvent.altKey)return e?this.selectEnd():void(e=t.getPosition(i).round())},selectMove:function(a){if("textedit"!=r.getStatus()&&e){var s=e,c=a.getPosition(i);if(!n){if(o.Vector.fromPoints(s,c).length()<10)return;n=!0,i.addShape(t),t.fill(r.getStyle("marquee-background")).stroke(r.getStyle("marquee-stroke")).setOpacity(.8).getDrawer().clear()}var u=new o.Box(s.x,s.y,c.x-s.x,c.y-s.y),l=[];u.left=Math.round(u.left),u.top=Math.round(u.top),u.right=Math.round(u.right),u.bottom=Math.round(u.bottom),t.getDrawer().pipe(function(){this.clear(),this.moveTo(u.left,u.top),this.lineTo(u.right,u.top),this.lineTo(u.right,u.bottom),this.lineTo(u.left,u.bottom),this.close()}),r.getRoot().traverse(function(e){e.getLayoutBox().intersect(u).isEmpty()||l.push(e)}),r.select(l,!0),window.getSelection().removeAllRanges()}},selectEnd:function(r){e&&(e=null),n&&(t.fadeOut(200,"ease",0,function(){t.remove&&t.remove()}),n=!1)}}),s=null,c=null;return{init:function(){window.addEventListener("mouseup",function(){a.selectEnd()})},events:{mousedown:function(e){var t=e.getTargetNode();t?e.isShortcutKey("Ctrl")?this.toggleSelect(t):t.isSelected()?this.isSingleSelect()||(s=t,c=e.getPosition()):this.select(t,!0):(this.removeAllSelectedNodes(),a.selectStart(e),this.setStatus("normal"))},mousemove:a.selectMove,mouseup:function(e){var t=e.getTargetNode();if(t&&t==s){var n=e.getPosition();o.Vector.fromPoints(c,n).length()<1&&this.select(s,!0),s=null}a.selectEnd(e)},"normal.keydown":function(e){if(e.isShortcutKey("ctrl+a")){var t=[];this.getRoot().traverse(function(e){t.push(e)}),this.select(t,!0),e.preventDefault()}}}}})}},t[60]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19),t.r(21),t.r(9)),a=t.r(20);t.r(27);a.register("StyleModule",function(){var e=["font-size","font-family","font-weight","font-style","background","color","text-decoration"],t=null;function n(t){for(var n=t.getData(),r=0;r<e.length;r++)if(e[r]in n)return!0}return{commands:{copystyle:o.createClass("CopyStyleCommand",{base:i,execute:function(n){var r=n.getSelectedNode().getData();return t={},e.forEach(function(e){e in r?t[e]=r[e]:(t[e]=null,delete t[e])}),t},queryState:function(e){var t=e.getSelectedNodes();return 1!==t.length?-1:n(t[0])?0:-1}}),pastestyle:o.createClass("PastStyleCommand",{base:i,execute:function(e){return e.getSelectedNodes().forEach(function(e){for(var n in t)t.hasOwnProperty(n)&&e.setData(n,t[n])}),e.renderNodeBatch(e.getSelectedNodes()),e.layout(300),t},queryState:function(e){return t&&e.getSelectedNodes().length?0:-1}}),clearstyle:o.createClass("ClearStyleCommand",{base:i,execute:function(n){return n.getSelectedNodes().forEach(function(t){e.forEach(function(e){t.setData(e)})}),n.renderNodeBatch(n.getSelectedNodes()),n.layout(300),t},queryState:function(e){var t=e.getSelectedNodes();if(!t.length)return-1;for(var r=0;r<t.length;r++)if(n(t[r]))return 0;return-1}})}}})}},t[61]={value:function(e,n,r){var o=t.r(17),i=t.r(33),a=(t.r(19),t.r(21)),s=t.r(9),c=t.r(20),u=t.r(27),l={safari:{"微软雅黑,Microsoft YaHei":-.17,"楷体,楷体_GB2312,SimKai":-.1,"隶书, SimLi":-.1,"comic sans ms":-.23,"impact,chicago":-.15,"times new roman":-.1,"arial black,avant garde":-.17,default:0},ie:{10:{"微软雅黑,Microsoft YaHei":-.17,"comic sans ms":-.17,"impact,chicago":-.08,"times new roman":.04,"arial black,avant garde":-.17,default:-.15},11:{"微软雅黑,Microsoft YaHei":-.17,"arial,helvetica,sans-serif":-.17,"comic sans ms":-.17,"impact,chicago":-.08,"times new roman":.04,"sans-serif":-.16,"arial black,avant garde":-.17,default:-.15}},edge:{"微软雅黑,Microsoft YaHei":-.15,"arial,helvetica,sans-serif":-.17,"comic sans ms":-.17,"impact,chicago":-.08,"sans-serif":-.16,"arial black,avant garde":-.17,default:-.15},sg:{"微软雅黑,Microsoft YaHei":-.15,"arial,helvetica,sans-serif":-.05,"comic sans ms":-.22,"impact,chicago":-.16,"times new roman":-.03,"arial black,avant garde":-.22,default:-.15},chrome:{Mac:{"andale mono":-.05,"comic sans ms":-.3,"impact,chicago":-.13,"times new roman":-.1,"arial black,avant garde":-.17,default:0},Win:{"微软雅黑,Microsoft YaHei":-.15,"arial,helvetica,sans-serif":-.02,"arial black,avant garde":-.2,"comic sans ms":-.2,"impact,chicago":-.12,"times new roman":-.02,default:-.15},Lux:{"andale mono":-.05,"comic sans ms":-.3,"impact,chicago":-.13,"times new roman":-.1,"arial black,avant garde":-.17,default:0}},firefox:{Mac:{"微软雅黑,Microsoft YaHei":-.2,"宋体,SimSun":.05,"comic sans ms":-.2,"impact,chicago":-.15,"arial black,avant garde":-.17,"times new roman":-.1,default:.05},Win:{"微软雅黑,Microsoft YaHei":-.16,"andale mono":-.17,"arial,helvetica,sans-serif":-.17,"comic sans ms":-.22,"impact,chicago":-.23,"times new roman":-.22,"sans-serif":-.22,"arial black,avant garde":-.17,default:-.16},Lux:{"宋体,SimSun":-.2,"微软雅黑,Microsoft YaHei":-.2,"黑体, SimHei":-.2,"隶书, SimLi":-.2,"楷体,楷体_GB2312,SimKai":-.2,"andale mono":-.2,"arial,helvetica,sans-serif":-.2,"comic sans ms":-.2,"impact,chicago":-.2,"times new roman":-.2,"sans-serif":-.2,"arial black,avant garde":-.2,default:-.16}}},h=o.createClass("TextRenderer",{base:u,create:function(){return(new o.Group).setId(i.uuid("node_text"))},update:function(e,t){function n(e){return t.getData(e)||t.getStyle(e)}var r,i=t.getText(),a=i?i.split("\n"):[" "],s=t.getStyle("line-height"),c=n("font-size"),u=n("font-family")||"default",h=-(s*c*a.length-(s-1)*c)/2,d=o.Browser;d.chrome||d.opera||d.bd||"chrome"===d.lb?r=l.chrome[d.platform][u]:d.gecko?r=l.firefox[d.platform][u]:d.sg?r=l.sg[u]:d.safari?r=l.safari[u]:d.ie?r=l.ie[d.version][u]:d.edge?r=l.edge[u]:d.lb&&(r=.9),e.setTranslate(0,(r||0)*c);var f=new o.Box,p=Math.round;this.setTextStyle(t,e);var g,m,v,y=a.length,b=e.getItems().length;if(y<b)for(g=y;e.getItem(g);)e.removeItem(g);else if(y>b)for(var w=y-b;w--;)m=(new o.Text).setAttr("text-rendering","inherit"),o.Browser.ie||o.Browser.edge?m.setVerticalAlign("top"):m.setAttr("dominant-baseline","text-before-edge"),e.addItem(m);for(g=0;v=a[g],m=e.getItem(g);g++)m.setContent(v),(o.Browser.ie||o.Browser.edge)&&m.fixPosition();this.setTextStyle(t,e);var x=t.getText()+["font-size","font-name","font-weight","font-style","text-decoration"].map(n).join("/");return t._currentTextHash==x&&t._currentTextGroupBox?t._currentTextGroupBox:(t._currentTextHash=x,function(){e.eachItem(function(e,t){var n=h+e*c*s;t.setY(n);var r=t.getBoundaryBox();f=f.merge(new o.Box(0,n,r.height&&r.width||1,c))});var n=new o.Box(p(f.x),p(f.y),p(f.width),p(f.height));return t._currentTextGroupBox=n,n})},setTextStyle:function(e,t){h._styleHooks.forEach(function(n){n(e,t)})}}),d=o.createClass({base:s,execute:function(e,t){var n=e.getSelectedNode();n&&(n.setText(t),n.render(),e.layout())},queryState:function(e){return 1==e.getSelectedNodes().length?0:-1},queryValue:function(e){var t=e.getSelectedNode();return t?t.getText():null}});i.extend(h,{_styleHooks:[],registerStyleHook:function(e){h._styleHooks.push(e)}}),o.extendClass(a,{getTextGroup:function(){return this.getRenderer("TextRenderer").getRenderShape()}}),c.register("text",{commands:{text:d},renderers:{center:h}}),r.exports=h}},t[62]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19),t.r(21),t.r(9)),a=t.r(20),s=(t.r(27),o.createClass("ViewDragger",{constructor:function(e){this._minder=e,this._enabled=!1,this._bind();var t=this;this._minder.getViewDragger=function(){return t},this.setEnabled(!1)},isEnabled:function(){return this._enabled},setEnabled:function(e){var t=this._minder.getPaper();t.setStyle("cursor",e?"pointer":"default"),t.setStyle("cursor",e?"-webkit-grab":"default"),this._enabled=e},timeline:function(){return this._moveTimeline},move:function(e,t){this._minder;var n=this.getMovement().offset(e);this.moveTo(n,t)},moveTo:function(e,t){if(t){var n=this;return this._moveTimeline&&this._moveTimeline.stop(),this._moveTimeline=this._minder.getRenderContainer().animate(new o.Animator(this.getMovement(),e,function(e,t){n.moveTo(t)}),t,"easeOutCubic").timeline(),this._moveTimeline.on("finish",function(){n._moveTimeline=null}),this}this._minder.getRenderContainer().setTranslate(e.round()),this._minder.fire("viewchange")},getMovement:function(){var e=this._minder.getRenderContainer().transform.translate;return e?e[0]:new o.Point},getView:function(){var e=this._minder,t=e._lastClientSize||{width:e.getRenderTarget().clientWidth,height:e.getRenderTarget().clientHeight},n=this.getMovement(),r=new o.Box(0,0,t.width,t.height);return e.getPaper().getViewPortMatrix().inverse().translate(-n.x,-n.y).transformBox(r)},_bind:function(){var e=this,t=!1,n=null,r=null;function i(r){n&&(n=null,r.stopPropagation(),t&&(e.setEnabled(!1),t=!1,"hand"==e._minder.getStatus()&&e._minder.rollbackStatus()),e._minder.getPaper().setStyle("cursor","hand"==e._minder.getStatus()?"-webkit-grab":"default"),e._minder.fire("viewchanged"))}this._minder.on("normal.mousedown normal.touchstart inputready.mousedown inputready.touchstart readonly.mousedown readonly.touchstart",function(e){2==e.originEvent.button&&e.originEvent.preventDefault(),(e.getTargetNode()==this.getRoot()||2==e.originEvent.button||e.originEvent.altKey)&&(n=e.getPosition("view"),t=!0)}).on("normal.mousemove normal.touchmove readonly.mousemove readonly.touchmove inputready.mousemove inputready.touchmove",function(r){("touchmove"==r.type&&r.preventDefault(),t)&&(o.Vector.fromPoints(n,r.getPosition("view")).length()>10&&(this.setStatus("hand",!0),e._minder.getPaper().setStyle("cursor","-webkit-grabbing")))}).on("hand.beforemousedown hand.beforetouchstart",function(t){e.isEnabled()&&(n=t.getPosition("view"),t.stopPropagation(),e._minder.getPaper().setStyle("cursor","-webkit-grabbing"))}).on("hand.beforemousemove hand.beforetouchmove",function(t){if(n){r=t.getPosition("view");var i=o.Vector.fromPoints(n,r);e.move(i),t.stopPropagation(),t.preventDefault(),t.originEvent.preventDefault(),n=r}}).on("mouseup touchend",i),window.addEventListener("mouseup",i),this._minder.on("contextmenu",function(e){e.preventDefault()})}}));a.register("View",function(){return{init:function(){this._viewDragger=new s(this)},commands:{hand:o.createClass("ToggleHandCommand",{base:i,execute:function(e){"hand"!=e.getStatus()?e.setStatus("hand",!0):e.rollbackStatus(),this.setContentChanged(!1)},queryState:function(e){return"hand"==e.getStatus()?1:0},enableReadOnly:!0}),camera:o.createClass("CameraCommand",{base:i,execute:function(e,t){t=t||e.getRoot();var n=e.getPaper().getViewPort(),r=t.getRenderContainer().getRenderBox("view"),i=n.center.x-r.x-r.width/2,a=n.center.y-r.y,s=e._viewDragger,c=e.getOption("viewAnimationDuration");s.move(new o.Point(i,a),c),this.setContentChanged(!1)},enableReadOnly:!0}),move:o.createClass("MoveCommand",{base:i,execute:function(e,t){var n=e._viewDragger,r=e._lastClientSize,i=e.getOption("viewAnimationDuration");switch(t){case"up":n.move(new o.Point(0,r.height/2),i);break;case"down":n.move(new o.Point(0,-r.height/2),i);break;case"left":n.move(new o.Point(r.width/2,0),i);break;case"right":n.move(new o.Point(-r.width/2,0),i)}},enableReadOnly:!0})},events:{statuschange:function(e){this._viewDragger.setEnabled("hand"==e.currentStatus)},mousewheel:function(e){var t,n;if(!(e=e.originEvent).ctrlKey&&!e.shiftKey){"wheelDeltaX"in e?(t=e.wheelDeltaX||0,n=e.wheelDeltaY||0):(t=0,n=e.wheelDelta),this._viewDragger.move({x:t/2.5,y:n/2.5});var r=this;clearTimeout(this._mousewheeltimer),this._mousewheeltimer=setTimeout(function(){r.fire("viewchanged")},100),e.preventDefault()}},"normal.dblclick readonly.dblclick":function(e){e.kityEvent.targetShape instanceof o.Paper&&this.execCommand("camera",this.getRoot(),800)},"paperrender finishInitHook":function(){this.getRenderTarget()&&(this.execCommand("camera",null,0),this._lastClientSize={width:this.getRenderTarget().clientWidth,height:this.getRenderTarget().clientHeight})},resize:function(e){var t={width:this.getRenderTarget().clientWidth,height:this.getRenderTarget().clientHeight},n=this._lastClientSize;this._viewDragger.move(new o.Point((t.width-n.width)/2|0,(t.height-n.height)/2|0)),this._lastClientSize=t},"selectionchange layoutallfinish":function(e){var t=this.getSelectedNode(),n=this;if(o.Browser.edge&&this.fire("paperrender"),t){var r=this._viewDragger,i=r.timeline();if(i)i.on("finish",function(){n.fire("selectionchange")});else{var a=r.getView(),s=t.getLayoutBox(),c=0,u=0;s.right>a.right?c+=a.right-s.right-50:s.left<a.left&&(c+=a.left-s.left+50),s.bottom>a.bottom&&(u+=a.bottom-s.bottom-50),s.top<a.top&&(u+=a.top-s.top+50),(c||u)&&r.move(new o.Point(c,u),100)}}}}}})}},t[63]={value:function(e,n,r){var o=t.r(17),i=(t.r(33),t.r(19)),a=(t.r(21),t.r(9)),s=t.r(20);t.r(27);s.register("Zoom",function(){var e,t=this;function n(){var e=t._zoomValue>=100?"optimize-speed":"geometricPrecision";t.getRenderContainer().setAttr("text-rendering",e)}function r(t,r){t.getPaper().getViewPort();if(r){n();var i=t.getOption("zoomAnimationDuration");if(t.getRoot().getComplex()>200||!i)t._zoomValue=r,t.zoom(r),t.fire("viewchange");else{var a=new o.Animator({beginValue:t._zoomValue,finishValue:r,setter:function(e,t){e.zoom(t)}});t._zoomValue=r,e&&e.pause(),(e=a.start(t,i,"easeInOutSine")).on("finish",function(){t.fire("viewchange")})}t.fire("zoom",{zoom:r})}}o.extendClass(i,{zoom:function(e){var t=this.getPaper(),n=t.getViewPort();n.zoom=e/100,n.center={x:n.center.x,y:n.center.y},t.setViewPort(n),100==e&&function(e){var t=e.shapeNode,n=t.getCTM(),r=new o.Matrix(n.a,n.b,n.c,n.d,.5+(0|n.e),.5+(0|n.f));t.setAttribute("transform","matrix("+r.toString()+")")}(t)},getZoomValue:function(){return this._zoomValue}});var s=o.createClass("Zoom",{base:a,execute:r,queryValue:function(e){return e._zoomValue}});return{init:function(){this._zoomValue=100,this.setDefaultOptions({zoom:[10,20,50,100,200]}),n()},commands:{zoomin:o.createClass("ZoomInCommand",{base:a,execute:function(e){r(e,this.nextValue(e))},queryState:function(e){return+!this.nextValue(e)},nextValue:function(e){var t,n=e.getOption("zoom");for(t=0;t<n.length;t++)if(n[t]>e._zoomValue)return n[t];return 0},enableReadOnly:!0}),zoomout:o.createClass("ZoomOutCommand",{base:a,execute:function(e){r(e,this.nextValue(e))},queryState:function(e){return+!this.nextValue(e)},nextValue:function(e){var t,n=e.getOption("zoom");for(t=n.length-1;t>=0;t--)if(n[t]<e._zoomValue)return n[t];return 0},enableReadOnly:!0}),zoom:s},events:{"normal.mousewheel readonly.mousewheel":function(e){if(e.originEvent.ctrlKey||e.originEvent.metaKey){var t=e.originEvent.wheelDelta,n=this;o.Browser.mac&&(t=-t),Math.abs(t)>100&&(clearTimeout(this._wheelZoomTimeout),this._wheelZoomTimeout=setTimeout(function(){n.getPaper()._zoom;t<0?n.execCommand("zoomin"):t>0&&n.execCommand("zoomout")},5),e.originEvent.preventDefault())}}},commandShortcutKeys:{zoomin:"ctrl+=",zoomout:"ctrl+-"}}})}},t[64]={value:function(e,n,r){t.r(12).registerProtocol("json",r.exports={fileDescription:"KityMinder 格式",fileExtension:".km",dataType:"text",mineType:"application/json",encode:function(e){return JSON.stringify(e)},decode:function(e){return JSON.parse(e)}})}},t[65]={value:function(e,n,r){var o=/\r\n|\r|\n/,i="",a="\x3c!--Note--\x3e",s="\x3c!--/Note--\x3e";function c(e){return function e(t,n){var r=[];n=n||1;var o=function(e){var t="";for(;e--;)t+="#";return t}(n);r.push(o+" "+t.data.text);r.push(i);var c=t.data.note;if(c){var u=/^#/.test(c);u&&(r.push(a),c=c.replace(/^#+/gm,function(e){return o+e})),r.push(c),u&&r.push(s),r.push(i)}t.children&&t.children.forEach(function(t){r=r.concat(e(t,n+1))});return r}(e,1).join("\n")}function u(e,t){var n={data:{text:e,note:""}};return t&&(t.children?t.children.push(n):t.children=[n]),n}function l(e,t){e.data.note+=t+"\n"}function h(e){var t=/^(#+)?\s*(.*)$/.exec(e);return{level:t[1]&&t[1].length||null,content:t[2],noteStart:e==a,noteClose:e==s,codeBlock:/^\s*```/.test(e)}}function d(e){if(/\S/.test(e.data.note)){for(var t=e.data.note.split("\n");t.length&&!/\S/.test(t[0]);)t.shift();for(;t.length&&!/\S/.test(t[t.length-1]);)t.pop();e.data.note=t.join("\n")}else e.data.note=null,delete e.data.note;e.children&&e.children.forEach(d)}t.r(12).registerProtocol("markdown",r.exports={fileDescription:"Markdown/GFM 格式",fileExtension:".md",mineType:"text/markdown",dataType:"text",encode:function(e){return c(e.root)},decode:function(e){return function(e){var t,n,r,i,a,s,c,f={};t=(e=e.replace(/^(.+)\n={3,}/,function(e,t){return"# "+t})).split(o);for(var p=0;p<t.length;p++)(r=h(n=t[p])).noteClose?s=!1:r.noteStart?s=!0:(c=r.codeBlock?!c:c,s||c||!r.level||r.level>i+1?a&&l(a,n):(i=r.level,a=u(r.content,f[i-1]),f[i]=a));return d(f[1]),f[1]}(e)}})}},t[66]={value:function(e,n,r){var o=t.r(17),i=t.r(12),a=t.r(25),s=window.URL||window.webkitURL||window;function c(e,t){return new a(function(t,n){var r=document.createElement("img");r.onload=function(){t({element:this,x:e.x,y:e.y,width:e.width,height:e.height})},r.onerror=function(e){n(e)},r.crossOrigin="anonymous",r.src=e.url})}i.registerProtocol("png",r.exports={fileDescription:"PNG 图片",fileExtension:".png",mineType:"image/png",dataType:"base64",encode:function(e,t,n){var r=document.createElement("canvas"),i=r.getContext("2d"),u=t.getStyle("background").toString(),l=/url\(\"(.+)\"\)/.exec(u),h=o.Color.parse(u),d=function(e){var t,n,r,o,i,a,c=e.getPaper(),u=(c.container,e.getRenderContainer()),l=u.getRenderBox(),h=l.width+1,d=l.height+1;t=c.shapeNode.getAttribute("transform"),c.shapeNode.setAttribute("transform","translate(0.5, 0.5)"),u.translate(-l.x,-l.y),n=c.container.innerHTML,u.translate(l.x,l.y),c.shapeNode.setAttribute("transform",t),(r=document.createElement("div")).innerHTML=n,(o=r.querySelector("svg")).setAttribute("width",l.width+1),o.setAttribute("height",l.height+1),o.setAttribute("style",'font-family: Arial, "Microsoft Yahei","Heiti SC";'),(r=document.createElement("div")).appendChild(o),n=(n=(n=(n=r.innerHTML).replace(' xmlns="http://www.w3.org/2000/svg" xmlns:NS1="" NS1:ns1:xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:NS2="" NS2:xmlns:ns1=""',"")).replace(/&nbsp;|[\x00-\x1F\x7F-\x9F]/g,"")).replace(/NS\d+:title/gi,"xlink:title"),i=new Blob([n],{type:"image/svg+xml"}),a=s.createObjectURL(i);var f=[];return function t(n){var r=n.data;if(r.image){e.renderNode(n);var r=n.data,o=r.image,i=r.imageSize,a=n.getRenderBox("ImageRenderer",e.getRenderContainer()),s={url:o,width:i.width,height:i.height,x:-u.getBoundaryBox().x+a.x,y:-u.getBoundaryBox().y+a.y};f.push(s)}if("collapse"!==r.expandState)for(var c=n.getChildren(),l=0;l<c.length;l++)t(c[l])}(e.getRoot()),{width:h,height:d,dataUrl:a,xml:n,imagesInfo:f}}(t),f=n&&n.width&&n.width>d.width?n.width:d.width,p=n&&n.height&&n.height>d.height?n.height:d.height,g=n&&n.width&&n.width>d.width?(n.width-d.width)/2:0,m=n&&n.height&&n.height>d.height?(n.height-d.height)/2:0,v=d.dataUrl,y=d.imagesInfo,b=20;function w(e,t){e.save(),e.fillStyle=t,e.fillRect(0,0,r.width,r.height),e.restore()}function x(e,t,n,r,o,i){o&&i?e.drawImage(t,n+b,r+b,o,i):e.drawImage(t,n+b,r+b)}function k(e){return e.toDataURL("image/png")}function S(e){var t=e.map(function(e){return t=e,a(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.url+"?_="+Date.now(),!0),r.responseType="blob",r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var n=r.response,o=document.createElement("img");o.src=s.createObjectURL(n),o.onload=function(){s.revokeObjectURL(o.src),e({element:o,x:t.x,y:t.y,width:t.width,height:t.height})}}},r.send()});var t});return a.all(t)}function C(){return c({url:v}).then(function(e){return x(i,e.element,g,m,e.width,e.height),S(y)}).then(function(e){for(var t=0;t<e.length;t++)x(i,e[t].element,e[t].x+g,e[t].y+m,e[t].width,e[t].height);s.revokeObjectURL(v),document.body.appendChild(r);var n=k(r);return document.body.removeChild(r),n},function(e){alert("脑图的节点中包含跨域图片，导出的 png 中节点图片不显示，你可以替换掉这些跨域的图片并重试。"),s.revokeObjectURL(v),document.body.appendChild(r);var t=k(r);return document.body.removeChild(r),t})}return r.width=f+2*b,r.height=p+2*b,l?c({url:l[1]}).then(function(e){return w(i,i.createPattern(e.element,"repeat")),C()}):(w(i,h.toString()),C())}})}},t[67]={value:function(e,n,r){function o(e,t,n){e.style.visibility="hidden",function e(t,n,r){if(t&&"defs"!==t.tagName){if("transparent"===t.getAttribute("fill")&&t.setAttribute("fill","none"),t.getAttribute("marker-end")&&t.removeAttribute("marker-end"),n=n||0,r=r||0,t.getAttribute("transform")){var o=function(e,t){var n;try{n=t.getScreenCTM().inverse()}catch(e){throw new Error("Can not inverse source element' ctm.")}return n.multiply(e.getScreenCTM())}(t,t.parentElement);n-=o.e,r-=o.f,t.removeAttribute("transform")}switch(t.tagName.toLowerCase()){case"g":break;case"path":var i=t.getAttribute("d");return void(i&&(i=function(e,t){t instanceof Function||(t=function(){});for(var n=[],r=[],o=[],i=0,a=e.length;i<a;i++)switch(e[i]){case"M":case"L":case"T":case"S":case"A":case"C":case"H":case"V":case"Q":o.length&&(r.push(o.join("")),o=[]),","===r[r.length-1]&&r.pop(),r.length&&(t(r),n.push(r.join("")),r=[]),r.push(e[i]);break;case"Z":case"z":r.push(o.join(""),e[i]),t(r),n.push(r.join("")),o=[],r=[];break;case".":case"e":o.push(e[i]);break;case"-":"e"!==e[i-1]&&(o.length&&r.push(o.join(""),","),o=[]),o.push("-");break;case" ":case",":o.length&&(r.push(o.join(""),","),o=[]);break;default:/\d/.test(e[i])?o.push(e[i]):o.length?(r.push(o.join(""),e[i]),o=[]):(","===r[r.length-1]&&r.pop(),r.push(e[i])),i+1===a&&(o.length&&r.push(o.join("")),t(r),n.push(r.join("")),o=null,r=null)}return n.join("")}(i,function(e){switch(e[0]){case"V":e[1]=+e[1]-r;break;case"H":e[1]=+e[1]-n;break;case"M":case"L":case"T":e[1]=+e[1]-n,e[3]=+e[3]-r;break;case"Q":case"S":e[1]=+e[1]-n,e[3]=+e[3]-r,e[5]=+e[5]-n,e[7]=+e[7]-r;break;case"A":e[11]=+e[11]-n,e[13]=+e[13]-r;break;case"C":e[1]=+e[1]-n,e[3]=+e[3]-r,e[5]=+e[5]-n,e[7]=+e[7]-r,e[9]=+e[9]-n,e[11]=+e[11]-r}}),t.setAttribute("d",i),t.removeAttribute("transform")));case"image":case"text":if(n&&r){var a=+t.getAttribute("x")||0,s=+t.getAttribute("y")||0;t.setAttribute("x",a-n),t.setAttribute("y",s-r)}return t.getAttribute("dominant-baseline")&&(t.removeAttribute("dominant-baseline"),t.setAttribute("dy",".8em")),void t.removeAttribute("transform")}if(t.children)for(var c=0,u=t.children.length;c<u;c++)e(t.children[c],n,r)}}(e,t||0,n||0),e.style.visibility="visible"}t.r(12).registerProtocol("svg",r.exports={fileDescription:"SVG 矢量图",fileExtension:".svg",mineType:"image/svg+xml",dataType:"text",encode:function(e,t){var n,r,i,a=t.getPaper(),s=a.shapeNode.getAttribute("transform"),c=t.getRenderContainer(),u=c.getRenderBox(),l=(c.getTransform(),u.width),h=u.height;return a.shapeNode.setAttribute("transform","translate(0.5, 0.5)"),n=a.container.innerHTML,a.shapeNode.setAttribute("transform",s),r=document.createElement("div"),document.body.appendChild(r),r.innerHTML=n,(i=r.querySelector("svg")).setAttribute("width",l+40|0),i.setAttribute("height",h+40|0),i.setAttribute("style","background: "+t.getStyle("background")),i.setAttribute("viewBox",[0,0,l+40|0,h+40|0].join(" ")),tempSvgContainer=document.createElement("div"),o(i,u.x-20|0,u.y-20|0),document.body.removeChild(r),tempSvgContainer.appendChild(i),n=(n=tempSvgContainer.innerHTML).replace(/&nbsp;/g,"&#xa0;")}})}},t[68]={value:function(e,n,r){var o=t.r(12),i="\r",a=/\r\n|\r|\n/,s=function(e){return e.gecko?{REGEXP:new RegExp("^(\t|"+String.fromCharCode(160,160,32,160)+")"),DELETE:new RegExp("^(\t|"+String.fromCharCode(160,160,32,160)+")+")}:e.ie||e.edge?{REGEXP:new RegExp("^("+String.fromCharCode(32)+"|"+String.fromCharCode(160)+")"),DELETE:new RegExp("^("+String.fromCharCode(32)+"|"+String.fromCharCode(160)+")+")}:{REGEXP:/^(\t|\x20{4})/,DELETE:/^(\t|\x20{4})+/}}(t.r(17).Browser);function c(e,t){var n="";return n+=function(e,t){for(var n="";t--;)n+=e;return n}("\t",t=t||0),n+=function(e){if(!e)return"";for(var t=[],n=["\\","n"],r=0,o=0,i=e.length;r<i;r++)if("\n"!==e[r]&&"\r"!==e[r])if(e[r]!==n[o]){switch(o){case 0:t.push(e[r]);break;case 1:t.push(e[r-1],e[r])}o=0}else 2==++o&&(o=0,t.push("\\\\n"));else t.push("\\n"),o=0;return t.join("")}(e.data.text)+i,e.children&&e.children.forEach(function(e){n+=c(e,t+1)}),n}function u(e){return!/\S/.test(e)}function l(e){for(var t=0;s.REGEXP.test(e);)e=e.replace(s.REGEXP,""),t++;return t}function h(e){return{data:{text:function(e){if(!e)return"";for(var t=[],n=["\\","\\","n"],r=0,o=0,i=e.length;r<i;r++)if(e[r]!==n[o])switch(o){case 0:t.push(e[r]),o=0;break;case 1:"n"===e[r]?t.push("\n"):t.push(e[r-1],e[r]),o=0;break;case 2:t.push(e[r-2]),"\\"!==e[r]&&(o=0,t.push(e[r-1],e[r]))}else 3==++o&&(o=0,t.push("\\n"));return t.join("")}(e.replace(s.DELETE,""))}}}o.registerProtocol("text",r.exports={fileDescription:"大纲文本",fileExtension:".txt",dataType:"text",mineType:"text/plain",encode:function(e){return c(e.root,0)},decode:function(e){return function(e){for(var t,n,r,o,i,s,c={},d=e.split(a),f=0;f<d.length;f++)if(!u(n=d[f])){if(r=l(n),o=h(n),0===r){if(t)throw new Error("Invalid local format");t=o}else{if(!c[r-1])throw new Error("Invalid local format");i=c[r-1],s=o,(i.children||(i.children=[])).push(s)}c[r]=o}return t}(e)},Node2Text:function(e){return function(e){if(e)return/^\s*$/.test(e.data.text)&&(e.data.text="分支主题"),c(function e(t){var n={};n.data=t.getData();var r=t.getChildren();n.children=[];for(var o=0;o<r.length;o++)n.children.push(e(r[o]));return n}(e))}(e)}})}},t[69]={value:function(e,n,r){t.r(31).register("default",{getLayout:function(e){if(e.getData("layout"))return e.getData("layout");var t=e.getLevel();return 0===t?"mind":1===t?e.getLayoutPointPreview().x>0?"right":"left":e.parent.getLayout()},getConnect:function(e){return 1==e.getLevel()?"arc":"under"}})}},t[70]={value:function(e,n,r){t.r(31).register("filetree",{getLayout:function(e){return e.getData("layout")?e.getData("layout"):e.isRoot()?"bottom":"filetree-down"},getConnect:function(e){return 1==e.getLevel()?"poly":"l"}})}},t[71]={value:function(e,n,r){t.r(31).register("fish-bone",{getLayout:function(e){if(e.getData("layout"))return e.getData("layout");var t=e.getLevel();return 0===t?"fish-bone-master":1===t?"fish-bone-slave":e.getLayoutPointPreview().y>0?"filetree-up":"filetree-down"},getConnect:function(e){switch(e.getLevel()){case 1:return"fish-bone-master";case 2:return"line";default:return"l"}}})}},t[72]={value:function(e,n,r){t.r(31).register("right",{getLayout:function(e){return e.getData("layout")||"right"},getConnect:function(e){return 1==e.getLevel()?"arc":"bezier"}})}},t[73]={value:function(e,n,r){t.r(31).register("structure",{getLayout:function(e){return e.getData("layout")||"bottom"},getConnect:function(e){return"poly"}})}},t[74]={value:function(e,n,r){t.r(31).register("tianpan",{getLayout:function(e){return e.getData("layout")?e.getData("layout"):0===e.getLevel()?"tianpan":e.parent.getLayout()},getConnect:function(e){return"arc_tp"}})}},t[75]={value:function(e,n,r){var o=t.r(32);["classic","classic-compact"].forEach(function(e){var t="classic-compact"==e;o.register(e,{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":24,"root-padding":t?[10,25]:[15,25],"root-margin":t?[15,25]:[30,100],"root-radius":30,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":16,"main-padding":t?[5,15]:[6,20],"main-margin":t?[5,10]:20,"main-radius":10,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","sub-color":"white","sub-background":"transparent","sub-stroke":"none","sub-font-size":12,"sub-padding":[5,10],"sub-margin":t?[5,10]:[15,20],"sub-tree-margin":30,"sub-radius":5,"sub-space":5,"connect-color":"white","connect-width":2,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","selected-color":"black","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","sub-drop-hint-width":2,"main-drop-hint-width":4,"root-drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})})}},t[76]={value:function(e,n,r){t.r(32).register("fish",{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":24,"root-padding":[35,35],"root-margin":30,"root-radius":100,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":16,"main-padding":[6,20],"main-margin":[20,20],"main-radius":5,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","sub-color":"black","sub-background":"white","sub-stroke":"white","sub-font-size":12,"sub-padding":[5,10],"sub-margin":[10],"sub-radius":5,"sub-space":5,"connect-color":"white","connect-width":3,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})}},t[77]={value:function(e,n,r){var o=t.r(17),i=t.r(32);function a(e,t,n){return o.Color.createHSL(e,t,n)}function s(e,t){return{background:"#fbfbfb","root-color":"white","root-background":a(e,37,60),"root-stroke":a(e,37,60),"root-font-size":18,"root-padding":t?[6,12]:[12,24],"root-margin":t?10:[20,30],"root-radius":5,"root-space":10,"main-color":"black","main-background":a(e,33,95),"main-stroke":a(e,37,60),"main-stroke-width":1,"main-font-size":14,"main-padding":[6,20],"main-margin":t?8:16,"main-radius":3,"main-space":5,"sub-color":"black","sub-background":"transparent","sub-stroke":"none","sub-font-size":12,"sub-padding":t?[3,5]:[5,10],"sub-margin":t?[4,8]:[6,12],"sub-radius":5,"sub-space":5,"connect-color":a(e,37,60),"connect-width":1,"connect-radius":5,"selected-stroke":a(e,26,30),"selected-stroke-width":"3","blur-selected-stroke":a(e,10,60),"marquee-background":a(e,100,80).set("a",.1),"marquee-stroke":a(e,37,60),"drop-hint-color":a(e,26,35),"drop-hint-width":5,"order-hint-area-color":a(e,100,30).set("a",.5),"order-hint-path-color":a(e,100,25),"order-hint-path-width":1,"text-selection-color":a(e,100,20),"line-height":1.5}}var c,u={red:0,soil:25,green:122,blue:204,purple:246,pink:334};for(c in u)i.register("fresh-"+c,s(u[c])),i.register("fresh-"+c+"-compat",s(u[c],!0))}},t[78]={value:function(e,n,r){var o=t.r(32);["snow","snow-compact"].forEach(function(e){var t="snow-compact"==e;o.register(e,{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":24,"root-padding":t?[5,10]:[15,25],"root-margin":t?15:30,"root-radius":5,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":16,"main-padding":t?[4,10]:[6,20],"main-margin":t?[5,10]:[20,40],"main-radius":5,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","sub-color":"black","sub-background":"white","sub-stroke":"white","sub-font-size":12,"sub-padding":[5,10],"sub-margin":t?[5,10]:[10,20],"sub-radius":5,"sub-space":5,"connect-color":"white","connect-width":2,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})})}},t[79]={value:function(e,n,r){var o=t.r(32);["tianpan","tianpan-compact"].forEach(function(e){var t="tianpan-compact"==e;o.register(e,{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":25,"root-padding":t?15:20,"root-margin":t?[15,25]:100,"root-radius":30,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","root-shape":"circle","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":15,"main-padding":t?10:12,"main-margin":t?10:12,"main-radius":10,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","main-shape":"circle","sub-color":"#333","sub-background":"#99ca6a","sub-stroke":"#a4c5c0","sub-font-size":13,"sub-padding":5,"sub-margin":t?6:10,"sub-tree-margin":30,"sub-radius":5,"sub-space":5,"sub-shadow":"rgba(0, 0, 0, .25)","sub-shape":"circle","connect-color":"white","connect-width":2,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","selected-color":"black","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","sub-drop-hint-width":2,"main-drop-hint-width":4,"root-drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.4})})}},t[80]={value:function(e,n,r){t.r(32).register("wire",{background:"black",color:"#999",stroke:"none",padding:10,margin:20,"font-size":14,"connect-color":"#999","connect-width":1,"selected-background":"#999","selected-color":"black","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","sub-drop-hint-width":2,"main-drop-hint-width":4,"root-drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})}};var n,r={"expose-kityminder":34};n="expose-kityminder",t.r([r[n]])}()}).call(this,n("Q2Ig"))},u7YQ:function(e,t,n){"use strict";t.a={today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}},u8Dt:function(e,t,n){var r=n("YESw"),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===o?void 0:n}return i.call(t,e)?t[e]:void 0}},"ut/Y":function(e,t,n){var r=n("ZCpW"),o=n("GDhZ"),i=n("zZ0H"),a=n("Z0cm"),s=n("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):s(e)}},vJtL:function(e,t,n){"use strict";var r=n("8M4i"),o=n("IzLi"),i="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";t.a=function(e){if(!Object(o.a)(e))return!1;var t=Object(r.a)(e);return t==a||t==s||t==i||t==c}},"vN+2":function(e,t){e.exports=function(){}},"w/wX":function(e,t,n){var r=n("QqLw"),o=n("ExA7"),i="[object Set]";e.exports=function(e){return o(e)&&r(e)==i}},"wF/u":function(e,t,n){var r=n("e5cp"),o=n("ExA7");e.exports=function e(t,n,i,a,s){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,i,a,e,s))}},wJg7:function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?n:t)&&("number"==o||"symbol"!=o&&r.test(e))&&e>-1&&e%1==0&&e<t}},wrZu:function(e,t,n){var r=n("+K+b"),o=n("XYm9"),i=n("b2z7"),a=n("otv/"),s=n("yP5f"),c="[object Boolean]",u="[object Date]",l="[object Map]",h="[object Number]",d="[object RegExp]",f="[object Set]",p="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",k="[object Int32Array]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",E="[object Uint16Array]",_="[object Uint32Array]";e.exports=function(e,t,n){var O=e.constructor;switch(t){case m:return r(e);case c:case u:return new O(+e);case v:return o(e,n);case y:case b:case w:case x:case k:case S:case C:case E:case _:return s(e,n);case l:return new O;case h:case p:return new O(e);case d:return i(e);case f:return new O;case g:return a(e)}}},xYSL:function(e,t){e.exports=function(e,t){return e.has(t)}},xutz:function(e,t,n){"use strict";(function(e){var r=n("XqMk"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.a.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();t.a=s}).call(this,n("3UD+")(e))},y1pI:function(e,t,n){var r=n("ljhN");e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},yGk4:function(e,t,n){var r=n("Cwc5")(n("Kz5y"),"Set");e.exports=r},yHx3:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},yP5f:function(e,t,n){var r=n("+K+b");e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},ylTp:function(e,t,n){"use strict";var r=n("Ju5/").a.Symbol;t.a=r},zEVN:function(e,t,n){var r=n("Gi0A"),o=n("sEf8"),i=n("mdPL"),a=i&&i.isMap,s=a?o(a):r;e.exports=s},zZ0H:function(e,t){e.exports=function(e){return e}},zmn3:function(e,t,n){"use strict";var r=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},o=n("oSzE"),i=n("DlmY"),a="__lodash_hash_undefined__";var s=function(e){return this.__data__.set(e,a),this};var c=function(e){return this.__data__.has(e)};function u(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i.a;++t<n;)this.add(e[t])}u.prototype.add=u.prototype.push=s,u.prototype.has=c;var l=u;var h=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var d=function(e,t){return e.has(t)},f=1,p=2;var g=function(e,t,n,r,o,i){var a=n&f,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=i.get(e),g=i.get(t);if(u&&g)return u==t&&g==e;var m=-1,v=!0,y=n&p?new l:void 0;for(i.set(e,t),i.set(t,e);++m<s;){var b=e[m],w=t[m];if(r)var x=a?r(w,b,m,t,e,i):r(b,w,m,e,t,i);if(void 0!==x){if(x)continue;v=!1;break}if(y){if(!h(t,function(e,t){if(!d(y,t)&&(b===e||o(b,e,n,r,i)))return y.push(t)})){v=!1;break}}else if(b!==w&&!o(b,w,n,r,i)){v=!1;break}}return i.delete(e),i.delete(t),v},m=n("ylTp"),v=n("Ce4a"),y=n("YHEm");var b=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n};var w=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},x=1,k=2,S="[object Boolean]",C="[object Date]",E="[object Error]",_="[object Map]",O="[object Number]",N="[object RegExp]",A="[object Set]",T="[object String]",j="[object Symbol]",R="[object ArrayBuffer]",D="[object DataView]",L=m.a?m.a.prototype:void 0,M=L?L.valueOf:void 0;var P=function(e,t,n,r,o,i,a){switch(n){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!i(new v.a(e),new v.a(t)));case S:case C:case O:return Object(y.a)(+e,+t);case E:return e.name==t.name&&e.message==t.message;case N:case T:return e==t+"";case _:var s=b;case A:var c=r&x;if(s||(s=w),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=k,a.set(e,t);var l=g(s(e),s(t),r,o,i,a);return a.delete(e),l;case j:if(M)return M.call(e)==M.call(t)}return!1};var I=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},B=n("/1FC");var z=function(e,t,n){var r=t(e);return Object(B.a)(e)?r:I(r,n(e))};var V=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};var H=function(){return[]},F=Object.prototype.propertyIsEnumerable,q=Object.getOwnPropertySymbols,G=q?function(e){return null==e?[]:(e=Object(e),V(q(e),function(t){return F.call(e,t)}))}:H,U=n("mkut");var Z=function(e){return z(e,U.a,G)},J=1,Y=Object.prototype.hasOwnProperty;var W=function(e,t,n,r,o,i){var a=n&J,s=Z(e),c=s.length;if(c!=Z(t).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in t:Y.call(t,l)))return!1}var h=i.get(e),d=i.get(t);if(h&&d)return h==t&&d==e;var f=!0;i.set(e,t),i.set(t,e);for(var p=a;++u<c;){var g=e[l=s[u]],m=t[l];if(r)var v=a?r(m,g,l,t,e,i):r(g,m,l,e,t,i);if(!(void 0===v?g===m||o(g,m,n,r,i):v)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(f=!1)}return i.delete(e),i.delete(t),f},Q=n("Y7yP"),X=n("Ju5/"),K=Object(Q.a)(X.a,"DataView"),$=n("3cmB"),ee=Object(Q.a)(X.a,"Promise"),te=Object(Q.a)(X.a,"Set"),ne=Object(Q.a)(X.a,"WeakMap"),re=n("8M4i"),oe=n("dLWn"),ie=Object(oe.a)(K),ae=Object(oe.a)($.a),se=Object(oe.a)(ee),ce=Object(oe.a)(te),ue=Object(oe.a)(ne),le=re.a;(K&&"[object DataView]"!=le(new K(new ArrayBuffer(1)))||$.a&&"[object Map]"!=le(new $.a)||ee&&"[object Promise]"!=le(ee.resolve())||te&&"[object Set]"!=le(new te)||ne&&"[object WeakMap]"!=le(new ne))&&(le=function(e){var t=Object(re.a)(e),n="[object Object]"==t?e.constructor:void 0,r=n?Object(oe.a)(n):"";if(r)switch(r){case ie:return"[object DataView]";case ae:return"[object Map]";case se:return"[object Promise]";case ce:return"[object Set]";case ue:return"[object WeakMap]"}return t});var he=le,de=n("WOAq"),fe=n("oYcn"),pe=1,ge="[object Arguments]",me="[object Array]",ve="[object Object]",ye=Object.prototype.hasOwnProperty;var be=function(e,t,n,r,i,a){var s=Object(B.a)(e),c=Object(B.a)(t),u=s?me:he(e),l=c?me:he(t),h=(u=u==ge?ve:u)==ve,d=(l=l==ge?ve:l)==ve,f=u==l;if(f&&Object(de.a)(e)){if(!Object(de.a)(t))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new o.a),s||Object(fe.a)(e)?g(e,t,n,r,i,a):P(e,t,u,n,r,i,a);if(!(n&pe)){var p=h&&ye.call(e,"__wrapped__"),m=d&&ye.call(t,"__wrapped__");if(p||m){var v=p?e.value():e,y=m?t.value():t;return a||(a=new o.a),i(v,y,n,r,a)}}return!!f&&(a||(a=new o.a),W(e,t,n,r,i,a))},we=n("EUcb");var xe=function e(t,n,r,o,i){return t===n||(null==t||null==n||!Object(we.a)(t)&&!Object(we.a)(n)?t!=t&&n!=n:be(t,n,r,o,e,i))},ke=1,Se=2;var Ce=function(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;for(e=Object(e);i--;){var c=n[i];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<a;){var u=(c=n[i])[0],l=e[u],h=c[1];if(s&&c[2]){if(void 0===l&&!(u in e))return!1}else{var d=new o.a;if(r)var f=r(l,h,u,e,t,d);if(!(void 0===f?xe(h,l,ke|Se,r,d):f))return!1}}return!0},Ee=n("IzLi");var _e=function(e){return e==e&&!Object(Ee.a)(e)};var Oe=function(e){for(var t=Object(U.a)(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,_e(o)]}return t};var Ne=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}};var Ae=function(e){var t=Oe(e);return 1==t.length&&t[0][2]?Ne(t[0][0],t[0][1]):function(n){return n===e||Ce(n,e,t)}},Te=n("G8aS"),je=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/;var De=function(e,t){if(Object(B.a)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Object(Te.a)(e))||Re.test(e)||!je.test(e)||null!=t&&e in Object(t)},Le="Expected a function";function Me(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Le);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Me.Cache||i.a),n}Me.Cache=i.a;var Pe=Me,Ie=500;var Be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ze=/\\(\\)?/g,Ve=function(e){var t=Pe(e,function(e){return n.size===Ie&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Be,function(e,n,r,o){t.push(r?o.replace(ze,"$1"):n||e)}),t}),He=1/0,Fe=m.a?m.a.prototype:void 0,qe=Fe?Fe.toString:void 0;var Ge=function e(t){if("string"==typeof t)return t;if(Object(B.a)(t))return r(t,e)+"";if(Object(Te.a)(t))return qe?qe.call(t):"";var n=t+"";return"0"==n&&1/t==-He?"-0":n};var Ue=function(e){return null==e?"":Ge(e)};var Ze=function(e,t){return Object(B.a)(e)?e:De(e,t)?[e]:Ve(Ue(e))},Je=1/0;var Ye=function(e){if("string"==typeof e||Object(Te.a)(e))return e;var t=e+"";return"0"==t&&1/e==-Je?"-0":t};var We=function(e,t){for(var n=0,r=(t=Ze(t,e)).length;null!=e&&n<r;)e=e[Ye(t[n++])];return n&&n==r?e:void 0};var Qe=function(e,t,n){var r=null==e?void 0:We(e,t);return void 0===r?n:r};var Xe=function(e,t){return null!=e&&t in Object(e)},Ke=n("9f76"),$e=n("cSlR"),et=n("Js68");var tt=function(e,t,n){for(var r=-1,o=(t=Ze(t,e)).length,i=!1;++r<o;){var a=Ye(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Object(et.a)(o)&&Object($e.a)(a,o)&&(Object(B.a)(e)||Object(Ke.a)(e))};var nt=function(e,t){return null!=e&&tt(e,t,Xe)},rt=1,ot=2;var it=function(e,t){return De(e)&&_e(t)?Ne(Ye(e),t):function(n){var r=Qe(n,e);return void 0===r&&r===t?nt(n,e):xe(t,r,rt|ot)}},at=n("+Xah");var st=function(e){return function(t){return null==t?void 0:t[e]}};var ct=function(e){return function(t){return We(t,e)}};var ut=function(e){return De(e)?st(Ye(e)):ct(e)};var lt=function(e){return"function"==typeof e?e:null==e?at.a:"object"==typeof e?Object(B.a)(e)?it(e[0],e[1]):Ae(e):ut(e)},ht=n("26kz"),dt=n("5WsY");var ft=function(e,t){var n=-1,r=Object(dt.a)(e)?Array(e.length):[];return Object(ht.a)(e,function(e,o,i){r[++n]=t(e,o,i)}),r};t.a=function(e,t){return(Object(B.a)(e)?r:ft)(e,lt(t,3))}},zoYe:function(e,t,n){var r=n("nmnc"),o=n("eUgh"),i=n("Z0cm"),a=n("/9aa"),s=1/0,c=r?r.prototype:void 0,u=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}}}]);